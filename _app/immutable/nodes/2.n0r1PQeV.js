import{a as P,f as I,d as mr,c as fr}from"../chunks/BIg0sYn1.js";import{o as gr}from"../chunks/CJFNuX6i.js";import{h as ve,x as is,W as vr,e as ls,o as br,n as yr,B as l,t as wr,v as _r,w as zs,y as cs,i as Mt,a2 as xr,aO as Sr,az as Ws,c as Ze,f as xs,aV as kr,s as Er,aW as ya,R as Tr,aX as Pr,aM as Ms,aY as jr,am as Bs,aZ as Ir,a_ as Rr,aR as Nr,a$ as Ae,r as wa,p as _a,b0 as us,q as Mr,b1 as Cr,b2 as Ar,aL as qr,d as Dr,a3 as Or,b3 as Lr,aS as Ur,k as zr,al as Wr,b4 as Br,ai as Pe,a8 as g,a9 as p,D as k,ab as d,a5 as qe,a6 as V,aj as je,aT as B,aU as me,C as Cs,a4 as Gt}from"../chunks/xRZkEjnd.js";import{i as $,p as Hr}from"../chunks/BtEb-poF.js";import{d as De,s as E,e as xa}from"../chunks/CRTnJ9BO.js";import{r as Hs,s as Vs}from"../chunks/Df0M1iNH.js";function Me(s,e){return e}function Vr(s,e,t){for(var a=[],r=e.length,n,o=e.length,i=0;i<r;i++){let _=e[i];_a(_,()=>{if(n){if(n.pending.delete(_),n.done.add(_),n.pending.size===0){var b=s.outrogroups;Ss(Ms(n.done)),b.delete(n),b.size===0&&(s.outrogroups=null)}}else o-=1},!1)}if(o===0){var c=a.length===0&&t!==null;if(c){var m=t,v=m.parentNode;qr(v),v.append(m),s.items.clear()}Ss(e,!c)}else n={pending:new Set(e),done:new Set},(s.outrogroups??=new Set).add(n)}function Ss(s,e=!0){for(var t=0;t<s.length;t++)Dr(s[t],e)}var Fs;function be(s,e,t,a,r,n=null){var o=s,i=new Map,c=(e&ya)!==0;if(c){var m=s;o=ve?is(vr(m)):m.appendChild(ls())}ve&&br();var v=null,_=Tr(()=>{var y=t();return Pr(y)?y:y==null?[]:Ms(y)}),b,f=!0;function S(){h.fallback=v,Fr(h,b,o,e,a),v!==null&&(b.length===0?(v.f&Ae)===0?wa(v):(v.f^=Ae,wt(v,null,o)):_a(v,()=>{v=null}))}var T=yr(()=>{b=l(_);var y=b.length;let w=!1;if(ve){var M=wr(o)===_r;M!==(y===0)&&(o=zs(),is(o),cs(!1),w=!0)}for(var A=new Set,W=Ze,N=Er(),q=0;q<y;q+=1){ve&&Mt.nodeType===xr&&Mt.data===Sr&&(o=Mt,w=!0,cs(!1));var H=b[q],Q=a(H,q),D=f?null:i.get(Q);D?(D.v&&Ws(D.v,H),D.i&&Ws(D.i,q),N&&W.unskip_effect(D.e)):(D=$r(i,f?o:Fs??=ls(),H,Q,q,r,e,t),f||(D.e.f|=Ae),i.set(Q,D)),A.add(Q)}if(y===0&&n&&!v&&(f?v=xs(()=>n(o)):(v=xs(()=>n(Fs??=ls())),v.f|=Ae)),y>A.size&&kr(),ve&&y>0&&is(zs()),!f)if(N){for(const[Y,K]of i)A.has(Y)||W.skip_effect(K.e);W.oncommit(S),W.ondiscard(()=>{})}else S();w&&cs(!0),l(_)}),h={effect:T,items:i,outrogroups:null,fallback:v};f=!1,ve&&(o=Mt)}function nt(s){for(;s!==null&&(s.f&Cr)===0;)s=s.next;return s}function Fr(s,e,t,a,r){var n=(a&Ar)!==0,o=e.length,i=s.items,c=nt(s.effect.first),m,v=null,_,b=[],f=[],S,T,h,y;if(n)for(y=0;y<o;y+=1)S=e[y],T=r(S,y),h=i.get(T).e,(h.f&Ae)===0&&(h.nodes?.a?.measure(),(_??=new Set).add(h));for(y=0;y<o;y+=1){if(S=e[y],T=r(S,y),h=i.get(T).e,s.outrogroups!==null)for(const D of s.outrogroups)D.pending.delete(h),D.done.delete(h);if((h.f&Ae)!==0)if(h.f^=Ae,h===c)wt(h,null,t);else{var w=v?v.next:c;h===s.effect.last&&(s.effect.last=h.prev),h.prev&&(h.prev.next=h.next),h.next&&(h.next.prev=h.prev),Ue(s,v,h),Ue(s,h,w),wt(h,w,t),v=h,b=[],f=[],c=nt(v.next);continue}if((h.f&us)!==0&&(wa(h),n&&(h.nodes?.a?.unfix(),(_??=new Set).delete(h))),h!==c){if(m!==void 0&&m.has(h)){if(b.length<f.length){var M=f[0],A;v=M.prev;var W=b[0],N=b[b.length-1];for(A=0;A<b.length;A+=1)wt(b[A],M,t);for(A=0;A<f.length;A+=1)m.delete(f[A]);Ue(s,W.prev,N.next),Ue(s,v,W),Ue(s,N,M),c=M,v=N,y-=1,b=[],f=[]}else m.delete(h),wt(h,c,t),Ue(s,h.prev,h.next),Ue(s,h,v===null?s.effect.first:v.next),Ue(s,v,h),v=h;continue}for(b=[],f=[];c!==null&&c!==h;)(m??=new Set).add(c),f.push(c),c=nt(c.next);if(c===null)continue}(h.f&Ae)===0&&b.push(h),v=h,c=nt(h.next)}if(s.outrogroups!==null){for(const D of s.outrogroups)D.pending.size===0&&(Ss(Ms(D.done)),s.outrogroups?.delete(D));s.outrogroups.size===0&&(s.outrogroups=null)}if(c!==null||m!==void 0){var q=[];if(m!==void 0)for(h of m)(h.f&us)===0&&q.push(h);for(;c!==null;)(c.f&us)===0&&c!==s.fallback&&q.push(c),c=nt(c.next);var H=q.length;if(H>0){var Q=(a&ya)!==0&&o===0?t:null;if(n){for(y=0;y<H;y+=1)q[y].nodes?.a?.measure();for(y=0;y<H;y+=1)q[y].nodes?.a?.fix()}Vr(s,q,Q)}}n&&Mr(()=>{if(_!==void 0)for(h of _)h.nodes?.a?.apply()})}function $r(s,e,t,a,r,n,o,i){var c=(o&Ir)!==0?(o&Rr)===0?Nr(t,!1,!1):Bs(t):null,m=(o&jr)!==0?Bs(r):null;return{v:c,i:m,e:xs(()=>(n(e,c??t,m??r,i),()=>{s.delete(a)}))}}function wt(s,e,t){if(s.nodes)for(var a=s.nodes.start,r=s.nodes.end,n=e&&(e.f&Ae)===0?e.nodes.start:t;a!==null;){var o=Or(a);if(n.before(a),a===r)return;a=o}}function Ue(s,e,t){e===null?s.effect.first=t:e.next=t,t===null?s.effect.last=e:t.prev=e}const $s=[...` 	
\r\f¬†\v\uFEFF`];function Jr(s,e,t){var a=s==null?"":""+s;if(e&&(a=a?a+" "+e:e),t){for(var r in t)if(t[r])a=a?a+" "+r:r;else if(a.length)for(var n=r.length,o=0;(o=a.indexOf(r,o))>=0;){var i=o+n;(o===0||$s.includes(a[o-1]))&&(i===a.length||$s.includes(a[i]))?a=(o===0?"":a.substring(0,o))+a.substring(i+1):o=i}}return a===""?null:a}function Qr(s,e){return s==null?null:String(s)}function kt(s,e,t,a,r,n){var o=s.__className;if(ve||o!==t||o===void 0){var i=Jr(t,a,n);(!ve||i!==s.getAttribute("class"))&&(i==null?s.removeAttribute("class"):s.className=i),s.__className=t}else if(n&&r!==n)for(var c in n){var m=!!n[c];(r==null||m!==!!r[c])&&s.classList.toggle(c,m)}return n}function Xr(s,e,t,a){var r=s.__style;if(ve||r!==e){var n=Qr(e);(!ve||n!==s.getAttribute("style"))&&(n==null?s.removeAttribute("style"):s.style.cssText=n),s.__style=e}return a}function Js(s,e,t=e){var a=new WeakSet;Lr(s,"input",async r=>{var n=r?s.defaultValue:s.value;if(n=ds(s)?ps(n):n,t(n),Ze!==null&&a.add(Ze),await Ur(),n!==(n=e())){var o=s.selectionStart,i=s.selectionEnd,c=s.value.length;if(s.value=n??"",i!==null){var m=s.value.length;o===i&&i===c&&m>c?(s.selectionStart=m,s.selectionEnd=m):(s.selectionStart=o,s.selectionEnd=Math.min(i,m))}}}),(ve&&s.defaultValue!==s.value||zr(e)==null&&s.value)&&(t(ds(s)?ps(s.value):s.value),Ze!==null&&a.add(Ze)),Wr(()=>{var r=e();if(s===document.activeElement){var n=Br??Ze;if(a.has(n))return}ds(s)&&r===ps(s.value)||s.type==="date"&&!r&&!s.value||r!==s.value&&(s.value=r??"")})}function ds(s){var e=s.type;return e==="number"||e==="range"}function ps(s){return s===""?null:+s}var Gr=I('<input type="text" placeholder="sk-ant-..." class="api-input svelte-1s08ceg"/>'),Yr=I('<input type="password" placeholder="sk-ant-..." class="api-input svelte-1s08ceg"/>'),Kr=I('<div class="setup svelte-1s08ceg"><p class="subtitle svelte-1s08ceg">Aprende gramatica inglesa armando frases con tarjetas</p> <div class="card svelte-1s08ceg"><p class="instructions svelte-1s08ceg">Ingresa tu API key de Anthropic para comenzar:</p> <form class="svelte-1s08ceg"><div class="input-wrapper svelte-1s08ceg"><!> <button type="button" class="toggle-btn svelte-1s08ceg"> </button></div> <button type="submit" class="submit-btn svelte-1s08ceg">Guardar y continuar</button></form> <p class="note svelte-1s08ceg">Tu key se guarda solo en este navegador (localStorage).</p></div> <p class="footer svelte-1s08ceg">Hecho con üß° por <a class="author-link svelte-1s08ceg" href="https://www.linkedin.com/in/diegofdom/" target="_blank" rel="noopener noreferrer">Diego Dominguez</a></p></div>');function Zr(s,e){Pe(e,!0);let t=B(""),a=B(!1);function r(){const T=l(t).trim();T&&e.onsave(T)}var n=Kr(),o=g(p(n),2),i=g(p(o),2),c=p(i),m=p(c);{var v=T=>{var h=Gr();Hs(h),Js(h,()=>l(t),y=>k(t,y)),P(T,h)},_=T=>{var h=Yr();Hs(h),Js(h,()=>l(t),y=>k(t,y)),P(T,h)};$(m,T=>{l(a)?T(v):T(_,!1)})}var b=g(m,2);b.__click=()=>k(a,!l(a));var f=p(b,!0);d(b),d(c);var S=g(c,2);d(i),qe(2),d(o),qe(2),d(n),V(T=>{E(f,l(a)?"Ocultar":"Mostrar"),S.disabled=T},[()=>!l(t).trim()]),xa("submit",i,r),P(s,n),je()}De(["click"]);const Sa=[{id:"random",label:"Aleatorio",description:"Temas variados en cada ejercicio"},{id:"daily routine",label:"Rutina diaria",description:"Actividades del d√≠a a d√≠a"},{id:"travel",label:"Viajes",description:"Aeropuertos, hoteles, destinos"},{id:"work",label:"Trabajo",description:"Oficina, tareas, compa√±eros"},{id:"food",label:"Comida",description:"Restaurantes, recetas, cocina"},{id:"sports",label:"Deportes",description:"Partidos, entrenamiento, equipos"},{id:"shopping",label:"Compras",description:"Tiendas, precios, productos"},{id:"family",label:"Familia",description:"Padres, hijos, reuniones"},{id:"health",label:"Salud",description:"Doctor, ejercicio, bienestar"},{id:"technology",label:"Tecnolog√≠a",description:"Apps, gadgets, internet"},{id:"hobbies",label:"Hobbies",description:"M√∫sica, lectura, juegos"},{id:"weather",label:"Clima",description:"Sol, lluvia, estaciones"},{id:"school",label:"Escuela",description:"Clases, ex√°menes, campus"},{id:"nature",label:"Naturaleza",description:"Animales, plantas, paisajes"}],en=[{id:"dev meetings & scrum",label:"Dev & Scrum",description:"Sprints, standups, PRs, deploys"},{id:"software engineering",label:"Software Dev",description:"C√≥digo, arquitectura, cloud, APIs"}],tn=Sa.filter(s=>s.id!=="random").map(s=>s.id);var sn=I("<button> </button>"),an=I("<button> </button>"),rn=I('<button class="tense-badge svelte-ro4c24"> </button>'),nn=I('<div class="level-card svelte-ro4c24" role="group"><button class="level-header svelte-ro4c24"><span class="level-label svelte-ro4c24"> </span> <span class="level-desc svelte-ro4c24"> </span></button> <div class="tense-badges svelte-ro4c24"><!> <button class="tense-badge question-badge svelte-ro4c24">Questions</button></div></div>'),on=I('<div class="selector svelte-ro4c24"><p class="intro svelte-ro4c24">Elige un tema y un nivel para empezar. Si quieres practicar un tiempo en particular, toca la etiqueta.</p> <div class="topic-section svelte-ro4c24"><div class="topic-chips svelte-ro4c24"></div> <div class="specialized-section svelte-ro4c24"><div class="specialized-line svelte-ro4c24"><span class="specialized-label svelte-ro4c24">Especializados</span></div> <div class="topic-chips svelte-ro4c24"></div></div></div> <div class="levels svelte-ro4c24"></div> <button class="glossary-btn svelte-ro4c24"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path></svg> Glosario gramatical</button> <button class="change-key-btn svelte-ro4c24">Cambiar API key</button> <p class="footer svelte-ro4c24">Hecho con <button class="heart-link svelte-ro4c24">üß°</button> por <a class="author-link svelte-ro4c24" href="https://www.linkedin.com/in/diegofdom/" target="_blank" rel="noopener noreferrer">Diego Dominguez</a></p></div>');function ln(s,e){Pe(e,!0);let t=B("random");const a=[{key:"beginner",label:"Principiante",tenses:["Present simple","Present continuous","Going to","Simple past","Imperative"],description:"Presente simple, presente continuo, futuro con going to, pasado simple, imperativo."},{key:"intermediate",label:"Intermedio",tenses:["Present perfect","Present perfect continuous","Past continuous","Will future","First conditional","Second conditional","Modals","Used to"],description:"Presente perfecto, presente perfecto continuo, pasado continuo, futuro con will, condicionales, modales, used to."},{key:"advanced",label:"Avanzado",tenses:["Past perfect","Third conditional","Passive voice","Reported speech","Subjunctive","Comparatives and superlatives"],description:"Pasado perfecto, tercer condicional, voz pasiva, estilo indirecto, subjuntivo, comparativos."}];function r(h,y,w){h.stopPropagation(),e.onselect(y,l(t),w)}function n(h,y){h.stopPropagation(),e.onselect(y,l(t),void 0,!0)}var o=on(),i=g(p(o),2),c=p(i);be(c,21,()=>Sa,Me,(h,y)=>{var w=sn();let M;w.__click=()=>k(t,l(y).id,!0);var A=p(w,!0);d(w),V(()=>{M=kt(w,1,"topic-chip svelte-ro4c24",null,M,{active:l(t)===l(y).id}),Vs(w,"title",l(y).description),E(A,l(y).label)}),P(h,w)}),d(c);var m=g(c,2),v=g(p(m),2);be(v,21,()=>en,Me,(h,y)=>{var w=an();let M;w.__click=()=>k(t,l(y).id,!0);var A=p(w,!0);d(w),V(()=>{M=kt(w,1,"topic-chip specialized svelte-ro4c24",null,M,{active:l(t)===l(y).id}),Vs(w,"title",l(y).description),E(A,l(y).label)}),P(h,w)}),d(v),d(m),d(i);var _=g(i,2);be(_,21,()=>a,Me,(h,y)=>{var w=nn(),M=p(w);M.__click=()=>e.onselect(l(y).key,l(t));var A=p(M),W=p(A,!0);d(A);var N=g(A,2),q=p(N,!0);d(N),d(M);var H=g(M,2),Q=p(H);be(Q,17,()=>l(y).tenses,Me,(Y,K)=>{var ae=rn();ae.__click=re=>r(re,l(y).key,l(K).toLowerCase());var Ie=p(ae,!0);d(ae),V(()=>E(Ie,l(K))),P(Y,ae)});var D=g(Q,2);D.__click=Y=>n(Y,l(y).key),d(H),d(w),V(()=>{E(W,l(y).label),E(q,l(y).description)}),P(h,w)}),d(_);var b=g(_,2);b.__click=function(...h){e.onglossary?.apply(this,h)};var f=g(b,2);f.__click=function(...h){e.onchangekey?.apply(this,h)};var S=g(f,2),T=g(p(S));T.__click=function(...h){e.ondedication?.apply(this,h)},qe(2),d(S),d(o),P(s,o),je()}De(["click"]);const cn={level:"Fundamentos",tenses:[{name:"Personal Pronouns - Pronombres personales",description:"Los pronombres reemplazan al nombre del sujeto en la oraci√≥n.",example:"I am a student. / She likes music. / They are playing.",exampleEs:"Yo soy estudiante. / A ella le gusta la m√∫sica. / Ellos est√°n jugando.",structure:"I (yo) ¬∑ you (t√∫/usted) ¬∑ he (√©l) ¬∑ she (ella) ¬∑ it (ello) ¬∑ we (nosotros) ¬∑ they (ellos/ellas)",tip:'"You" sirve para t√∫, usted, ustedes y vosotros. "It" se usa para cosas y animales.'},{name:'Verb "to be" - Verbo "ser/estar"',description:"El verbo m√°s importante del ingl√©s. Sirve para describir, identificar y ubicar.",example:"I am happy. / She is a doctor. / We are at home.",exampleEs:"Yo estoy feliz. / Ella es doctora. / Nosotros estamos en casa.",structure:"I am ¬∑ you are ¬∑ he/she/it is ¬∑ we are ¬∑ they are",tip:"Formas cortas: I'm, you're, he's, she's, it's, we're, they're. Negaci√≥n: am not, isn't, aren't."},{name:"Articles - Art√≠culos",description:"Palabras que van antes del sustantivo para indicar si es espec√≠fico o general.",example:"The cat is on the table. / I have a dog. / She is an artist.",exampleEs:"El gato est√° en la mesa. / Tengo un perro. / Ella es una artista.",structure:"the (el/la/los/las) ¬∑ a (un/una antes de consonante) ¬∑ an (un/una antes de vocal)",tip:'"The" = algo espec√≠fico. "A/an" = algo general. No se usa art√≠culo para cosas en general: "I like music" (no "the music").'},{name:"Regular Verbs - Verbos regulares",description:"Verbos que siguen el patr√≥n regular: se les agrega -ed en pasado y participio.",example:"I work every day. / She played yesterday. / They have finished.",exampleEs:"Trabajo todos los d√≠as. / Ella jug√≥ ayer. / Ellos han terminado.",structure:"",tip:"Reglas: verbo+ed (worked). Termina en -e ‚Üí solo -d (lived). Consonante+y ‚Üí ied (studied). CVC corto ‚Üí dobla consonante (stopped).",table:{headers:["Verb","Past","Espa√±ol"],rows:[["agree","agreed","estar de acuerdo"],["answer","answered","responder"],["arrive","arrived","llegar"],["ask","asked","preguntar"],["believe","believed","creer"],["call","called","llamar"],["carry","carried","cargar"],["change","changed","cambiar"],["clean","cleaned","limpiar"],["close","closed","cerrar"],["complete","completed","completar"],["cook","cooked","cocinar"],["create","created","crear"],["cry","cried","llorar"],["dance","danced","bailar"],["decide","decided","decidir"],["deliver","delivered","entregar"],["describe","described","describir"],["design","designed","dise√±ar"],["develop","developed","desarrollar"],["enjoy","enjoyed","disfrutar"],["explain","explained","explicar"],["finish","finished","terminar"],["fix","fixed","arreglar"],["follow","followed","seguir"],["help","helped","ayudar"],["imagine","imagined","imaginar"],["improve","improved","mejorar"],["invite","invited","invitar"],["jump","jumped","saltar"],["laugh","laughed","re√≠r"],["learn","learned","aprender"],["like","liked","gustar"],["listen","listened","escuchar"],["live","lived","vivir"],["look","looked","mirar"],["love","loved","amar"],["manage","managed","gestionar"],["miss","missed","extra√±ar"],["move","moved","mover"],["need","needed","necesitar"],["offer","offered","ofrecer"],["open","opened","abrir"],["order","ordered","ordenar"],["organize","organized","organizar"],["plan","planned","planear"],["play","played","jugar"],["practice","practiced","practicar"],["prepare","prepared","preparar"],["promise","promised","prometer"],["pull","pulled","jalar"],["push","pushed","empujar"],["rain","rained","llover"],["relax","relaxed","relajarse"],["remember","remembered","recordar"],["return","returned","regresar"],["smile","smiled","sonre√≠r"],["start","started","empezar"],["stop","stopped","parar"],["study","studied","estudiar"],["suggest","suggested","sugerir"],["talk","talked","hablar"],["travel","traveled","viajar"],["try","tried","intentar"],["turn","turned","girar"],["use","used","usar"],["visit","visited","visitar"],["wait","waited","esperar"],["walk","walked","caminar"],["want","wanted","querer"],["wash","washed","lavar"],["watch","watched","ver/mirar"],["work","worked","trabajar"],["worry","worried","preocuparse"]]}},{name:"Irregular Verbs - Verbos irregulares",description:"Verbos que NO siguen el patr√≥n -ed. Debes memorizarlos.",example:"I go to school. / She went home. / They have gone.",exampleEs:"Voy a la escuela. / Ella fue a casa. / Ellos se han ido.",structure:"",tip:'No hay regla: hay que aprenderlos. Algunos no cambian: put‚Üíput‚Üíput, cut‚Üícut‚Üícut. "Read" se escribe igual pero cambia pronunciaci√≥n: /riÀêd/ ‚Üí /r…õd/.',table:{headers:["Base","Past","Participle","Espa√±ol"],rows:[["be","was/were","been","ser/estar"],["become","became","become","convertirse"],["begin","began","begun","comenzar"],["bite","bit","bitten","morder"],["blow","blew","blown","soplar"],["break","broke","broken","romper"],["bring","brought","brought","traer"],["build","built","built","construir"],["buy","bought","bought","comprar"],["catch","caught","caught","atrapar"],["choose","chose","chosen","elegir"],["come","came","come","venir"],["cost","cost","cost","costar"],["cut","cut","cut","cortar"],["do","did","done","hacer"],["draw","drew","drawn","dibujar"],["drink","drank","drunk","beber"],["drive","drove","driven","conducir"],["eat","ate","eaten","comer"],["fall","fell","fallen","caer"],["feed","fed","fed","alimentar"],["feel","felt","felt","sentir"],["find","found","found","encontrar"],["fly","flew","flown","volar"],["forget","forgot","forgotten","olvidar"],["forgive","forgave","forgiven","perdonar"],["get","got","gotten","obtener"],["give","gave","given","dar"],["go","went","gone","ir"],["grow","grew","grown","crecer"],["hang","hung","hung","colgar"],["have","had","had","tener"],["hear","heard","heard","o√≠r"],["hide","hid","hidden","esconder"],["hit","hit","hit","golpear"],["hold","held","held","sostener"],["keep","kept","kept","mantener"],["know","knew","known","saber"],["lead","led","led","liderar"],["leave","left","left","irse/dejar"],["lend","lent","lent","prestar"],["let","let","let","permitir"],["lie","lay","lain","acostarse"],["lose","lost","lost","perder"],["make","made","made","hacer/fabricar"],["mean","meant","meant","significar"],["pay","paid","paid","pagar"],["put","put","put","poner"],["read","read","read","leer"],["ride","rode","ridden","montar"],["rise","rose","risen","levantarse"],["run","ran","run","correr"],["say","said","said","decir"],["see","saw","seen","ver"],["sell","sold","sold","vender"],["send","sent","sent","enviar"],["set","set","set","fijar"],["shake","shook","shaken","sacudir"],["show","showed","shown","mostrar"],["shut","shut","shut","cerrar"],["sing","sang","sung","cantar"],["sit","sat","sat","sentarse"],["sleep","slept","slept","dormir"],["speak","spoke","spoken","hablar"],["spend","spent","spent","gastar/pasar tiempo"],["stand","stood","stood","pararse"],["steal","stole","stolen","robar"],["swim","swam","swum","nadar"],["take","took","taken","tomar"],["teach","taught","taught","ense√±ar"],["tell","told","told","contar/decir"],["think","thought","thought","pensar"],["throw","threw","thrown","lanzar"],["understand","understood","understood","entender"],["wake","woke","woken","despertar"],["wear","wore","worn","vestir/usar"],["win","won","won","ganar"],["write","wrote","written","escribir"]]}},{name:"Question Words - Palabras interrogativas",description:"Palabras que se usan al inicio de preguntas para pedir informaci√≥n espec√≠fica.",example:"What is your name? / Where do you live? / Why are you late?",exampleEs:"¬øCu√°l es tu nombre? / ¬øD√≥nde vives? / ¬øPor qu√© llegas tarde?",structure:"What (qu√©) ¬∑ Where (d√≥nde) ¬∑ When (cu√°ndo) ¬∑ Who (qui√©n) ¬∑ Why (por qu√©) ¬∑ How (c√≥mo) ¬∑ Which (cu√°l) ¬∑ How many (cu√°ntos) ¬∑ How much (cu√°nto)",tip:'La estructura es: Question word + auxiliar + sujeto + verbo. Ej: "Where do you work?"'},{name:"Prepositions of Time - Preposiciones de tiempo",description:"Palabras que indican cu√°ndo ocurre algo.",example:"I wake up at 7. / She was born in 1990. / We travel on Mondays.",exampleEs:"Me despierto a las 7. / Ella naci√≥ en 1990. / Viajamos los lunes.",structure:"at (hora): at 3 PM, at night ¬∑ in (mes/a√±o/per√≠odo): in May, in 2020, in the morning ¬∑ on (d√≠a/fecha): on Monday, on July 4th",tip:'AT = hora/momento puntual. IN = per√≠odo largo. ON = d√≠a espec√≠fico. "At night" pero "in the morning/afternoon/evening".'},{name:"Prepositions of Place - Preposiciones de lugar",description:"Palabras que indican d√≥nde est√° algo o alguien.",example:"The book is on the table. / She is at school. / They live in Paris.",exampleEs:"El libro est√° en la mesa. / Ella est√° en la escuela. / Ellos viven en Par√≠s.",structure:"in (dentro): in the box, in Paris ¬∑ on (sobre): on the table, on the wall ¬∑ at (punto): at school, at home ¬∑ under (debajo) ¬∑ next to (al lado) ¬∑ between (entre) ¬∑ behind (detr√°s) ¬∑ in front of (enfrente de)",tip:"IN = dentro de un espacio. ON = sobre una superficie. AT = un punto/lugar espec√≠fico."},{name:"Possessive Adjectives - Adjetivos posesivos",description:"Indican a qui√©n pertenece algo. Van antes del sustantivo.",example:"This is my book. / Her cat is black. / Their house is big.",exampleEs:"Este es mi libro. / Su gato (de ella) es negro. / Su casa (de ellos) es grande.",structure:"my (mi) ¬∑ your (tu/su) ¬∑ his (su, de √©l) ¬∑ her (su, de ella) ¬∑ its (su, de ello) ¬∑ our (nuestro) ¬∑ their (su, de ellos)",tip:`No confundas: "your" (tu) con "you're" (t√∫ eres), ni "their" (su) con "they're" (ellos son) o "there" (all√≠).`},{name:"Demonstratives - Demostrativos",description:"Palabras que se√±alan algo cercano o lejano, en singular o plural.",example:"This is my pen. / That is your car. / These are delicious. / Those are expensive.",exampleEs:"Este es mi bol√≠grafo. / Ese es tu carro. / Estos est√°n deliciosos. / Esos son caros.",structure:"this (este/esta, cerca singular) ¬∑ that (ese/esa, lejos singular) ¬∑ these (estos/estas, cerca plural) ¬∑ those (esos/esas, lejos plural)",tip:'"This/these" = cerca de ti. "That/those" = lejos de ti. Tambi√©n se usan para tiempo: "this week" (esta semana), "that day" (ese d√≠a).'},{name:"Common Adjectives - Adjetivos comunes",description:"Palabras que describen sustantivos. En ingl√©s van ANTES del sustantivo y no cambian en plural.",example:"She has a big house. / The small cats are cute. / It is an old book.",exampleEs:"Ella tiene una casa grande. / Los gatos peque√±os son lindos. / Es un libro viejo.",structure:"big‚Üîsmall (grande‚Üîpeque√±o) ¬∑ hot‚Üîcold (caliente‚Üîfr√≠o) ¬∑ old‚Üînew (viejo‚Üînuevo) ¬∑ good‚Üîbad (bueno‚Üîmalo) ¬∑ happy‚Üîsad (feliz‚Üîtriste) ¬∑ fast‚Üîslow (r√°pido‚Üîlento) ¬∑ easy‚Üîhard (f√°cil‚Üîdif√≠cil) ¬∑ long‚Üîshort (largo‚Üîcorto) ¬∑ beautiful‚Üîugly (bonito‚Üîfeo) ¬∑ expensive‚Üîcheap (caro‚Üîbarato)",tip:'En ingl√©s los adjetivos NO tienen plural: "big houses" (no "bigs houses"). Siempre van antes del sustantivo: "a red car" (no "a car red").'},{name:"Numbers - N√∫meros",description:"Los n√∫meros b√°sicos en ingl√©s del 1 al 20 y las decenas.",example:"I have two brothers. / She is twenty-five years old. / There are fifty students.",exampleEs:"Tengo dos hermanos. / Ella tiene veinticinco a√±os. / Hay cincuenta estudiantes.",structure:"1 one ¬∑ 2 two ¬∑ 3 three ¬∑ 4 four ¬∑ 5 five ¬∑ 6 six ¬∑ 7 seven ¬∑ 8 eight ¬∑ 9 nine ¬∑ 10 ten ¬∑ 11 eleven ¬∑ 12 twelve ¬∑ 13 thirteen ¬∑ 14 fourteen ¬∑ 15 fifteen ¬∑ 16 sixteen ¬∑ 17 seventeen ¬∑ 18 eighteen ¬∑ 19 nineteen ¬∑ 20 twenty ¬∑ 30 thirty ¬∑ 40 forty ¬∑ 50 fifty ¬∑ 60 sixty ¬∑ 70 seventy ¬∑ 80 eighty ¬∑ 90 ninety ¬∑ 100 one hundred",tip:'Del 13 al 19 terminan en -teen. Las decenas terminan en -ty. Para compuestos: twenty-one (21), thirty-five (35). Cuidado: "forty" (no "fourty").'},{name:"Days & Months - D√≠as y meses",description:"En ingl√©s los d√≠as y meses SIEMPRE se escriben con may√∫scula.",example:"I work on Monday. / My birthday is in July. / See you on Friday!",exampleEs:"Trabajo el lunes. / Mi cumplea√±os es en julio. / ¬°Nos vemos el viernes!",structure:"Monday (lunes) ¬∑ Tuesday (martes) ¬∑ Wednesday (mi√©rcoles) ¬∑ Thursday (jueves) ¬∑ Friday (viernes) ¬∑ Saturday (s√°bado) ¬∑ Sunday (domingo) ¬∑¬∑ January (enero) ¬∑ February (febrero) ¬∑ March (marzo) ¬∑ April (abril) ¬∑ May (mayo) ¬∑ June (junio) ¬∑ July (julio) ¬∑ August (agosto) ¬∑ September (septiembre) ¬∑ October (octubre) ¬∑ November (noviembre) ¬∑ December (diciembre)",tip:'Usa "on" con d√≠as: "on Monday". Usa "in" con meses: "in July". Siempre con may√∫scula: "Friday" (no "friday").'},{name:"Adverbs of Frequency - Adverbios de frecuencia",description:'Indican con qu√© frecuencia ocurre algo. Van entre el sujeto y el verbo (excepto con "to be").',example:"I always drink coffee. / She never eats meat. / They usually arrive early.",exampleEs:"Siempre tomo caf√©. / Ella nunca come carne. / Ellos usualmente llegan temprano.",structure:"always (siempre, 100%) ¬∑ usually (usualmente, 90%) ¬∑ often (a menudo, 70%) ¬∑ sometimes (a veces, 50%) ¬∑ rarely (raramente, 10%) ¬∑ never (nunca, 0%)",tip:'Van ANTES del verbo: "I always eat". Pero DESPU√âS de "to be": "She is always happy" (no "She always is happy").'},{name:"Basic Connectors - Conectores b√°sicos",description:"Palabras que unen ideas en una oraci√≥n.",example:"I like tea and coffee. / She is tired but happy. / Study hard or you will fail.",exampleEs:"Me gusta el t√© y el caf√©. / Ella est√° cansada pero feliz. / Estudia duro o reprobar√°s.",structure:"and (y) ¬∑ but (pero) ¬∑ or (o) ¬∑ because (porque) ¬∑ so (as√≠ que/entonces) ¬∑ also (tambi√©n) ¬∑ however (sin embargo) ¬∑ then (entonces/luego)",tip:'"Because" responde a "why": "I stayed home because it was raining." "So" indica resultado: "It was raining, so I stayed home."'}]},at=[{level:"Principiante",tenses:[{name:"Present Simple - Presente simple",description:"Acciones habituales, rutinas o verdades generales.",example:"She works every day.",exampleEs:"Ella trabaja todos los d√≠as.",structure:"Sujeto + verbo (base / +s en 3a persona)",tip:'Usa "do/does" para preguntas y negaciones.'},{name:"Present Continuous - Presente continuo",description:"Acciones que ocurren en este momento o situaciones temporales.",example:"They are playing in the park.",exampleEs:"Ellos est√°n jugando en el parque.",structure:"Sujeto + am/is/are + verbo-ing",tip:"No se usa con verbos de estado (know, want, like)."},{name:'Going to (Future) - Futuro con "ir a"',description:"Planes o intenciones futuras, o predicciones basadas en evidencia.",example:"I am going to travel next month.",exampleEs:"Voy a viajar el pr√≥ximo mes.",structure:"Sujeto + am/is/are + going to + verbo base",tip:"Indica que ya se ha decidido o hay evidencia visible."},{name:"Simple Past - Pasado simple",description:"Acciones completadas en el pasado.",example:"We visited the museum yesterday.",exampleEs:"Visitamos el museo ayer.",structure:"Sujeto + verbo en pasado (-ed / irregular)",tip:'Usa "did" para preguntas y negaciones. Cuidado con los verbos irregulares (go‚Üíwent, eat‚Üíate).'},{name:"Imperative - Imperativo",description:"√ìrdenes, instrucciones o peticiones. No llevan sujeto expl√≠cito.",example:"Close the door. / Don't touch that. / Please sit down.",exampleEs:"Cierra la puerta. / No toques eso. / Por favor si√©ntate.",structure:"Verbo base (sin sujeto) / Don't + verbo base (negativo)",tip:`El sujeto "you" est√° impl√≠cito. Para ser m√°s cort√©s agrega "Please". Negativo: "Don't run!" (no "Not run!").`}]},{level:"Intermedio",tenses:[{name:"Present Perfect - Presente perfecto",description:"Acciones pasadas con conexion al presente, o experiencias de vida.",example:"I have visited three countries.",exampleEs:"He visitado tres pa√≠ses.",structure:"Sujeto + have/has + participio pasado",tip:'Usa "ever", "never", "already", "yet", "just" como pistas.'},{name:"Present Perfect Continuous - Presente perfecto continuo",description:"Acciones que empezaron en el pasado y contin√∫an hasta el presente, o que acaban de terminar.",example:"She has been studying for three hours.",exampleEs:"Ella ha estado estudiando durante tres horas.",structure:"Sujeto + have/has + been + verbo-ing",tip:'Usa "for" (duraci√≥n) y "since" (punto de inicio). Enfatiza la duraci√≥n de la acci√≥n, no solo el resultado.'},{name:"Past Continuous - Pasado continuo",description:"Acciones en progreso en un momento del pasado, o acciones interrumpidas.",example:"She was reading when the phone rang.",exampleEs:"Ella estaba leyendo cuando son√≥ el tel√©fono.",structure:"Sujeto + was/were + verbo-ing",tip:'Frecuentemente se combina con Simple Past usando "when" o "while".'},{name:'Will (Future) - Futuro con "will"',description:"Decisiones espontaneas, predicciones, promesas u ofertas.",example:"I will help you with that.",exampleEs:"Te ayudar√© con eso.",structure:"Sujeto + will + verbo base",tip:'A diferencia de "going to", indica decision en el momento o prediccion sin evidencia.'},{name:"First Conditional - Primer condicional",description:"Situaciones posibles/probables en el futuro.",example:"If it rains, we will stay home.",exampleEs:"Si llueve, nos quedaremos en casa.",structure:"If + present simple, will + verbo base",tip:'La condicion es real y posible. No uses "will" en la clausula con "if".'},{name:"Modals - Verbos modales (can, must, should)",description:"Expresan habilidad, obligacion o consejo.",example:"You should study more. / She can swim very well.",exampleEs:"Deber√≠as estudiar m√°s. / Ella sabe nadar muy bien.",structure:'Sujeto + modal + verbo base (sin "to")',tip:"Can = poder/saber, must = deber (obligacion fuerte), should = deberia (consejo)."},{name:"Second Conditional - Segundo condicional",description:"Situaciones hipot√©ticas o irreales en el presente o futuro.",example:"If I had more money, I would travel the world.",exampleEs:"Si tuviera m√°s dinero, viajar√≠a por el mundo.",structure:"If + past simple, would + verbo base",tip:'La situaci√≥n es irreal o poco probable. Usa "were" (no "was") para todos: "If I were you...".'},{name:"Used to - Sol√≠a",description:"H√°bitos o estados pasados que ya no son verdad.",example:"I used to play football every weekend.",exampleEs:"Yo sol√≠a jugar f√∫tbol cada fin de semana.",structure:"Sujeto + used to + verbo base",tip:`Indica que algo era verdad en el pasado pero ya NO lo es. Negativo: "didn't use to" (sin -d). Pregunta: "Did you use to...?".`}]},{level:"Avanzado",tenses:[{name:"Past Perfect - Pasado perfecto",description:"Una accion que ocurrio antes de otra accion en el pasado.",example:"She had already left when I arrived.",exampleEs:"Ella ya se hab√≠a ido cuando llegu√©.",structure:"Sujeto + had + participio pasado",tip:'Es "el pasado del pasado". Usa "already", "just", "never", "before" como pistas.'},{name:"Third Conditional - Tercer condicional",description:"Situaciones hipoteticas del pasado (que no ocurrieron).",example:"If I had studied, I would have passed.",exampleEs:"Si hubiera estudiado, habr√≠a aprobado.",structure:"If + past perfect, would have + participio",tip:"Expresa arrepentimiento o especulacion sobre el pasado. Es irreal."},{name:"Passive Voice - Voz pasiva",description:"Cuando el foco esta en la accion o el receptor, no en quien la realiza.",example:"The book was written by a famous author.",exampleEs:"El libro fue escrito por un autor famoso.",structure:"Sujeto (receptor) + be + participio pasado",tip:'Usa "by" para indicar quien realiza la accion (agente), pero es opcional.'},{name:"Passive Voice: Present Simple - Voz pasiva: Presente simple",description:"Voz pasiva para acciones habituales o verdades generales.",example:"The reports are reviewed every Monday.",exampleEs:"Los informes son revisados cada lunes.",structure:"Sujeto + am/is/are + participio pasado",tip:'Usa "am/is/are" como auxiliar. Ej: "English is spoken here."'},{name:"Passive Voice: Present Continuous - Voz pasiva: Presente continuo",description:"Voz pasiva para acciones en progreso ahora mismo.",example:"The house is being painted this week.",exampleEs:"La casa est√° siendo pintada esta semana.",structure:"Sujeto + am/is/are + being + participio pasado",tip:'Agrega "being" entre el auxiliar y el participio. Ej: "is being repaired".'},{name:"Passive Voice: Past Simple - Voz pasiva: Pasado simple",description:"Voz pasiva para acciones completadas en el pasado.",example:"The letter was sent yesterday.",exampleEs:"La carta fue enviada ayer.",structure:"Sujeto + was/were + participio pasado",tip:'Usa "was/were" como auxiliar. Ej: "The cake was made by my grandmother."'},{name:"Passive Voice: Past Continuous - Voz pasiva: Pasado continuo",description:"Voz pasiva para acciones en progreso en un momento del pasado.",example:"The road was being repaired when we arrived.",exampleEs:"La carretera estaba siendo reparada cuando llegamos.",structure:"Sujeto + was/were + being + participio pasado",tip:'Similar al present continuous pasivo pero en pasado: "was/were being + participio".'},{name:"Passive Voice: Present Perfect - Voz pasiva: Presente perfecto",description:"Voz pasiva para acciones pasadas con conexion al presente.",example:"The homework has been finished already.",exampleEs:"La tarea ya ha sido terminada.",structure:"Sujeto + have/has + been + participio pasado",tip:'Combina "have/has been" + participio. Ej: "has been sold".'},{name:"Passive Voice: Past Perfect - Voz pasiva: Pasado perfecto",description:"Voz pasiva para acciones que ocurrieron antes de otra accion pasada.",example:"The dinner had been prepared before the guests arrived.",exampleEs:"La cena hab√≠a sido preparada antes de que llegaran los invitados.",structure:"Sujeto + had + been + participio pasado",tip:'Usa "had been" + participio. Es el pasado del pasado en voz pasiva.'},{name:'Passive Voice: Will (Future) - Voz pasiva: Futuro con "will"',description:"Voz pasiva para acciones futuras.",example:"The winners will be announced tomorrow.",exampleEs:"Los ganadores ser√°n anunciados ma√±ana.",structure:"Sujeto + will + be + participio pasado",tip:'Usa "will be" + participio. Ej: "will be delivered", "will be invited".'},{name:'Passive Voice: Going to (Future) - Voz pasiva: Futuro con "ir a"',description:"Voz pasiva para planes o intenciones futuras.",example:"The park is going to be renovated next year.",exampleEs:"El parque va a ser renovado el pr√≥ximo a√±o.",structure:"Sujeto + am/is/are + going to + be + participio pasado",tip:'Agrega "be" antes del participio: "is going to be cleaned".'},{name:"Passive Voice: Modal Verb - Voz pasiva: Verbo modal",description:"Voz pasiva combinada con un verbo modal (can, must, should, could, might).",example:"This report must be finished by Friday.",exampleEs:"Este informe debe ser terminado para el viernes.",structure:"Sujeto + modal + be + participio pasado",tip:'El modal va primero, luego "be" + participio. Ej: "can be done", "should be reviewed", "must be sent".'},{name:"Reported Speech - Discurso indirecto",description:"Relatar lo que alguien dijo, cambiando tiempos verbales. Incluye afirmaciones, preguntas, √≥rdenes y peticiones.",example:"He said that he was tired.",exampleEs:"√âl dijo que estaba cansado.",structure:"Sujeto + said/told + (that) + oraci√≥n con tiempo retrocedido",tip:'Los tiempos "retroceden": present‚Üípast, past‚Üípast perfect, will‚Üíwould, can‚Üícould.',table:{headers:["Directo","Indirecto","Ejemplo"],rows:[["present simple","past simple",'"I work" ‚Üí He said he worked'],["present continuous","past continuous",'"I am working" ‚Üí He said he was working'],["past simple","past perfect",'"I worked" ‚Üí He said he had worked'],["present perfect","past perfect",'"I have worked" ‚Üí He said he had worked'],["pres. perfect continuous","past perfect continuous",'"I have been working" ‚Üí He said he had been working'],["past continuous","past perfect continuous",'"I was working" ‚Üí He said he had been working'],["will","would",'"I will go" ‚Üí He said he would go'],["can","could",'"I can swim" ‚Üí He said he could swim'],["must","had to",'"I must leave" ‚Üí He said he had to leave']]}},{name:"Reported Speech: Questions - Preguntas indirectas",description:"Al reportar preguntas, se pierde la inversi√≥n sujeto-auxiliar y se usa orden de afirmaci√≥n.",example:"She asked if I was coming. / He asked where I lived.",exampleEs:"Ella pregunt√≥ si yo iba. / √âl pregunt√≥ d√≥nde viv√≠a yo.",structure:"Sujeto + asked/wanted to know + if/whether (s√≠/no) o wh-word + orden normal",tip:'Yes/no questions usan "if" o "whether". Wh-questions mantienen la palabra interrogativa pero sin inversi√≥n: "Where do you live?" ‚Üí He asked where I lived.'},{name:"Reported Speech: Commands - √ìrdenes y peticiones indirectas",description:'Al reportar √≥rdenes o peticiones, se usa "told/asked + objeto + to + verbo".',example:"He told me to wait. / She asked me not to run.",exampleEs:"√âl me dijo que esperara. / Ella me pidi√≥ que no corriera.",structure:"Sujeto + told/asked/ordered + objeto + (not) to + verbo base",tip:'Usa "told" para √≥rdenes directas y "asked" para peticiones. Para negativo: "asked me not to..."'},{name:"Reported Speech: Reporting Verbs - Verbos de reporte",description:'Adem√°s de "said" y "told", hay muchos verbos para reportar con diferentes matices.',example:"She admitted she had lied. / He warned me not to go.",exampleEs:"Ella admiti√≥ que hab√≠a mentido. / √âl me advirti√≥ que no fuera.",structure:"explained/admitted/denied/promised/warned/suggested/complained/insisted + that/to...",tip:"Cada verbo tiene su matiz: admitted (admiti√≥), denied (neg√≥), promised (prometi√≥), warned (advirti√≥), suggested (sugiri√≥), complained (se quej√≥), insisted (insisti√≥), explained (explic√≥)."},{name:"Subjunctive - Subjuntivo",description:"Deseos, sugerencias o situaciones hipoteticas.",example:"I wish I were taller. / He suggested that she study harder.",exampleEs:"Desear√≠a ser m√°s alto. / √âl sugiri√≥ que ella estudie m√°s.",structure:"Wish + past simple / suggest + (that) + verbo base",tip:'Con "wish", usa "were" para todas las personas (no "was").'},{name:"Comparatives and Superlatives - Comparativos y superlativos",description:"Comparan cualidades entre dos cosas (comparativo) o destacan el grado m√°ximo (superlativo).",example:"She is taller than her brother. / This is the most beautiful park in the city.",exampleEs:"Ella es m√°s alta que su hermano. / Este es el parque m√°s bonito de la ciudad.",structure:"Comparativo: adj + -er + than / more + adj + than ¬∑ Superlativo: the + adj + -est / the most + adj",tip:"Cortos (1 s√≠laba): -er/-est (tall‚Üítaller‚Üítallest). Largos (2+): more/most. Irregulares: good‚Üíbetter‚Üíbest, bad‚Üíworse‚Üíworst."}]}],ka={name:"Negative (Negation) - Negaci√≥n",description:'Las oraciones negativas en ingl√©s se forman agregando "not" despu√©s del auxiliar. Si no hay auxiliar, se agrega do/does/did + not.',example:"She doesn't like coffee. / They aren't coming. / He hasn't finished.",exampleEs:"A ella no le gusta el caf√©. / Ellos no vienen. / √âl no ha terminado.",structure:"Sujeto + auxiliar + not + verbo (don't/doesn't, isn't/aren't, hasn't/haven't, won't, can't...)",tip:`Identifica el auxiliar del tiempo verbal y agrega "not" despu√©s. Si no hay auxiliar (present/past simple), usa do/does/did + not. Las contracciones son muy comunes: don't, doesn't, didn't, isn't, aren't, hasn't, haven't, won't, can't, shouldn't, mustn't.`},L={"present simple":{name:"Negative: Present Simple - Negaci√≥n: Presente simple",description:"Se usa do not (don't) / does not (doesn't) + verbo en forma base.",structure:"Sujeto + don't/doesn't + verbo base",example:"I don't like fish. / She doesn't work on Sundays.",exampleEs:"No me gusta el pescado. / Ella no trabaja los domingos.",tip:`Usa "don't" para I/you/we/they y "doesn't" para he/she/it. El verbo principal va en forma base (sin -s): "She doesn't likes" es incorrecto.`},"present continuous":{name:"Negative: Present Continuous - Negaci√≥n: Presente continuo",description:'Se agrega "not" despu√©s de am/is/are.',structure:"Sujeto + am/is/are + not + verbo-ing",example:"I'm not sleeping. / They aren't listening.",exampleEs:"No estoy durmiendo. / Ellos no est√°n escuchando.",tip:`Contracciones: "isn't" (is not), "aren't" (are not). Para "I": siempre "I'm not" (nunca "I amn't").`},"going to":{name:'Negative: Going to (Future) - Negaci√≥n: Futuro con "ir a"',description:'Se agrega "not" despu√©s de am/is/are, antes de "going to".',structure:"Sujeto + am/is/are + not + going to + verbo base",example:"She isn't going to come. / We aren't going to wait.",exampleEs:"Ella no va a venir. / No vamos a esperar.",tip:'"Going to" no cambia ‚Äî solo agrega "not" despu√©s del auxiliar be.'},"simple past":{name:"Negative: Simple Past - Negaci√≥n: Pasado simple",description:"Se usa did not (didn't) + verbo en forma base.",structure:"Sujeto + didn't + verbo base",example:"I didn't go to the party. / She didn't eat breakfast.",exampleEs:"No fui a la fiesta. / Ella no desayun√≥.",tip:`Cuidado: el verbo NO va en pasado. "I didn't went" es incorrecto ‚Äî debe ser "I didn't go".`},imperative:{name:"Negative: Imperative - Negaci√≥n: Imperativo",description:`Se usa "Don't" + verbo base para dar √≥rdenes negativas.`,structure:"Don't + verbo base",example:"Don't touch that. / Don't be late. / Don't run in the hallway.",exampleEs:"No toques eso. / No llegues tarde. / No corras en el pasillo.",tip:`Siempre usa "Don't" (nunca "Not" solo). Para ser formal: "Do not open the door."`},"present perfect":{name:"Negative: Present Perfect - Negaci√≥n: Presente perfecto",description:'Se agrega "not" despu√©s de have/has.',structure:"Sujeto + have/has + not + participio pasado",example:"I haven't finished yet. / She hasn't called.",exampleEs:"No he terminado todav√≠a. / Ella no ha llamado.",tip:`Contracciones: "haven't" (have not), "hasn't" (has not). Suele aparecer con "yet" y "never".`},"present perfect continuous":{name:"Negative: Present Perfect Continuous - Negaci√≥n: Presente perfecto continuo",description:'Se agrega "not" despu√©s de have/has.',structure:"Sujeto + have/has + not + been + verbo-ing",example:"I haven't been sleeping well. / She hasn't been working lately.",exampleEs:"No he estado durmiendo bien. / Ella no ha estado trabajando √∫ltimamente.",tip:`Contracciones: "haven't been" / "hasn't been". Enfatiza que la acci√≥n continua NO ha estado ocurriendo.`},"past continuous":{name:"Negative: Past Continuous - Negaci√≥n: Pasado continuo",description:'Se agrega "not" despu√©s de was/were.',structure:"Sujeto + was/were + not + verbo-ing",example:"I wasn't paying attention. / They weren't playing.",exampleEs:"No estaba prestando atenci√≥n. / Ellos no estaban jugando.",tip:`Contracciones: "wasn't" (was not), "weren't" (were not).`},"will future":{name:'Negative: Will (Future) - Negaci√≥n: Futuro con "will"',description:'Se agrega "not" despu√©s de "will".',structure:"Sujeto + will + not + verbo base",example:"I won't forget. / They won't be late.",exampleEs:"No olvidar√©. / Ellos no llegar√°n tarde.",tip:`La contracci√≥n "won't" (will not) es mucho m√°s com√∫n que "will not" en lenguaje hablado.`},"first conditional":{name:"Negative: First Conditional - Negaci√≥n: Primer condicional",description:'Se puede negar la cl√°usula con "if", la cl√°usula con "will", o ambas.',structure:"If + sujeto + don't/doesn't + verbo, sujeto + won't + verbo",example:"If you don't study, you won't pass. / If it rains, we won't go.",exampleEs:"Si no estudias, no aprobar√°s. / Si llueve, no iremos.",tip:`La negaci√≥n puede estar en cualquiera de las dos cl√°usulas. En la cl√°usula "if" usa don't/doesn't; en la cl√°usula resultado usa won't.`},modals:{name:"Negative: Modals - Negaci√≥n: Verbos modales",description:'Se agrega "not" directamente despu√©s del modal.',structure:"Sujeto + modal + not + verbo base",example:"You shouldn't eat that. / She can't swim. / You mustn't run here.",exampleEs:"No deber√≠as comer eso. / Ella no sabe nadar. / No debes correr aqu√≠.",tip:`Contracciones: can't, couldn't, shouldn't, mustn't, won't. Cuidado: "can not" se escribe junto ‚Üí "cannot" o "can't".`},"second conditional":{name:"Negative: Second Conditional - Negaci√≥n: Segundo condicional",description:'Se puede negar la cl√°usula "if" o la cl√°usula con "would".',structure:"If + sujeto + didn't + verbo, sujeto + wouldn't + verbo base",example:"If I didn't have a car, I wouldn't go. / If she weren't so busy, she would help.",exampleEs:"Si no tuviera carro, no ir√≠a. / Si ella no estuviera tan ocupada, ayudar√≠a.",tip:`Usa "weren't" (no "wasn't") en lenguaje formal. La negaci√≥n puede ir en una o ambas cl√°usulas.`},"used to":{name:"Negative: Used to - Negaci√≥n: Sol√≠a",description:`Se usa "didn't use to" para negar h√°bitos pasados.`,structure:"Sujeto + didn't use to + verbo base",example:"I didn't use to like coffee. / She didn't use to exercise.",exampleEs:"No sol√≠a gustarme el caf√©. / Ella no sol√≠a hacer ejercicio.",tip:`Cuidado: es "didn't use to" (sin -d en "use"). Tambi√©n existe "never used to": "I never used to smoke."`},"comparatives and superlatives":{name:"Negative: Comparatives - Negaci√≥n: Comparativos",description:'Se niega el auxiliar o se usa "not as...as" para comparaciones de igualdad negadas.',structure:"Sujeto + be + not + as + adj + as / Sujeto + be + not + comparative + than",example:"This book is not as interesting as that one. / He isn't taller than his brother.",exampleEs:"Este libro no es tan interesante como ese. / √âl no es m√°s alto que su hermano.",tip:'"Not as...as" es la forma m√°s natural de negar una comparaci√≥n. "Less...than" tambi√©n funciona pero es menos com√∫n.'},"past perfect":{name:"Negative: Past Perfect - Negaci√≥n: Pasado perfecto",description:'Se agrega "not" despu√©s de "had".',structure:"Sujeto + had + not + participio pasado",example:"She hadn't eaten before the meeting. / They hadn't arrived yet.",exampleEs:"Ella no hab√≠a comido antes de la reuni√≥n. / Ellos no hab√≠an llegado todav√≠a.",tip:`Contracci√≥n: "hadn't" (had not). Suele aparecer con "yet", "never", "before".`},"third conditional":{name:"Negative: Third Conditional - Negaci√≥n: Tercer condicional",description:'Se puede negar la cl√°usula "if" o la cl√°usula resultado.',structure:"If + sujeto + hadn't + participio, sujeto + would/wouldn't + have + participio",example:"If I hadn't studied, I wouldn't have passed.",exampleEs:"Si no hubiera estudiado, no habr√≠a aprobado.",tip:`La negaci√≥n puede ir en una o ambas cl√°usulas. "Hadn't" en la condici√≥n, "wouldn't have" en el resultado.`},"passive voice":{name:"Negative: Passive Voice - Negaci√≥n: Voz pasiva",description:'Se agrega "not" despu√©s del auxiliar de la pasiva.',structure:"Sujeto + auxiliar + not + (been) + participio pasado",example:"The email wasn't sent. / The project hasn't been finished.",exampleEs:"El email no fue enviado. / El proyecto no ha sido terminado.",tip:`Agrega "not" despu√©s del primer auxiliar: "isn't cleaned", "wasn't sent", "hasn't been done", "won't be delivered".`},"reported speech":{name:"Negative: Reported Speech - Negaci√≥n: Discurso indirecto",description:'La negaci√≥n se reporta dentro de la cl√°usula subordinada o usando "not to" en comandos.',structure:"Sujeto + said/told + (that) + sujeto + auxiliar + not + verbo",example:"He said he didn't agree. / She told me not to worry.",exampleEs:"√âl dijo que no estaba de acuerdo. / Ella me dijo que no me preocupara.",tip:'Para comandos negativos: "told/asked + objeto + not to + verbo". Para afirmaciones: el "not" va dentro de la oraci√≥n reportada con su auxiliar.'},subjunctive:{name:"Negative: Subjunctive - Negaci√≥n: Subjuntivo",description:'Con "wish" se expresa deseo de que algo NO fuera as√≠. Con sugerencias se usa "not + verbo base".',structure:"I wish + sujeto + didn't + verbo / suggest + that + sujeto + not + verbo base",example:"I wish I didn't have to work. / He suggested that she not leave early.",exampleEs:"Desear√≠a no tener que trabajar. / √âl sugiri√≥ que ella no se fuera temprano.",tip:`Con "wish": usa didn't/weren't para el deseo negativo. Con "suggest/recommend": usa "not" antes del verbo base (sin auxiliar).`}};function un(s){const e=s.toLowerCase().trim();if(L[e])return L[e];for(const t of Object.keys(L))if(e.includes(t)||t.includes(e))return L[t];return e.includes("passive")?L["passive voice"]:e.includes("modal")?L.modals:ka}const Ea={name:"Interrogative (Questions) - Interrogativo (Preguntas)",description:"Las preguntas en ingl√©s se forman invirtiendo el orden del sujeto y el auxiliar. Si no hay auxiliar, se agrega do/does/did.",example:"Do you speak English? / Is she working? / Have they finished?",exampleEs:"¬øHablas ingl√©s? / ¬øEst√° ella trabajando? / ¬øHan terminado ellos?",structure:"Auxiliar + sujeto + verbo (Do you like...? / Is she...? / Can they...?)",tip:"Identifica el auxiliar del tiempo verbal (do/does, did, is/are, have/has, will, can...) y col√≥calo antes del sujeto. Para Wh-questions: What/Where/Why + auxiliar + sujeto + verbo."},U={"present simple":{name:"Questions: Present Simple - Preguntas: Presente simple",description:"Se usa do/does como auxiliar para formar preguntas en presente simple.",structure:"Do/Does + sujeto + verbo base",example:"Do you like coffee? / Does she work here?",exampleEs:"¬øTe gusta el caf√©? / ¬øElla trabaja aqu√≠?",tip:'Usa "do" para I/you/we/they y "does" para he/she/it. El verbo principal va en forma base (sin -s).'},"present continuous":{name:"Questions: Present Continuous - Preguntas: Presente continuo",description:"Se invierte el auxiliar am/is/are con el sujeto.",structure:"Am/Is/Are + sujeto + verbo-ing",example:"Are you studying? / Is he coming?",exampleEs:"¬øEst√°s estudiando? / ¬ø√âl viene?",tip:"El auxiliar ya existe en la oraci√≥n, solo hay que moverlo al inicio."},"going to":{name:'Questions: Going to (Future) - Preguntas: Futuro con "ir a"',description:'Se invierte am/is/are con el sujeto, manteniendo "going to".',structure:"Am/Is/Are + sujeto + going to + verbo base",example:"Are you going to travel? / Is she going to study?",exampleEs:"¬øVas a viajar? / ¬øElla va a estudiar?",tip:'No cambies "going to" ‚Äî solo mueve am/is/are al inicio.'},"simple past":{name:"Questions: Simple Past - Preguntas: Pasado simple",description:'Se usa "did" como auxiliar. El verbo principal vuelve a forma base.',structure:"Did + sujeto + verbo base",example:"Did you go? / Did she eat breakfast?",exampleEs:"¬øFuiste? / ¬øElla desayun√≥?",tip:'Cuidado: el verbo NO va en pasado. "Did you went" es incorrecto ‚Üí "Did you go".'},imperative:{name:"Questions: Imperative - Preguntas: Imperativo",description:"Los imperativos no forman preguntas directas, pero se pueden hacer peticiones corteses.",structure:"Can/Could/Would you + verbo base (petici√≥n cort√©s)",example:"Can you close the door? / Would you please sit down?",exampleEs:"¬øPuedes cerrar la puerta? / ¬øPodr√≠as sentarte por favor?",tip:'Los imperativos puros no son preguntas. Para pedir algo como pregunta, usa modales: "Could you help me?"'},"present perfect":{name:"Questions: Present Perfect - Preguntas: Presente perfecto",description:"Se invierte have/has con el sujeto.",structure:"Have/Has + sujeto + participio pasado",example:"Have you finished? / Has she ever been to Paris?",exampleEs:"¬øHas terminado? / ¬øElla ha estado alguna vez en Par√≠s?",tip:'Usa "ever" para preguntar sobre experiencias: "Have you ever tried sushi?"'},"present perfect continuous":{name:"Questions: Present Perfect Continuous - Preguntas: Presente perfecto continuo",description:"Se invierte have/has con el sujeto.",structure:"Have/Has + sujeto + been + verbo-ing",example:"Have you been waiting long? / Has she been studying all day?",exampleEs:"¬øHas estado esperando mucho? / ¬øElla ha estado estudiando todo el d√≠a?",tip:'Pregunta sobre la duraci√≥n de una acci√≥n que empez√≥ en el pasado. Suele usar "how long": "How long have you been working here?"'},"past continuous":{name:"Questions: Past Continuous - Preguntas: Pasado continuo",description:"Se invierte was/were con el sujeto.",structure:"Was/Were + sujeto + verbo-ing",example:"Were you sleeping? / Was she working at 8?",exampleEs:"¬øEstabas durmiendo? / ¬øElla estaba trabajando a las 8?",tip:'Usa "was" para I/he/she/it y "were" para you/we/they.'},"will future":{name:'Questions: Will (Future) - Preguntas: Futuro con "will"',description:'Se invierte "will" con el sujeto.',structure:"Will + sujeto + verbo base",example:"Will you come? / Will they help us?",exampleEs:"¬øVendr√°s? / ¬øNos ayudar√°n?",tip:`"Will" es igual para todas las personas. En forma corta negativa: "Won't you come?"`},"first conditional":{name:"Questions: First Conditional - Preguntas: Primer condicional",description:'La pregunta se forma en la cl√°usula con "will", no en la de "if".',structure:"Will + sujeto + verbo base + if + present simple",example:"Will you go if it stops raining? / What will happen if we are late?",exampleEs:"¬øIr√°s si deja de llover? / ¬øQu√© pasar√° si llegamos tarde?",tip:'Tambi√©n se puede preguntar con "if" al inicio: "If it rains, will you stay home?"'},modals:{name:"Questions: Modals - Preguntas: Verbos modales",description:"Se invierte el modal (can, should, must, etc.) con el sujeto.",structure:"Modal + sujeto + verbo base",example:"Can you swim? / Should we leave? / Must I finish today?",exampleEs:"¬øSabes nadar? / ¬øDeber√≠amos irnos? / ¬øDebo terminar hoy?",tip:"Los modales funcionan como auxiliares ‚Äî solo mu√©velos al inicio de la oraci√≥n."},"second conditional":{name:"Questions: Second Conditional - Preguntas: Segundo condicional",description:'Se invierte "would" con el sujeto en la cl√°usula principal.',structure:"Would + sujeto + verbo base + if + past simple",example:"Would you move if you got a better job? / What would you do if you won the lottery?",exampleEs:"¬øTe mudar√≠as si consiguieras un mejor trabajo? / ¬øQu√© har√≠as si ganaras la loter√≠a?",tip:'Pregunta sobre situaciones hipot√©ticas. La cl√°usula con "if" no cambia.'},"used to":{name:"Questions: Used to - Preguntas: Sol√≠a",description:'Se usa "Did + sujeto + use to" para preguntar sobre h√°bitos pasados.',structure:"Did + sujeto + use to + verbo base",example:"Did you use to play sports? / Did she use to live here?",exampleEs:"¬øSol√≠as practicar deportes? / ¬øElla sol√≠a vivir aqu√≠?",tip:`Es "Did you use to" (sin -d en "use"). Respuesta: "Yes, I used to" / "No, I didn't use to".`},"comparatives and superlatives":{name:"Questions: Comparatives - Preguntas: Comparativos",description:"Se invierte el auxiliar con el sujeto, manteniendo la estructura comparativa.",structure:"Be + sujeto + comparative + than / Which is the + superlative",example:"Is this book more interesting than that one? / Which is the tallest building in the city?",exampleEs:"¬øEste libro es m√°s interesante que ese? / ¬øCu√°l es el edificio m√°s alto de la ciudad?",tip:'Para comparar usa "which" o "who": "Who is taller, John or Mike?". Para superlativos: "What is the best restaurant here?"'},"past perfect":{name:"Questions: Past Perfect - Preguntas: Pasado perfecto",description:'Se invierte "had" con el sujeto.',structure:"Had + sujeto + participio pasado",example:"Had you eaten before? / Had she already left?",exampleEs:"¬øHab√≠as comido antes? / ¬øElla ya se hab√≠a ido?",tip:'"Had" es igual para todas las personas. Suele aparecer con "already", "ever", "before".'},"passive voice":{name:"Questions: Passive Voice - Preguntas: Voz pasiva",description:"Se invierte el auxiliar de la pasiva (is/was/have been/will be) con el sujeto.",structure:"Auxiliar + sujeto + participio pasado",example:"Was the letter sent? / Has the project been finished?",exampleEs:"¬øFue enviada la carta? / ¬øHa sido terminado el proyecto?",tip:"Identifica el auxiliar de la voz pasiva y mu√©velo al inicio."},"reported speech":{name:"Questions: Reported Speech - Preguntas: Discurso indirecto",description:"Las preguntas reportadas pierden la inversi√≥n y usan orden de afirmaci√≥n.",structure:"Sujeto + asked/wanted to know + if/wh- + orden normal",example:"She asked if I was coming. / He wanted to know where I lived.",exampleEs:"Ella pregunt√≥ si yo iba. / √âl quer√≠a saber d√≥nde viv√≠a yo.",tip:'Las yes/no questions usan "if/whether". Las wh-questions mantienen la palabra interrogativa pero sin inversi√≥n.'},subjunctive:{name:"Questions: Subjunctive - Preguntas: Subjuntivo",description:"Preguntas con deseos o sugerencias hipot√©ticas.",structure:"Do you wish + past simple / Should + sujeto + verbo base",example:"Do you wish you were taller? / Should he study harder?",exampleEs:"¬øDesear√≠as ser m√°s alto? / ¬øDeber√≠a √©l estudiar m√°s?",tip:'Con "wish" se pregunta sobre deseos. Con "should" se pide consejo o sugerencia.'},"third conditional":{name:"Questions: Third Conditional - Preguntas: Tercer condicional",description:'Se invierte "would" con el sujeto en la cl√°usula principal.',structure:"Would + sujeto + have + participio + if + past perfect",example:"Would you have gone if she had invited you?",exampleEs:"¬øHabr√≠as ido si ella te hubiera invitado?",tip:'Pregunta sobre situaciones hipot√©ticas del pasado. La cl√°usula con "if" no cambia.'}};function dn(s){const e=s.toLowerCase().trim();if(U[e])return U[e];for(const t of Object.keys(U))if(e.includes(t)||t.includes(e))return U[t];return e.includes("passive")?U["passive voice"]:e.includes("modal")?U.modals:Ea}at.push({level:"Negaci√≥n",tenses:[ka,L["present simple"],L["present continuous"],L["going to"],L["simple past"],L.imperative,L["present perfect"],L["present perfect continuous"],L["past continuous"],L["will future"],L["first conditional"],L["second conditional"],L.modals,L["used to"],L["past perfect"],L["third conditional"],L["passive voice"],L["reported speech"],L.subjunctive,L["comparatives and superlatives"]]});at.push({level:"Preguntas",tenses:[Ea,U["present simple"],U["present continuous"],U["going to"],U["simple past"],U.imperative,U["present perfect"],U["present perfect continuous"],U["past continuous"],U["will future"],U["first conditional"],U["second conditional"],U.modals,U["used to"],U["past perfect"],U["third conditional"],U["passive voice"],U["reported speech"],U.subjunctive,U["comparatives and superlatives"]]});at.push(cn);function pn(s){const e=s.toLowerCase().trim();for(const o of at)for(const i of o.tenses)if(i.name.split(" - ")[0].toLowerCase().trim()===e)return i;let t=e.replace(/\([^)]*\)/g,"").replace(/[-‚Äì,]/g," ").trim();t.includes("passive")&&!t.includes("voice")&&(t=t.replace("passive","passive voice")),t.includes("future")&&!t.includes("will")&&(t+=" will");const a=new Set(t.split(/\s+/).filter(Boolean));let r=null,n=0;for(const o of at)for(const i of o.tenses){const m=i.name.split(" - ")[0].toLowerCase().replace(/\([^)]*\)/g,"").replace(/[-‚Äì,:]/g," ").split(/\s+/).filter(Boolean);m.every(v=>a.has(v))&&m.length>n&&(r=i,n=m.length)}return r}var hn=I('<p class="spanish-sentence svelte-n845i0"> </p>'),mn=mr('<svg class="info-icon svelte-n845i0" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>'),fn=I('<button class="tag negative clickable svelte-n845i0">negativo <svg class="info-icon svelte-n845i0" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg></button>'),gn=I('<button class="tag question clickable svelte-n845i0">pregunta <svg class="info-icon svelte-n845i0" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg></button>'),vn=I('<div class="tense-popup svelte-n845i0"><p class="popup-title svelte-n845i0"> </p> <p class="popup-desc svelte-n845i0"> </p> <div class="popup-detail svelte-n845i0"><span class="popup-label svelte-n845i0">Estructura</span> <p class="popup-text svelte-n845i0"> </p></div> <div class="popup-detail example svelte-n845i0"><span class="popup-label svelte-n845i0">Ejemplo</span> <p class="popup-text svelte-n845i0"> </p> <p class="popup-text-es svelte-n845i0"> </p></div> <div class="popup-detail tip svelte-n845i0"><span class="popup-label svelte-n845i0">Tip</span> <p class="popup-text svelte-n845i0"> </p></div></div>'),bn=I('<div class="tense-popup question-popup svelte-n845i0"><p class="popup-title svelte-n845i0"> </p> <p class="popup-desc svelte-n845i0"> </p> <div class="popup-detail svelte-n845i0"><span class="popup-label svelte-n845i0">Estructura</span> <p class="popup-text svelte-n845i0"> </p></div> <div class="popup-detail example svelte-n845i0"><span class="popup-label svelte-n845i0">Ejemplo</span> <p class="popup-text svelte-n845i0"> </p> <p class="popup-text-es svelte-n845i0"> </p></div> <div class="popup-detail tip svelte-n845i0"><span class="popup-label svelte-n845i0">Tip</span> <p class="popup-text svelte-n845i0"> </p></div></div>'),yn=I('<div class="tense-popup negative-popup svelte-n845i0"><p class="popup-title svelte-n845i0"> </p> <p class="popup-desc svelte-n845i0"> </p> <div class="popup-detail svelte-n845i0"><span class="popup-label svelte-n845i0">Estructura</span> <p class="popup-text svelte-n845i0"> </p></div> <div class="popup-detail example svelte-n845i0"><span class="popup-label svelte-n845i0">Ejemplo</span> <p class="popup-text svelte-n845i0"> </p> <p class="popup-text-es svelte-n845i0"> </p></div> <div class="popup-detail tip svelte-n845i0"><span class="popup-label svelte-n845i0">Tip</span> <p class="popup-text svelte-n845i0"> </p></div></div>'),wn=I('<div class="prompt-display svelte-n845i0"><div class="hints"><p class="hint-label svelte-n845i0">Pistas</p> <p class="hint-text svelte-n845i0"> </p> <!></div> <div class="meta svelte-n845i0"><button> <!></button> <!> <!></div> <!> <!> <!></div>');function _n(s,e){Pe(e,!0);let t=B(!1),a=B(!1),r=B(!1);const n=me(()=>pn(e.metadata.tense)),o=me(()=>dn(e.metadata.tense)),i=me(()=>un(e.metadata.tense));function c(){l(n)&&k(t,!l(t)),k(a,!1),k(r,!1)}function m(){k(a,!l(a)),k(t,!1),k(r,!1)}function v(){k(r,!l(r)),k(t,!1),k(a,!1)}var _=wn(),b=p(_),f=g(p(b),2),S=p(f,!0);d(f);var T=g(f,2);{var h=j=>{var C=hn(),O=p(C,!0);d(C),V(()=>E(O,e.spanishSentence)),P(j,C)};$(T,j=>{e.spanishSentence&&j(h)})}d(b);var y=g(b,2),w=p(y);let M;w.__click=c;var A=p(w),W=g(A);{var N=j=>{var C=mn();P(j,C)};$(W,j=>{l(n)&&j(N)})}d(w);var q=g(w,2);{var H=j=>{var C=fn();C.__click=v,P(j,C)};$(q,j=>{e.metadata.isNegative&&j(H)})}var Q=g(q,2);{var D=j=>{var C=gn();C.__click=m,P(j,C)};$(Q,j=>{e.metadata.isQuestion&&j(D)})}d(y);var Y=g(y,2);{var K=j=>{var C=vn(),O=p(C),oe=p(O,!0);d(O);var X=g(O,2),xe=p(X,!0);d(X);var Z=g(X,2),fe=g(p(Z),2),Le=p(fe,!0);d(fe),d(Z);var ee=g(Z,2),te=g(p(ee),2),ie=p(te,!0);d(te);var ue=g(te,2),Ve=p(ue,!0);d(ue),d(ee);var de=g(ee,2),Se=g(p(de),2),rt=p(Se,!0);d(Se),d(de),d(C),V(()=>{E(oe,l(n).name),E(xe,l(n).description),E(Le,l(n).structure),E(ie,l(n).example),E(Ve,l(n).exampleEs),E(rt,l(n).tip)}),P(j,C)};$(Y,j=>{l(t)&&l(n)&&j(K)})}var ae=g(Y,2);{var Ie=j=>{var C=bn(),O=p(C),oe=p(O,!0);d(O);var X=g(O,2),xe=p(X,!0);d(X);var Z=g(X,2),fe=g(p(Z),2),Le=p(fe,!0);d(fe),d(Z);var ee=g(Z,2),te=g(p(ee),2),ie=p(te,!0);d(te);var ue=g(te,2),Ve=p(ue,!0);d(ue),d(ee);var de=g(ee,2),Se=g(p(de),2),rt=p(Se,!0);d(Se),d(de),d(C),V(()=>{E(oe,l(o).name),E(xe,l(o).description),E(Le,l(o).structure),E(ie,l(o).example),E(Ve,l(o).exampleEs),E(rt,l(o).tip)}),P(j,C)};$(ae,j=>{l(a)&&j(Ie)})}var re=g(ae,2);{var F=j=>{var C=yn(),O=p(C),oe=p(O,!0);d(O);var X=g(O,2),xe=p(X,!0);d(X);var Z=g(X,2),fe=g(p(Z),2),Le=p(fe,!0);d(fe),d(Z);var ee=g(Z,2),te=g(p(ee),2),ie=p(te,!0);d(te);var ue=g(te,2),Ve=p(ue,!0);d(ue),d(ee);var de=g(ee,2),Se=g(p(de),2),rt=p(Se,!0);d(Se),d(de),d(C),V(()=>{E(oe,l(i).name),E(xe,l(i).description),E(Le,l(i).structure),E(ie,l(i).example),E(Ve,l(i).exampleEs),E(rt,l(i).tip)}),P(j,C)};$(re,j=>{l(r)&&j(F)})}d(_),V(()=>{E(S,e.hintDisplay),M=kt(w,1,"tag tense-tag svelte-n845i0",null,M,{clickable:!!l(n)}),E(A,`${e.metadata.tense??""} `)}),P(s,_),je()}De(["click"]);function xn(s){if(typeof speechSynthesis>"u")return;speechSynthesis.cancel();const e=new SpeechSynthesisUtterance(s);e.lang="en-US",e.rate=.9,speechSynthesis.speak(e)}function ks(s){if(typeof speechSynthesis>"u")return;speechSynthesis.cancel();const e=new SpeechSynthesisUtterance(s);e.lang="en-US",e.rate=.85,speechSynthesis.speak(e)}var Sn=I('<div class="tooltip svelte-pj5bsu"> </div>'),kn=I('<div class="word-card-wrapper svelte-pj5bsu"><!> <button> </button></div>');function Ta(s,e){Pe(e,!0);let t=Hr(e,"variant",3,"pool"),a=B(!1),r=null,n=!1;function o(){n=!1,r=setTimeout(()=>{e.translation&&(k(a,!0),n=!0)},500)}function i(){r&&(clearTimeout(r),r=null),l(a)&&setTimeout(()=>{k(a,!1)},1200),n&&(n=!1)}function c(){n||(e.onclick(),xn(e.text)),n=!1}var m=kn(),v=p(m);{var _=S=>{var T=Sn(),h=p(T,!0);d(T),V(()=>E(h,e.translation)),P(S,T)};$(v,S=>{l(a)&&e.translation&&S(_)})}var b=g(v,2);b.__click=c,b.__pointerdown=o,b.__pointerup=i,b.__contextmenu=S=>S.preventDefault();var f=p(b,!0);d(b),d(m),V(()=>{kt(b,1,`word-card ${t()??""}`,"svelte-pj5bsu"),E(f,e.text)}),xa("pointerleave",b,i),P(s,m),je()}De(["click","pointerdown","pointerup","contextmenu"]);var En=I('<p class="placeholder svelte-1d0eofs">Toca las palabras para armar la frase...</p>'),Tn=I('<div class="sentence-area svelte-1d0eofs"><p class="label svelte-1d0eofs">Tu frase</p> <div class="sentence-box svelte-1d0eofs"><!> <!></div></div>');function Pn(s,e){Pe(e,!0);var t=Tn(),a=g(p(t),2),r=p(a);be(r,17,()=>e.cards,i=>i.id,(i,c)=>{Ta(i,{get text(){return l(c).text},onclick:()=>e.ondeselect(l(c).id),variant:"sentence",get translation(){return l(c).translation}})});var n=g(r,2);{var o=i=>{var c=En();P(i,c)};$(n,i=>{e.cards.length===0&&i(o)})}d(a),d(t),P(s,t),je()}var jn=I('<p class="empty svelte-ymehbo">Todas las palabras fueron usadas</p>'),In=I('<div class="card-pool svelte-ymehbo"><p class="label svelte-ymehbo">Palabras disponibles</p> <div class="cards svelte-ymehbo"><!> <!></div></div>');function Rn(s,e){Pe(e,!0);var t=In(),a=g(p(t),2),r=p(a);be(r,17,()=>e.cards,i=>i.id,(i,c)=>{Ta(i,{get text(){return l(c).text},onclick:()=>e.onselect(l(c).id),variant:"pool",get translation(){return l(c).translation}})});var n=g(r,2);{var o=i=>{var c=jn();P(i,c)};$(n,i=>{e.cards.length===0&&i(o)})}d(a),d(t),P(s,t),je()}var Nn=I('<div class="correct-answer svelte-p7nz7"><p class="correct-label svelte-p7nz7">Respuesta correcta:</p> <div class="correct-text-row svelte-p7nz7"><p class="correct-text svelte-p7nz7"> </p> <button class="speak-btn svelte-p7nz7" aria-label="Escuchar pronunciaci√≥n">üîä</button></div></div>'),Mn=I('<div class="speak-row svelte-p7nz7"><button class="speak-btn svelte-p7nz7" aria-label="Escuchar pronunciaci√≥n">üîä Escuchar</button></div>'),Cn=I('<div><div class="result-icon svelte-p7nz7"> </div> <p class="result-label svelte-p7nz7"> </p> <p class="feedback svelte-p7nz7"> </p> <!> <div class="grammar-note svelte-p7nz7"><p class="note-label svelte-p7nz7">Nota gramatical</p> <p class="note-text svelte-p7nz7"> </p></div> <button class="next-btn svelte-p7nz7">Siguiente</button></div>');function An(s,e){Pe(e,!0);var t=Cn(),a=p(t),r=p(a,!0);d(a);var n=g(a,2),o=p(n,!0);d(n);var i=g(n,2),c=p(i,!0);d(i);var m=g(i,2);{var v=h=>{var y=Nn(),w=g(p(y),2),M=p(w),A=p(M,!0);d(M);var W=g(M,2);W.__click=()=>ks(e.correctSentence),d(w),d(y),V(()=>E(A,e.result.correctSentence)),P(h,y)},_=h=>{var y=Mn(),w=p(y);w.__click=()=>ks(e.userSentence),d(y),P(h,y)};$(m,h=>{e.result.isCorrect?h(_,!1):h(v)})}var b=g(m,2),f=g(p(b),2),S=p(f,!0);d(f),d(b);var T=g(b,2);T.__click=function(...h){e.onnext?.apply(this,h)},d(t),V(()=>{kt(t,1,`feedback-panel ${e.result.isCorrect?"correct":"incorrect"}`,"svelte-p7nz7"),E(r,e.result.isCorrect?"‚úì":"‚úó"),E(o,e.result.isCorrect?"¬°Correcto!":"Incorrecto"),E(c,e.result.feedback),E(S,e.result.grammarNote)}),P(s,t),je()}De(["click"]);var qn=I('<div class="score-bar svelte-1szkqx"><button class="back-btn svelte-1szkqx" aria-label="Volver al inicio"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg></button> <div class="stat svelte-1szkqx"><span class="stat-value svelte-1szkqx"> </span> <span class="stat-label svelte-1szkqx">Ronda</span></div> <div class="stat svelte-1szkqx"><span class="stat-value svelte-1szkqx"> </span> <span class="stat-label svelte-1szkqx">Aciertos</span></div> <div class="stat svelte-1szkqx"><span class="stat-value svelte-1szkqx"> </span> <span class="stat-label svelte-1szkqx">Racha</span></div> <div class="stat svelte-1szkqx"><span class="stat-value svelte-1szkqx"> </span> <span class="stat-label svelte-1szkqx">Mejor</span></div></div>');function Dn(s,e){Pe(e,!0);var t=qn(),a=p(t);a.__click=function(...h){e.onback?.apply(this,h)};var r=g(a,2),n=p(r),o=p(n,!0);d(n),qe(2),d(r);var i=g(r,2),c=p(i),m=p(c);d(c),qe(2),d(i);var v=g(i,2),_=p(v),b=p(_,!0);d(_),qe(2),d(v);var f=g(v,2),S=p(f),T=p(S,!0);d(S),qe(2),d(f),d(t),V(()=>{E(o,e.session.currentRound),E(m,`${e.session.totalCorrect??""}/${e.session.totalAttempted??""}`),E(b,e.session.streak),E(T,e.session.bestStreak)}),P(s,t),je()}De(["click"]);let As=B(""),Pa=B("beginner"),ja=B("random"),Ia=B(void 0),Ra=B(!1),qs=B("setup"),He=B(null),we=B(Cs([])),Tt=B(null),Pt=B(null),Zt=B(Cs([])),ge=B(Cs({currentRound:0,totalCorrect:0,totalAttempted:0,streak:0,bestStreak:0}));function Qs(){return l(As)}function On(){return l(Pa)}function Ln(){return l(ja)}function Un(){return l(Ia)}function zn(){return l(Ra)}function Na(){return l(qs)}function Wn(){return l(He)}function Bn(){return l(Tt)}function Hn(){return l(Pt)}function Vn(){return l(Zt)}function Fn(){return l(ge)}function $n(s){k(As,s,!0),localStorage.setItem("grammar_game_api_key",s)}function Jn(){const s=localStorage.getItem("grammar_game_api_key");return s&&k(As,s,!0),!!s}function Qn(s){k(Pa,s,!0)}function Xn(s){k(ja,s,!0)}function Gn(s){k(Ia,s,!0)}function Yn(s){k(Ra,s,!0)}function Ee(s){k(qs,s,!0)}function Ma(s){k(He,s,!0),k(we,[],!0),k(Tt,null),k(Pt,null),k(Zt,[...l(Zt).slice(-9),s.correctSentence],!0)}function Kn(s){k(Tt,s,!0),l(ge).totalAttempted++,s.isCorrect?(l(ge).totalCorrect++,l(ge).streak++,l(ge).streak>l(ge).bestStreak&&(l(ge).bestStreak=l(ge).streak)):l(ge).streak=0}function _t(s){k(Pt,s,!0)}function Zn(s){l(we).includes(s)||k(we,[...l(we),s],!0)}function eo(s){k(we,l(we).filter(e=>e!==s),!0)}function to(){k(we,[],!0)}function so(){return l(He)?l(He).cards.filter(s=>!l(we).includes(s.id)):[]}function Ca(){return l(He)?l(we).map(s=>l(He).cards.find(e=>e.id===s)).filter(s=>s!==void 0):[]}function ao(){return Ca().map(s=>s.text).join(" ")}function Aa(){l(ge).currentRound++,k(He,null),k(we,[],!0),k(Tt,null),k(Pt,null)}function Xs(){k(qs,"setup"),k(He,null),k(we,[],!0),k(Tt,null),k(Pt,null),k(Zt,[],!0),k(ge,{currentRound:0,totalCorrect:0,totalAttempted:0,streak:0,bestStreak:0},!0)}function x(s,e,t,a,r){if(typeof e=="function"?s!==e||!0:!e.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(s,t),t}function u(s,e,t,a){if(t==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?s!==e||!a:!e.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?a:t==="a"?a.call(s):a?a.value:e.get(s)}let qa=function(){const{crypto:s}=globalThis;if(s?.randomUUID)return qa=s.randomUUID.bind(s),s.randomUUID();const e=new Uint8Array(1),t=s?()=>s.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,a=>(+a^t()&15>>+a/4).toString(16))};function Et(s){return typeof s=="object"&&s!==null&&("name"in s&&s.name==="AbortError"||"message"in s&&String(s.message).includes("FetchRequestCanceledException"))}const Es=s=>{if(s instanceof Error)return s;if(typeof s=="object"&&s!==null){try{if(Object.prototype.toString.call(s)==="[object Error]"){const e=new Error(s.message,s.cause?{cause:s.cause}:{});return s.stack&&(e.stack=s.stack),s.cause&&!e.cause&&(e.cause=s.cause),s.name&&(e.name=s.name),e}}catch{}try{return new Error(JSON.stringify(s))}catch{}}return new Error(s)};class R extends Error{}class G extends R{constructor(e,t,a,r){super(`${G.makeMessage(e,t,a)}`),this.status=e,this.headers=r,this.requestID=r?.get("request-id"),this.error=t}static makeMessage(e,t,a){const r=t?.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):a;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,a,r){if(!e||!r)return new as({message:a,cause:Es(t)});const n=t;return e===400?new Oa(e,n,a,r):e===401?new La(e,n,a,r):e===403?new Ua(e,n,a,r):e===404?new za(e,n,a,r):e===409?new Wa(e,n,a,r):e===422?new Ba(e,n,a,r):e===429?new Ha(e,n,a,r):e>=500?new Va(e,n,a,r):new G(e,n,a,r)}}class ye extends G{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class as extends G{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class Da extends as{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Oa extends G{}class La extends G{}class Ua extends G{}class za extends G{}class Wa extends G{}class Ba extends G{}class Ha extends G{}class Va extends G{}const ro=/^[a-z][a-z0-9+.-]*:/i,no=s=>ro.test(s);let Ts=s=>(Ts=Array.isArray,Ts(s)),Gs=Ts;function Ys(s){return typeof s!="object"?{}:s??{}}function oo(s){if(!s)return!0;for(const e in s)return!1;return!0}function io(s,e){return Object.prototype.hasOwnProperty.call(s,e)}const lo=(s,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new R(`${s} must be an integer`);if(e<0)throw new R(`${s} must be a positive integer`);return e},Fa=s=>{try{return JSON.parse(s)}catch{return}},co=s=>new Promise(e=>setTimeout(e,s)),et="0.65.0",uo=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function po(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const ho=()=>{const s=po();if(s==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":et,"X-Stainless-OS":Zs(Deno.build.os),"X-Stainless-Arch":Ks(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":et,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(s==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":et,"X-Stainless-OS":Zs(globalThis.process.platform??"unknown"),"X-Stainless-Arch":Ks(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=mo();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":et,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":et,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function mo(){if(typeof navigator>"u"||!navigator)return null;const s=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of s){const a=t.exec(navigator.userAgent);if(a){const r=a[1]||0,n=a[2]||0,o=a[3]||0;return{browser:e,version:`${r}.${n}.${o}`}}}return null}const Ks=s=>s==="x32"?"x32":s==="x86_64"||s==="x64"?"x64":s==="arm"?"arm":s==="aarch64"||s==="arm64"?"arm64":s?`other:${s}`:"unknown",Zs=s=>(s=s.toLowerCase(),s.includes("ios")?"iOS":s==="android"?"Android":s==="darwin"?"MacOS":s==="win32"?"Windows":s==="freebsd"?"FreeBSD":s==="openbsd"?"OpenBSD":s==="linux"?"Linux":s?`Other:${s}`:"Unknown");let ea;const fo=()=>ea??(ea=ho());function go(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new Anthropic({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function $a(...s){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...s)}function Ja(s){let e=Symbol.asyncIterator in s?s[Symbol.asyncIterator]():s[Symbol.iterator]();return $a({start(){},async pull(t){const{done:a,value:r}=await e.next();a?t.close():t.enqueue(r)},async cancel(){await e.return?.()}})}function Ds(s){if(s[Symbol.asyncIterator])return s;const e=s.getReader();return{async next(){try{const t=await e.read();return t?.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function vo(s){if(s===null||typeof s!="object")return;if(s[Symbol.asyncIterator]){await s[Symbol.asyncIterator]().return?.();return}const e=s.getReader(),t=e.cancel();e.releaseLock(),await t}const bo=({headers:s,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});function yo(s){let e=0;for(const r of s)e+=r.length;const t=new Uint8Array(e);let a=0;for(const r of s)t.set(r,a),a+=r.length;return t}let ta;function Os(s){let e;return(ta??(e=new globalThis.TextEncoder,ta=e.encode.bind(e)))(s)}let sa;function aa(s){let e;return(sa??(e=new globalThis.TextDecoder,sa=e.decode.bind(e)))(s)}var le,ce;class jt{constructor(){le.set(this,void 0),ce.set(this,void 0),x(this,le,new Uint8Array),x(this,ce,null)}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Os(e):e;x(this,le,yo([u(this,le,"f"),t]));const a=[];let r;for(;(r=wo(u(this,le,"f"),u(this,ce,"f")))!=null;){if(r.carriage&&u(this,ce,"f")==null){x(this,ce,r.index);continue}if(u(this,ce,"f")!=null&&(r.index!==u(this,ce,"f")+1||r.carriage)){a.push(aa(u(this,le,"f").subarray(0,u(this,ce,"f")-1))),x(this,le,u(this,le,"f").subarray(u(this,ce,"f"))),x(this,ce,null);continue}const n=u(this,ce,"f")!==null?r.preceding-1:r.preceding,o=aa(u(this,le,"f").subarray(0,n));a.push(o),x(this,le,u(this,le,"f").subarray(r.index)),x(this,ce,null)}return a}flush(){return u(this,le,"f").length?this.decode(`
`):[]}}le=new WeakMap,ce=new WeakMap;jt.NEWLINE_CHARS=new Set([`
`,"\r"]);jt.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function wo(s,e){for(let r=e??0;r<s.length;r++){if(s[r]===10)return{preceding:r,index:r+1,carriage:!1};if(s[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function _o(s){for(let a=0;a<s.length-1;a++){if(s[a]===10&&s[a+1]===10||s[a]===13&&s[a+1]===13)return a+2;if(s[a]===13&&s[a+1]===10&&a+3<s.length&&s[a+2]===13&&s[a+3]===10)return a+4}return-1}const es={off:0,error:200,warn:300,info:400,debug:500},ra=(s,e,t)=>{if(s){if(io(es,s))return s;se(t).warn(`${e} was set to ${JSON.stringify(s)}, expected one of ${JSON.stringify(Object.keys(es))}`)}};function xt(){}function Ct(s,e,t){return!e||es[s]>es[t]?xt:e[s].bind(e)}const xo={error:xt,warn:xt,info:xt,debug:xt};let na=new WeakMap;function se(s){const e=s.logger,t=s.logLevel??"off";if(!e)return xo;const a=na.get(e);if(a&&a[0]===t)return a[1];const r={error:Ct("error",e,t),warn:Ct("warn",e,t),info:Ct("info",e,t),debug:Ct("debug",e,t)};return na.set(e,[t,r]),r}const Je=s=>(s.options&&(s.options={...s.options},delete s.options.headers),s.headers&&(s.headers=Object.fromEntries((s.headers instanceof Headers?[...s.headers]:Object.entries(s.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in s&&(s.retryOfRequestLogID&&(s.retryOf=s.retryOfRequestLogID),delete s.retryOfRequestLogID),s);var ot;class Te{constructor(e,t,a){this.iterator=e,ot.set(this,void 0),this.controller=t,x(this,ot,a)}static fromSSEResponse(e,t,a){let r=!1;const n=a?se(a):console;async function*o(){if(r)throw new R("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let i=!1;try{for await(const c of So(e,t)){if(c.event==="completion")try{yield JSON.parse(c.data)}catch(m){throw n.error("Could not parse message into JSON:",c.data),n.error("From chunk:",c.raw),m}if(c.event==="message_start"||c.event==="message_delta"||c.event==="message_stop"||c.event==="content_block_start"||c.event==="content_block_delta"||c.event==="content_block_stop")try{yield JSON.parse(c.data)}catch(m){throw n.error("Could not parse message into JSON:",c.data),n.error("From chunk:",c.raw),m}if(c.event!=="ping"&&c.event==="error")throw new G(void 0,Fa(c.data)??c.data,void 0,e.headers)}i=!0}catch(c){if(Et(c))return;throw c}finally{i||t.abort()}}return new Te(o,t,a)}static fromReadableStream(e,t,a){let r=!1;async function*n(){const i=new jt,c=Ds(e);for await(const m of c)for(const v of i.decode(m))yield v;for(const m of i.flush())yield m}async function*o(){if(r)throw new R("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let i=!1;try{for await(const c of n())i||c&&(yield JSON.parse(c));i=!0}catch(c){if(Et(c))return;throw c}finally{i||t.abort()}}return new Te(o,t,a)}[(ot=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],t=[],a=this.iterator(),r=n=>({next:()=>{if(n.length===0){const o=a.next();e.push(o),t.push(o)}return n.shift()}});return[new Te(()=>r(e),this.controller,u(this,ot,"f")),new Te(()=>r(t),this.controller,u(this,ot,"f"))]}toReadableStream(){const e=this;let t;return $a({async start(){t=e[Symbol.asyncIterator]()},async pull(a){try{const{value:r,done:n}=await t.next();if(n)return a.close();const o=Os(JSON.stringify(r)+`
`);a.enqueue(o)}catch(r){a.error(r)}},async cancel(){await t.return?.()}})}}async function*So(s,e){if(!s.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new R("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new R("Attempted to iterate over a response with no body");const t=new Eo,a=new jt,r=Ds(s.body);for await(const n of ko(r))for(const o of a.decode(n)){const i=t.decode(o);i&&(yield i)}for(const n of a.flush()){const o=t.decode(n);o&&(yield o)}}async function*ko(s){let e=new Uint8Array;for await(const t of s){if(t==null)continue;const a=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?Os(t):t;let r=new Uint8Array(e.length+a.length);r.set(e),r.set(a,e.length),e=r;let n;for(;(n=_o(e))!==-1;)yield e.slice(0,n),e=e.slice(n)}e.length>0&&(yield e)}class Eo{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const n={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],n}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,a,r]=To(e,":");return r.startsWith(" ")&&(r=r.substring(1)),t==="event"?this.event=r:t==="data"&&this.data.push(r),null}}function To(s,e){const t=s.indexOf(e);return t!==-1?[s.substring(0,t),e,s.substring(t+e.length)]:[s,"",""]}async function Qa(s,e){const{response:t,requestLogID:a,retryOfRequestLogID:r,startTime:n}=e,o=await(async()=>{if(e.options.stream)return se(s).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller):Te.fromSSEResponse(t,e.controller);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const c=t.headers.get("content-type")?.split(";")[0]?.trim();if(c?.includes("application/json")||c?.endsWith("+json")){const _=await t.json();return Xa(_,t)}return await t.text()})();return se(s).debug(`[${a}] response parsed`,Je({retryOfRequestLogID:r,url:t.url,status:t.status,body:o,durationMs:Date.now()-n})),o}function Xa(s,e){return!s||typeof s!="object"||Array.isArray(s)?s:Object.defineProperty(s,"_request_id",{value:e.headers.get("request-id"),enumerable:!1})}var St;class rs extends Promise{constructor(e,t,a=Qa){super(r=>{r(null)}),this.responsePromise=t,this.parseResponse=a,St.set(this,void 0),x(this,St,e)}_thenUnwrap(e){return new rs(u(this,St,"f"),this.responsePromise,async(t,a)=>Xa(e(await this.parseResponse(t,a),a),a.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(u(this,St,"f"),e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}St=new WeakMap;var At;class Po{constructor(e,t,a,r){At.set(this,void 0),x(this,At,e),this.options=r,this.response=t,this.body=a}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new R("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await u(this,At,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(At=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}}class jo extends rs{constructor(e,t,a){super(e,t,async(r,n)=>new a(r,n.response,await Qa(r,n),n.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const t of e)yield t}}class It extends Po{constructor(e,t,a,r){super(e,t,a,r),this.data=a.data||[],this.has_more=a.has_more||!1,this.first_id=a.first_id||null,this.last_id=a.last_id||null}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){if(this.options.query?.before_id){const t=this.first_id;return t?{...this.options,query:{...Ys(this.options.query),before_id:t}}:null}const e=this.last_id;return e?{...this.options,query:{...Ys(this.options.query),after_id:e}}:null}}const Ga=()=>{if(typeof File>"u"){const{process:s}=globalThis,e=typeof s?.versions?.node=="string"&&parseInt(s.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function st(s,e,t){return Ga(),new File(s,e??"unknown_file",t)}function Yt(s){return(typeof s=="object"&&s!==null&&("name"in s&&s.name&&String(s.name)||"url"in s&&s.url&&String(s.url)||"filename"in s&&s.filename&&String(s.filename)||"path"in s&&s.path&&String(s.path))||"").split(/[\\/]/).pop()||void 0}const Ya=s=>s!=null&&typeof s=="object"&&typeof s[Symbol.asyncIterator]=="function",Io=async(s,e)=>({...s,body:await No(s.body,e)}),oa=new WeakMap;function Ro(s){const e=typeof s=="function"?s:s.fetch,t=oa.get(e);if(t)return t;const a=(async()=>{try{const r="Response"in e?e.Response:(await e("data:,")).constructor,n=new FormData;return n.toString()!==await new r(n).text()}catch{return!0}})();return oa.set(e,a),a}const No=async(s,e)=>{if(!await Ro(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const t=new FormData;return await Promise.all(Object.entries(s||{}).map(([a,r])=>Ps(t,a,r))),t},Mo=s=>s instanceof Blob&&"name"in s,Ps=async(s,e,t)=>{if(t!==void 0){if(t==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof t=="string"||typeof t=="number"||typeof t=="boolean")s.append(e,String(t));else if(t instanceof Response){let a={};const r=t.headers.get("Content-Type");r&&(a={type:r}),s.append(e,st([await t.blob()],Yt(t),a))}else if(Ya(t))s.append(e,st([await new Response(Ja(t)).blob()],Yt(t)));else if(Mo(t))s.append(e,st([t],Yt(t),{type:t.type}));else if(Array.isArray(t))await Promise.all(t.map(a=>Ps(s,e+"[]",a)));else if(typeof t=="object")await Promise.all(Object.entries(t).map(([a,r])=>Ps(s,`${e}[${a}]`,r)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${t} instead`)}},Ka=s=>s!=null&&typeof s=="object"&&typeof s.size=="number"&&typeof s.type=="string"&&typeof s.text=="function"&&typeof s.slice=="function"&&typeof s.arrayBuffer=="function",Co=s=>s!=null&&typeof s=="object"&&typeof s.name=="string"&&typeof s.lastModified=="number"&&Ka(s),Ao=s=>s!=null&&typeof s=="object"&&typeof s.url=="string"&&typeof s.blob=="function";async function qo(s,e,t){if(Ga(),s=await s,e||(e=Yt(s)),Co(s))return s instanceof File&&e==null&&t==null?s:st([await s.arrayBuffer()],e??s.name,{type:s.type,lastModified:s.lastModified,...t});if(Ao(s)){const r=await s.blob();return e||(e=new URL(s.url).pathname.split(/[\\/]/).pop()),st(await js(r),e,t)}const a=await js(s);if(!t?.type){const r=a.find(n=>typeof n=="object"&&"type"in n&&n.type);typeof r=="string"&&(t={...t,type:r})}return st(a,e,t)}async function js(s){let e=[];if(typeof s=="string"||ArrayBuffer.isView(s)||s instanceof ArrayBuffer)e.push(s);else if(Ka(s))e.push(s instanceof Blob?s:await s.arrayBuffer());else if(Ya(s))for await(const t of s)e.push(...await js(t));else{const t=s?.constructor?.name;throw new Error(`Unexpected data type: ${typeof s}${t?`; constructor: ${t}`:""}${Do(s)}`)}return e}function Do(s){return typeof s!="object"||s===null?"":`; props: [${Object.getOwnPropertyNames(s).map(t=>`"${t}"`).join(", ")}]`}class Oe{constructor(e){this._client=e}}const Za=Symbol.for("brand.privateNullableHeaders");function*Oo(s){if(!s)return;if(Za in s){const{values:a,nulls:r}=s;yield*a.entries();for(const n of r)yield[n,null];return}let e=!1,t;s instanceof Headers?t=s.entries():Gs(s)?t=s:(e=!0,t=Object.entries(s??{}));for(let a of t){const r=a[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const n=Gs(a[1])?a[1]:[a[1]];let o=!1;for(const i of n)i!==void 0&&(e&&!o&&(o=!0,yield[r,null]),yield[r,i])}}const z=s=>{const e=new Headers,t=new Set;for(const a of s){const r=new Set;for(const[n,o]of Oo(a)){const i=n.toLowerCase();r.has(i)||(e.delete(n),r.add(i)),o===null?(e.delete(n),t.add(i)):(e.append(n,o),t.delete(i))}}return{[Za]:!0,values:e,nulls:t}};function er(s){return s.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const ia=Object.freeze(Object.create(null)),Lo=(s=er)=>function(t,...a){if(t.length===1)return t[0];let r=!1;const n=[],o=t.reduce((v,_,b)=>{/[?#]/.test(_)&&(r=!0);const f=a[b];let S=(r?encodeURIComponent:s)(""+f);return b!==a.length&&(f==null||typeof f=="object"&&f.toString===Object.getPrototypeOf(Object.getPrototypeOf(f.hasOwnProperty??ia)??ia)?.toString)&&(S=f+"",n.push({start:v.length+_.length,length:S.length,error:`Value of type ${Object.prototype.toString.call(f).slice(8,-1)} is not a valid path parameter`})),v+_+(b===a.length?"":S)},""),i=o.split(/[?#]/,1)[0],c=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let m;for(;(m=c.exec(i))!==null;)n.push({start:m.index,length:m[0].length,error:`Value "${m[0]}" can't be safely passed as a path parameter`});if(n.sort((v,_)=>v.start-_.start),n.length>0){let v=0;const _=n.reduce((b,f)=>{const S=" ".repeat(f.start-v),T="^".repeat(f.length);return v=f.start+f.length,b+S+T},"");throw new R(`Path parameters result in path with invalid segments:
${n.map(b=>b.error).join(`
`)}
${o}
${_}`)}return o},_e=Lo(er);class tr extends Oe{list(e={},t){const{betas:a,...r}=e??{};return this._client.getAPIList("/v1/files",It,{query:r,...t,headers:z([{"anthropic-beta":[...a??[],"files-api-2025-04-14"].toString()},t?.headers])})}delete(e,t={},a){const{betas:r}=t??{};return this._client.delete(_e`/v1/files/${e}`,{...a,headers:z([{"anthropic-beta":[...r??[],"files-api-2025-04-14"].toString()},a?.headers])})}download(e,t={},a){const{betas:r}=t??{};return this._client.get(_e`/v1/files/${e}/content`,{...a,headers:z([{"anthropic-beta":[...r??[],"files-api-2025-04-14"].toString(),Accept:"application/binary"},a?.headers]),__binaryResponse:!0})}retrieveMetadata(e,t={},a){const{betas:r}=t??{};return this._client.get(_e`/v1/files/${e}`,{...a,headers:z([{"anthropic-beta":[...r??[],"files-api-2025-04-14"].toString()},a?.headers])})}upload(e,t){const{betas:a,...r}=e;return this._client.post("/v1/files",Io({body:r,...t,headers:z([{"anthropic-beta":[...a??[],"files-api-2025-04-14"].toString()},t?.headers])},this._client))}}let sr=class extends Oe{retrieve(e,t={},a){const{betas:r}=t??{};return this._client.get(_e`/v1/models/${e}?beta=true`,{...a,headers:z([{...r?.toString()!=null?{"anthropic-beta":r?.toString()}:void 0},a?.headers])})}list(e={},t){const{betas:a,...r}=e??{};return this._client.getAPIList("/v1/models?beta=true",It,{query:r,...t,headers:z([{...a?.toString()!=null?{"anthropic-beta":a?.toString()}:void 0},t?.headers])})}};class ns{constructor(e,t){this.iterator=e,this.controller=t}async*decoder(){const e=new jt;for await(const t of this.iterator)for(const a of e.decode(t))yield JSON.parse(a);for(const t of e.flush())yield JSON.parse(t)}[Symbol.asyncIterator](){return this.decoder()}static fromResponse(e,t){if(!e.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new R("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new R("Attempted to iterate over a response with no body");return new ns(Ds(e.body),t)}}let ar=class extends Oe{create(e,t){const{betas:a,...r}=e;return this._client.post("/v1/messages/batches?beta=true",{body:r,...t,headers:z([{"anthropic-beta":[...a??[],"message-batches-2024-09-24"].toString()},t?.headers])})}retrieve(e,t={},a){const{betas:r}=t??{};return this._client.get(_e`/v1/messages/batches/${e}?beta=true`,{...a,headers:z([{"anthropic-beta":[...r??[],"message-batches-2024-09-24"].toString()},a?.headers])})}list(e={},t){const{betas:a,...r}=e??{};return this._client.getAPIList("/v1/messages/batches?beta=true",It,{query:r,...t,headers:z([{"anthropic-beta":[...a??[],"message-batches-2024-09-24"].toString()},t?.headers])})}delete(e,t={},a){const{betas:r}=t??{};return this._client.delete(_e`/v1/messages/batches/${e}?beta=true`,{...a,headers:z([{"anthropic-beta":[...r??[],"message-batches-2024-09-24"].toString()},a?.headers])})}cancel(e,t={},a){const{betas:r}=t??{};return this._client.post(_e`/v1/messages/batches/${e}/cancel?beta=true`,{...a,headers:z([{"anthropic-beta":[...r??[],"message-batches-2024-09-24"].toString()},a?.headers])})}async results(e,t={},a){const r=await this.retrieve(e);if(!r.results_url)throw new R(`No batch \`results_url\`; Has it finished processing? ${r.processing_status} - ${r.id}`);const{betas:n}=t??{};return this._client.get(r.results_url,{...a,headers:z([{"anthropic-beta":[...n??[],"message-batches-2024-09-24"].toString(),Accept:"application/binary"},a?.headers]),stream:!0,__binaryResponse:!0})._thenUnwrap((o,i)=>ns.fromResponse(i.response,i.controller))}};const Uo=s=>{let e=0,t=[];for(;e<s.length;){let a=s[e];if(a==="\\"){e++;continue}if(a==="{"){t.push({type:"brace",value:"{"}),e++;continue}if(a==="}"){t.push({type:"brace",value:"}"}),e++;continue}if(a==="["){t.push({type:"paren",value:"["}),e++;continue}if(a==="]"){t.push({type:"paren",value:"]"}),e++;continue}if(a===":"){t.push({type:"separator",value:":"}),e++;continue}if(a===","){t.push({type:"delimiter",value:","}),e++;continue}if(a==='"'){let i="",c=!1;for(a=s[++e];a!=='"';){if(e===s.length){c=!0;break}if(a==="\\"){if(e++,e===s.length){c=!0;break}i+=a+s[e],a=s[++e]}else i+=a,a=s[++e]}a=s[++e],c||t.push({type:"string",value:i});continue}if(a&&/\s/.test(a)){e++;continue}let n=/[0-9]/;if(a&&n.test(a)||a==="-"||a==="."){let i="";for(a==="-"&&(i+=a,a=s[++e]);a&&n.test(a)||a===".";)i+=a,a=s[++e];t.push({type:"number",value:i});continue}let o=/[a-z]/i;if(a&&o.test(a)){let i="";for(;a&&o.test(a)&&e!==s.length;)i+=a,a=s[++e];if(i=="true"||i=="false"||i==="null")t.push({type:"name",value:i});else{e++;continue}continue}e++}return t},tt=s=>{if(s.length===0)return s;let e=s[s.length-1];switch(e.type){case"separator":return s=s.slice(0,s.length-1),tt(s);case"number":let t=e.value[e.value.length-1];if(t==="."||t==="-")return s=s.slice(0,s.length-1),tt(s);case"string":let a=s[s.length-2];if(a?.type==="delimiter")return s=s.slice(0,s.length-1),tt(s);if(a?.type==="brace"&&a.value==="{")return s=s.slice(0,s.length-1),tt(s);break;case"delimiter":return s=s.slice(0,s.length-1),tt(s)}return s},zo=s=>{let e=[];return s.map(t=>{t.type==="brace"&&(t.value==="{"?e.push("}"):e.splice(e.lastIndexOf("}"),1)),t.type==="paren"&&(t.value==="["?e.push("]"):e.splice(e.lastIndexOf("]"),1))}),e.length>0&&e.reverse().map(t=>{t==="}"?s.push({type:"brace",value:"}"}):t==="]"&&s.push({type:"paren",value:"]"})}),s},Wo=s=>{let e="";return s.map(t=>{t.type==="string"?e+='"'+t.value+'"':e+=t.value}),e},rr=s=>JSON.parse(Wo(zo(tt(Uo(s)))));var pe,ze,it,qt,lt,ct,Dt,ut,Re,dt,Ot,Lt,Xe,Ut,zt,hs,la,Wt,ms,fs,gs,ca;const ua="__json_buf";function da(s){return s.type==="tool_use"||s.type==="server_tool_use"||s.type==="mcp_tool_use"}class ts{constructor(){pe.add(this),this.messages=[],this.receivedMessages=[],ze.set(this,void 0),this.controller=new AbortController,it.set(this,void 0),qt.set(this,()=>{}),lt.set(this,()=>{}),ct.set(this,void 0),Dt.set(this,()=>{}),ut.set(this,()=>{}),Re.set(this,{}),dt.set(this,!1),Ot.set(this,!1),Lt.set(this,!1),Xe.set(this,!1),Ut.set(this,void 0),zt.set(this,void 0),Wt.set(this,e=>{if(x(this,Ot,!0),Et(e)&&(e=new ye),e instanceof ye)return x(this,Lt,!0),this._emit("abort",e);if(e instanceof R)return this._emit("error",e);if(e instanceof Error){const t=new R(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new R(String(e)))}),x(this,it,new Promise((e,t)=>{x(this,qt,e,"f"),x(this,lt,t,"f")})),x(this,ct,new Promise((e,t)=>{x(this,Dt,e,"f"),x(this,ut,t,"f")})),u(this,it,"f").catch(()=>{}),u(this,ct,"f").catch(()=>{})}get response(){return u(this,Ut,"f")}get request_id(){return u(this,zt,"f")}async withResponse(){const e=await u(this,it,"f");if(!e)throw new Error("Could not resolve a `Response` object");return{data:this,response:e,request_id:e.headers.get("request-id")}}static fromReadableStream(e){const t=new ts;return t._run(()=>t._fromReadableStream(e)),t}static createMessage(e,t,a){const r=new ts;for(const n of t.messages)r._addMessageParam(n);return r._run(()=>r._createMessage(e,{...t,stream:!0},{...a,headers:{...a?.headers,"X-Stainless-Helper-Method":"stream"}})),r}_run(e){e().then(()=>{this._emitFinal(),this._emit("end")},u(this,Wt,"f"))}_addMessageParam(e){this.messages.push(e)}_addMessage(e,t=!0){this.receivedMessages.push(e),t&&this._emit("message",e)}async _createMessage(e,t,a){const r=a?.signal;let n;r&&(r.aborted&&this.controller.abort(),n=this.controller.abort.bind(this.controller),r.addEventListener("abort",n));try{u(this,pe,"m",ms).call(this);const{response:o,data:i}=await e.create({...t,stream:!0},{...a,signal:this.controller.signal}).withResponse();this._connected(o);for await(const c of i)u(this,pe,"m",fs).call(this,c);if(i.controller.signal?.aborted)throw new ye;u(this,pe,"m",gs).call(this)}finally{r&&n&&r.removeEventListener("abort",n)}}_connected(e){this.ended||(x(this,Ut,e),x(this,zt,e?.headers.get("request-id")),u(this,qt,"f").call(this,e),this._emit("connect"))}get ended(){return u(this,dt,"f")}get errored(){return u(this,Ot,"f")}get aborted(){return u(this,Lt,"f")}abort(){this.controller.abort()}on(e,t){return(u(this,Re,"f")[e]||(u(this,Re,"f")[e]=[])).push({listener:t}),this}off(e,t){const a=u(this,Re,"f")[e];if(!a)return this;const r=a.findIndex(n=>n.listener===t);return r>=0&&a.splice(r,1),this}once(e,t){return(u(this,Re,"f")[e]||(u(this,Re,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,a)=>{x(this,Xe,!0),e!=="error"&&this.once("error",a),this.once(e,t)})}async done(){x(this,Xe,!0),await u(this,ct,"f")}get currentMessage(){return u(this,ze,"f")}async finalMessage(){return await this.done(),u(this,pe,"m",hs).call(this)}async finalText(){return await this.done(),u(this,pe,"m",la).call(this)}_emit(e,...t){if(u(this,dt,"f"))return;e==="end"&&(x(this,dt,!0),u(this,Dt,"f").call(this));const a=u(this,Re,"f")[e];if(a&&(u(this,Re,"f")[e]=a.filter(r=>!r.once),a.forEach(({listener:r})=>r(...t))),e==="abort"){const r=t[0];!u(this,Xe,"f")&&!a?.length&&Promise.reject(r),u(this,lt,"f").call(this,r),u(this,ut,"f").call(this,r),this._emit("end");return}if(e==="error"){const r=t[0];!u(this,Xe,"f")&&!a?.length&&Promise.reject(r),u(this,lt,"f").call(this,r),u(this,ut,"f").call(this,r),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",u(this,pe,"m",hs).call(this))}async _fromReadableStream(e,t){const a=t?.signal;let r;a&&(a.aborted&&this.controller.abort(),r=this.controller.abort.bind(this.controller),a.addEventListener("abort",r));try{u(this,pe,"m",ms).call(this),this._connected(null);const n=Te.fromReadableStream(e,this.controller);for await(const o of n)u(this,pe,"m",fs).call(this,o);if(n.controller.signal?.aborted)throw new ye;u(this,pe,"m",gs).call(this)}finally{a&&r&&a.removeEventListener("abort",r)}}[(ze=new WeakMap,it=new WeakMap,qt=new WeakMap,lt=new WeakMap,ct=new WeakMap,Dt=new WeakMap,ut=new WeakMap,Re=new WeakMap,dt=new WeakMap,Ot=new WeakMap,Lt=new WeakMap,Xe=new WeakMap,Ut=new WeakMap,zt=new WeakMap,Wt=new WeakMap,pe=new WeakSet,hs=function(){if(this.receivedMessages.length===0)throw new R("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},la=function(){if(this.receivedMessages.length===0)throw new R("stream ended without producing a Message with role=assistant");const t=this.receivedMessages.at(-1).content.filter(a=>a.type==="text").map(a=>a.text);if(t.length===0)throw new R("stream ended without producing a content block with type=text");return t.join(" ")},ms=function(){this.ended||x(this,ze,void 0)},fs=function(t){if(this.ended)return;const a=u(this,pe,"m",ca).call(this,t);switch(this._emit("streamEvent",t,a),t.type){case"content_block_delta":{const r=a.content.at(-1);switch(t.delta.type){case"text_delta":{r.type==="text"&&this._emit("text",t.delta.text,r.text||"");break}case"citations_delta":{r.type==="text"&&this._emit("citation",t.delta.citation,r.citations??[]);break}case"input_json_delta":{da(r)&&r.input&&this._emit("inputJson",t.delta.partial_json,r.input);break}case"thinking_delta":{r.type==="thinking"&&this._emit("thinking",t.delta.thinking,r.thinking);break}case"signature_delta":{r.type==="thinking"&&this._emit("signature",r.signature);break}default:t.delta}break}case"message_stop":{this._addMessageParam(a),this._addMessage(a,!0);break}case"content_block_stop":{this._emit("contentBlock",a.content.at(-1));break}case"message_start":{x(this,ze,a);break}}},gs=function(){if(this.ended)throw new R("stream has ended, this shouldn't happen");const t=u(this,ze,"f");if(!t)throw new R("request ended without sending any chunks");return x(this,ze,void 0),t},ca=function(t){let a=u(this,ze,"f");if(t.type==="message_start"){if(a)throw new R(`Unexpected event order, got ${t.type} before receiving "message_stop"`);return t.message}if(!a)throw new R(`Unexpected event order, got ${t.type} before "message_start"`);switch(t.type){case"message_stop":return a;case"message_delta":return a.container=t.delta.container,a.stop_reason=t.delta.stop_reason,a.stop_sequence=t.delta.stop_sequence,a.usage.output_tokens=t.usage.output_tokens,a.context_management=t.context_management,t.usage.input_tokens!=null&&(a.usage.input_tokens=t.usage.input_tokens),t.usage.cache_creation_input_tokens!=null&&(a.usage.cache_creation_input_tokens=t.usage.cache_creation_input_tokens),t.usage.cache_read_input_tokens!=null&&(a.usage.cache_read_input_tokens=t.usage.cache_read_input_tokens),t.usage.server_tool_use!=null&&(a.usage.server_tool_use=t.usage.server_tool_use),a;case"content_block_start":return a.content.push(t.content_block),a;case"content_block_delta":{const r=a.content.at(t.index);switch(t.delta.type){case"text_delta":{r?.type==="text"&&(a.content[t.index]={...r,text:(r.text||"")+t.delta.text});break}case"citations_delta":{r?.type==="text"&&(a.content[t.index]={...r,citations:[...r.citations??[],t.delta.citation]});break}case"input_json_delta":{if(r&&da(r)){let n=r[ua]||"";n+=t.delta.partial_json;const o={...r};if(Object.defineProperty(o,ua,{value:n,enumerable:!1,writable:!0}),n)try{o.input=rr(n)}catch(i){const c=new R(`Unable to parse tool parameter JSON from model. Please retry your request or adjust your prompt. Error: ${i}. JSON: ${n}`);u(this,Wt,"f").call(this,c)}a.content[t.index]=o}break}case"thinking_delta":{r?.type==="thinking"&&(a.content[t.index]={...r,thinking:r.thinking+t.delta.thinking});break}case"signature_delta":{r?.type==="thinking"&&(a.content[t.index]={...r,signature:t.delta.signature});break}default:t.delta}return a}case"content_block_stop":return a}},Symbol.asyncIterator)](){const e=[],t=[];let a=!1;return this.on("streamEvent",r=>{const n=t.shift();n?n.resolve(r):e.push(r)}),this.on("end",()=>{a=!0;for(const r of t)r.resolve(void 0);t.length=0}),this.on("abort",r=>{a=!0;for(const n of t)n.reject(r);t.length=0}),this.on("error",r=>{a=!0;for(const n of t)n.reject(r);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:a?{value:void 0,done:!0}:new Promise((n,o)=>t.push({resolve:n,reject:o})).then(n=>n?{value:n,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Te(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}const nr={"claude-opus-4-20250514":8192,"claude-opus-4-0":8192,"claude-4-opus-20250514":8192,"anthropic.claude-opus-4-20250514-v1:0":8192,"claude-opus-4@20250514":8192,"claude-opus-4-1-20250805":8192,"anthropic.claude-opus-4-1-20250805-v1:0":8192,"claude-opus-4-1@20250805":8192};var Bt,Ge,Fe,ne,pt,ke,Ce,We,ht,Is;function pa(){let s,e;return{promise:new Promise((a,r)=>{s=a,e=r}),resolve:s,reject:e}}class or{constructor(e,t,a){Bt.add(this),this.client=e,Ge.set(this,!1),Fe.set(this,!1),ne.set(this,void 0),pt.set(this,void 0),ke.set(this,void 0),Ce.set(this,void 0),We.set(this,void 0),ht.set(this,0),x(this,ne,{params:{...t,messages:structuredClone(t.messages)}}),x(this,pt,{...a,headers:z([{"x-stainless-helper":"BetaToolRunner"},a?.headers])}),x(this,We,pa())}async*[(Ge=new WeakMap,Fe=new WeakMap,ne=new WeakMap,pt=new WeakMap,ke=new WeakMap,Ce=new WeakMap,We=new WeakMap,ht=new WeakMap,Bt=new WeakSet,Symbol.asyncIterator)](){var e;if(u(this,Ge,"f"))throw new R("Cannot iterate over a consumed stream");x(this,Ge,!0),x(this,Fe,!0),x(this,Ce,void 0);try{for(;;){let t;try{if(u(this,ne,"f").params.max_iterations&&u(this,ht,"f")>=u(this,ne,"f").params.max_iterations)break;x(this,Fe,!1,"f"),x(this,ke,void 0,"f"),x(this,Ce,void 0,"f"),x(this,ht,(e=u(this,ht,"f"),e++,e),"f");const{max_iterations:a,...r}=u(this,ne,"f").params;if(r.stream?(t=this.client.beta.messages.stream({...r},u(this,pt,"f")),x(this,ke,t.finalMessage(),"f"),yield t):(x(this,ke,this.client.beta.messages.create({...r,stream:!1},u(this,pt,"f")),"f"),yield u(this,ke,"f")),!u(this,Fe,"f")){const{role:o,content:i}=await u(this,ke,"f");u(this,ne,"f").params.messages.push({role:o,content:i})}const n=await u(this,Bt,"m",Is).call(this,u(this,ne,"f").params.messages.at(-1));if(n&&u(this,ne,"f").params.messages.push(n),!n&&!u(this,Fe,"f"))break}finally{t&&t.abort()}}if(!u(this,ke,"f"))throw new R("ToolRunner concluded without a message from the server");u(this,We,"f").resolve(await u(this,ke,"f"))}catch(t){throw x(this,Ge,!1),u(this,We,"f").promise.catch(()=>{}),u(this,We,"f").reject(t),x(this,We,pa()),t}}setMessagesParams(e){typeof e=="function"?u(this,ne,"f").params=e(u(this,ne,"f").params):u(this,ne,"f").params=e,x(this,Fe,!0),x(this,Ce,void 0)}async generateToolResponse(){const e=await u(this,ke,"f")??this.params.messages.at(-1);return e?u(this,Bt,"m",Is).call(this,e):null}done(){return u(this,We,"f").promise}async runUntilDone(){if(!u(this,Ge,"f"))for await(const e of this);return this.done()}get params(){return u(this,ne,"f").params}pushMessages(...e){this.setMessagesParams(t=>({...t,messages:[...t.messages,...e]}))}then(e,t){return this.runUntilDone().then(e,t)}}Is=async function(e){return u(this,Ce,"f")!==void 0?u(this,Ce,"f"):(x(this,Ce,Bo(u(this,ne,"f").params,e)),u(this,Ce,"f"))};async function Bo(s,e=s.messages.at(-1)){if(!e||e.role!=="assistant"||!e.content||typeof e.content=="string")return null;const t=e.content.filter(r=>r.type==="tool_use");return t.length===0?null:{role:"user",content:await Promise.all(t.map(async r=>{const n=s.tools.find(o=>o.name===r.name);if(!n||!("run"in n))return{type:"tool_result",tool_use_id:r.id,content:`Error: Tool '${r.name}' not found`,is_error:!0};try{let o=r.input;"parse"in n&&n.parse&&(o=n.parse(o));const i=await n.run(o);return{type:"tool_result",tool_use_id:r.id,content:i}}catch(o){return{type:"tool_result",tool_use_id:r.id,content:`Error: ${o instanceof Error?o.message:String(o)}`,is_error:!0}}}))}}const ha={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-3-opus-20240229":"January 5th, 2026","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025","claude-3-5-sonnet-20241022":"October 22, 2025","claude-3-5-sonnet-20240620":"October 22, 2025"};let os=class extends Oe{constructor(){super(...arguments),this.batches=new ar(this._client)}create(e,t){const{betas:a,...r}=e;r.model in ha&&console.warn(`The model '${r.model}' is deprecated and will reach end-of-life on ${ha[r.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`);let n=this._client._options.timeout;if(!r.stream&&n==null){const o=nr[r.model]??void 0;n=this._client.calculateNonstreamingTimeout(r.max_tokens,o)}return this._client.post("/v1/messages?beta=true",{body:r,timeout:n??6e5,...t,headers:z([{...a?.toString()!=null?{"anthropic-beta":a?.toString()}:void 0},t?.headers]),stream:e.stream??!1})}stream(e,t){return ts.createMessage(this,e,t)}countTokens(e,t){const{betas:a,...r}=e;return this._client.post("/v1/messages/count_tokens?beta=true",{body:r,...t,headers:z([{"anthropic-beta":[...a??[],"token-counting-2024-11-01"].toString()},t?.headers])})}toolRunner(e,t){return new or(this._client,e,t)}};os.Batches=ar;os.BetaToolRunner=or;class Rt extends Oe{constructor(){super(...arguments),this.models=new sr(this._client),this.messages=new os(this._client),this.files=new tr(this._client)}}Rt.Models=sr;Rt.Messages=os;Rt.Files=tr;class ir extends Oe{create(e,t){const{betas:a,...r}=e;return this._client.post("/v1/complete",{body:r,timeout:this._client._options.timeout??6e5,...t,headers:z([{...a?.toString()!=null?{"anthropic-beta":a?.toString()}:void 0},t?.headers]),stream:e.stream??!1})}}var he,Be,mt,Ht,ft,gt,Vt,vt,Ne,bt,Ft,$t,Ye,Jt,Qt,vs,ma,bs,ys,ws,_s,fa;const ga="__json_buf";function va(s){return s.type==="tool_use"||s.type==="server_tool_use"}class ss{constructor(){he.add(this),this.messages=[],this.receivedMessages=[],Be.set(this,void 0),this.controller=new AbortController,mt.set(this,void 0),Ht.set(this,()=>{}),ft.set(this,()=>{}),gt.set(this,void 0),Vt.set(this,()=>{}),vt.set(this,()=>{}),Ne.set(this,{}),bt.set(this,!1),Ft.set(this,!1),$t.set(this,!1),Ye.set(this,!1),Jt.set(this,void 0),Qt.set(this,void 0),bs.set(this,e=>{if(x(this,Ft,!0),Et(e)&&(e=new ye),e instanceof ye)return x(this,$t,!0),this._emit("abort",e);if(e instanceof R)return this._emit("error",e);if(e instanceof Error){const t=new R(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new R(String(e)))}),x(this,mt,new Promise((e,t)=>{x(this,Ht,e,"f"),x(this,ft,t,"f")})),x(this,gt,new Promise((e,t)=>{x(this,Vt,e,"f"),x(this,vt,t,"f")})),u(this,mt,"f").catch(()=>{}),u(this,gt,"f").catch(()=>{})}get response(){return u(this,Jt,"f")}get request_id(){return u(this,Qt,"f")}async withResponse(){const e=await u(this,mt,"f");if(!e)throw new Error("Could not resolve a `Response` object");return{data:this,response:e,request_id:e.headers.get("request-id")}}static fromReadableStream(e){const t=new ss;return t._run(()=>t._fromReadableStream(e)),t}static createMessage(e,t,a){const r=new ss;for(const n of t.messages)r._addMessageParam(n);return r._run(()=>r._createMessage(e,{...t,stream:!0},{...a,headers:{...a?.headers,"X-Stainless-Helper-Method":"stream"}})),r}_run(e){e().then(()=>{this._emitFinal(),this._emit("end")},u(this,bs,"f"))}_addMessageParam(e){this.messages.push(e)}_addMessage(e,t=!0){this.receivedMessages.push(e),t&&this._emit("message",e)}async _createMessage(e,t,a){const r=a?.signal;let n;r&&(r.aborted&&this.controller.abort(),n=this.controller.abort.bind(this.controller),r.addEventListener("abort",n));try{u(this,he,"m",ys).call(this);const{response:o,data:i}=await e.create({...t,stream:!0},{...a,signal:this.controller.signal}).withResponse();this._connected(o);for await(const c of i)u(this,he,"m",ws).call(this,c);if(i.controller.signal?.aborted)throw new ye;u(this,he,"m",_s).call(this)}finally{r&&n&&r.removeEventListener("abort",n)}}_connected(e){this.ended||(x(this,Jt,e),x(this,Qt,e?.headers.get("request-id")),u(this,Ht,"f").call(this,e),this._emit("connect"))}get ended(){return u(this,bt,"f")}get errored(){return u(this,Ft,"f")}get aborted(){return u(this,$t,"f")}abort(){this.controller.abort()}on(e,t){return(u(this,Ne,"f")[e]||(u(this,Ne,"f")[e]=[])).push({listener:t}),this}off(e,t){const a=u(this,Ne,"f")[e];if(!a)return this;const r=a.findIndex(n=>n.listener===t);return r>=0&&a.splice(r,1),this}once(e,t){return(u(this,Ne,"f")[e]||(u(this,Ne,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,a)=>{x(this,Ye,!0),e!=="error"&&this.once("error",a),this.once(e,t)})}async done(){x(this,Ye,!0),await u(this,gt,"f")}get currentMessage(){return u(this,Be,"f")}async finalMessage(){return await this.done(),u(this,he,"m",vs).call(this)}async finalText(){return await this.done(),u(this,he,"m",ma).call(this)}_emit(e,...t){if(u(this,bt,"f"))return;e==="end"&&(x(this,bt,!0),u(this,Vt,"f").call(this));const a=u(this,Ne,"f")[e];if(a&&(u(this,Ne,"f")[e]=a.filter(r=>!r.once),a.forEach(({listener:r})=>r(...t))),e==="abort"){const r=t[0];!u(this,Ye,"f")&&!a?.length&&Promise.reject(r),u(this,ft,"f").call(this,r),u(this,vt,"f").call(this,r),this._emit("end");return}if(e==="error"){const r=t[0];!u(this,Ye,"f")&&!a?.length&&Promise.reject(r),u(this,ft,"f").call(this,r),u(this,vt,"f").call(this,r),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",u(this,he,"m",vs).call(this))}async _fromReadableStream(e,t){const a=t?.signal;let r;a&&(a.aborted&&this.controller.abort(),r=this.controller.abort.bind(this.controller),a.addEventListener("abort",r));try{u(this,he,"m",ys).call(this),this._connected(null);const n=Te.fromReadableStream(e,this.controller);for await(const o of n)u(this,he,"m",ws).call(this,o);if(n.controller.signal?.aborted)throw new ye;u(this,he,"m",_s).call(this)}finally{a&&r&&a.removeEventListener("abort",r)}}[(Be=new WeakMap,mt=new WeakMap,Ht=new WeakMap,ft=new WeakMap,gt=new WeakMap,Vt=new WeakMap,vt=new WeakMap,Ne=new WeakMap,bt=new WeakMap,Ft=new WeakMap,$t=new WeakMap,Ye=new WeakMap,Jt=new WeakMap,Qt=new WeakMap,bs=new WeakMap,he=new WeakSet,vs=function(){if(this.receivedMessages.length===0)throw new R("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},ma=function(){if(this.receivedMessages.length===0)throw new R("stream ended without producing a Message with role=assistant");const t=this.receivedMessages.at(-1).content.filter(a=>a.type==="text").map(a=>a.text);if(t.length===0)throw new R("stream ended without producing a content block with type=text");return t.join(" ")},ys=function(){this.ended||x(this,Be,void 0)},ws=function(t){if(this.ended)return;const a=u(this,he,"m",fa).call(this,t);switch(this._emit("streamEvent",t,a),t.type){case"content_block_delta":{const r=a.content.at(-1);switch(t.delta.type){case"text_delta":{r.type==="text"&&this._emit("text",t.delta.text,r.text||"");break}case"citations_delta":{r.type==="text"&&this._emit("citation",t.delta.citation,r.citations??[]);break}case"input_json_delta":{va(r)&&r.input&&this._emit("inputJson",t.delta.partial_json,r.input);break}case"thinking_delta":{r.type==="thinking"&&this._emit("thinking",t.delta.thinking,r.thinking);break}case"signature_delta":{r.type==="thinking"&&this._emit("signature",r.signature);break}default:t.delta}break}case"message_stop":{this._addMessageParam(a),this._addMessage(a,!0);break}case"content_block_stop":{this._emit("contentBlock",a.content.at(-1));break}case"message_start":{x(this,Be,a);break}}},_s=function(){if(this.ended)throw new R("stream has ended, this shouldn't happen");const t=u(this,Be,"f");if(!t)throw new R("request ended without sending any chunks");return x(this,Be,void 0),t},fa=function(t){let a=u(this,Be,"f");if(t.type==="message_start"){if(a)throw new R(`Unexpected event order, got ${t.type} before receiving "message_stop"`);return t.message}if(!a)throw new R(`Unexpected event order, got ${t.type} before "message_start"`);switch(t.type){case"message_stop":return a;case"message_delta":return a.stop_reason=t.delta.stop_reason,a.stop_sequence=t.delta.stop_sequence,a.usage.output_tokens=t.usage.output_tokens,t.usage.input_tokens!=null&&(a.usage.input_tokens=t.usage.input_tokens),t.usage.cache_creation_input_tokens!=null&&(a.usage.cache_creation_input_tokens=t.usage.cache_creation_input_tokens),t.usage.cache_read_input_tokens!=null&&(a.usage.cache_read_input_tokens=t.usage.cache_read_input_tokens),t.usage.server_tool_use!=null&&(a.usage.server_tool_use=t.usage.server_tool_use),a;case"content_block_start":return a.content.push({...t.content_block}),a;case"content_block_delta":{const r=a.content.at(t.index);switch(t.delta.type){case"text_delta":{r?.type==="text"&&(a.content[t.index]={...r,text:(r.text||"")+t.delta.text});break}case"citations_delta":{r?.type==="text"&&(a.content[t.index]={...r,citations:[...r.citations??[],t.delta.citation]});break}case"input_json_delta":{if(r&&va(r)){let n=r[ga]||"";n+=t.delta.partial_json;const o={...r};Object.defineProperty(o,ga,{value:n,enumerable:!1,writable:!0}),n&&(o.input=rr(n)),a.content[t.index]=o}break}case"thinking_delta":{r?.type==="thinking"&&(a.content[t.index]={...r,thinking:r.thinking+t.delta.thinking});break}case"signature_delta":{r?.type==="thinking"&&(a.content[t.index]={...r,signature:t.delta.signature});break}default:t.delta}return a}case"content_block_stop":return a}},Symbol.asyncIterator)](){const e=[],t=[];let a=!1;return this.on("streamEvent",r=>{const n=t.shift();n?n.resolve(r):e.push(r)}),this.on("end",()=>{a=!0;for(const r of t)r.resolve(void 0);t.length=0}),this.on("abort",r=>{a=!0;for(const n of t)n.reject(r);t.length=0}),this.on("error",r=>{a=!0;for(const n of t)n.reject(r);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:a?{value:void 0,done:!0}:new Promise((n,o)=>t.push({resolve:n,reject:o})).then(n=>n?{value:n,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Te(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}class lr extends Oe{create(e,t){return this._client.post("/v1/messages/batches",{body:e,...t})}retrieve(e,t){return this._client.get(_e`/v1/messages/batches/${e}`,t)}list(e={},t){return this._client.getAPIList("/v1/messages/batches",It,{query:e,...t})}delete(e,t){return this._client.delete(_e`/v1/messages/batches/${e}`,t)}cancel(e,t){return this._client.post(_e`/v1/messages/batches/${e}/cancel`,t)}async results(e,t){const a=await this.retrieve(e);if(!a.results_url)throw new R(`No batch \`results_url\`; Has it finished processing? ${a.processing_status} - ${a.id}`);return this._client.get(a.results_url,{...t,headers:z([{Accept:"application/binary"},t?.headers]),stream:!0,__binaryResponse:!0})._thenUnwrap((r,n)=>ns.fromResponse(n.response,n.controller))}}class Ls extends Oe{constructor(){super(...arguments),this.batches=new lr(this._client)}create(e,t){e.model in ba&&console.warn(`The model '${e.model}' is deprecated and will reach end-of-life on ${ba[e.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`);let a=this._client._options.timeout;if(!e.stream&&a==null){const r=nr[e.model]??void 0;a=this._client.calculateNonstreamingTimeout(e.max_tokens,r)}return this._client.post("/v1/messages",{body:e,timeout:a??6e5,...t,stream:e.stream??!1})}stream(e,t){return ss.createMessage(this,e,t)}countTokens(e,t){return this._client.post("/v1/messages/count_tokens",{body:e,...t})}}const ba={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-3-opus-20240229":"January 5th, 2026","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025","claude-3-5-sonnet-20241022":"October 22, 2025","claude-3-5-sonnet-20240620":"October 22, 2025"};Ls.Batches=lr;class cr extends Oe{retrieve(e,t={},a){const{betas:r}=t??{};return this._client.get(_e`/v1/models/${e}`,{...a,headers:z([{...r?.toString()!=null?{"anthropic-beta":r?.toString()}:void 0},a?.headers])})}list(e={},t){const{betas:a,...r}=e??{};return this._client.getAPIList("/v1/models",It,{query:r,...t,headers:z([{...a?.toString()!=null?{"anthropic-beta":a?.toString()}:void 0},t?.headers])})}}var Ho={};const Xt=s=>{if(typeof globalThis.process<"u")return Ho?.[s]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(s)?.trim()};var Rs,Us,Kt,ur;const Vo="\\n\\nHuman:",Fo="\\n\\nAssistant:";class J{constructor({baseURL:e=Xt("ANTHROPIC_BASE_URL"),apiKey:t=Xt("ANTHROPIC_API_KEY")??null,authToken:a=Xt("ANTHROPIC_AUTH_TOKEN")??null,...r}={}){Rs.add(this),Kt.set(this,void 0);const n={apiKey:t,authToken:a,...r,baseURL:e||"https://api.anthropic.com"};if(!n.dangerouslyAllowBrowser&&uo())throw new R(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new Anthropic({ apiKey, dangerouslyAllowBrowser: true });
`);this.baseURL=n.baseURL,this.timeout=n.timeout??Us.DEFAULT_TIMEOUT,this.logger=n.logger??console;const o="warn";this.logLevel=o,this.logLevel=ra(n.logLevel,"ClientOptions.logLevel",this)??ra(Xt("ANTHROPIC_LOG"),"process.env['ANTHROPIC_LOG']",this)??o,this.fetchOptions=n.fetchOptions,this.maxRetries=n.maxRetries??2,this.fetch=n.fetch??go(),x(this,Kt,bo),this._options=n,this.apiKey=t,this.authToken=a}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,authToken:this.authToken,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(this.apiKey&&e.get("x-api-key"))&&!t.has("x-api-key")&&!(this.authToken&&e.get("authorization"))&&!t.has("authorization"))throw new Error('Could not resolve authentication method. Expected either apiKey or authToken to be set. Or for one of the "X-Api-Key" or "Authorization" headers to be explicitly omitted')}async authHeaders(e){return z([await this.apiKeyAuth(e),await this.bearerAuth(e)])}async apiKeyAuth(e){if(this.apiKey!=null)return z([{"X-Api-Key":this.apiKey}])}async bearerAuth(e){if(this.authToken!=null)return z([{Authorization:`Bearer ${this.authToken}`}])}stringifyQuery(e){return Object.entries(e).filter(([t,a])=>typeof a<"u").map(([t,a])=>{if(typeof a=="string"||typeof a=="number"||typeof a=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(a)}`;if(a===null)return`${encodeURIComponent(t)}=`;throw new R(`Cannot stringify type ${typeof a}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${et}`}defaultIdempotencyKey(){return`stainless-node-retry-${qa()}`}makeStatusError(e,t,a,r){return G.generate(e,t,a,r)}buildURL(e,t,a){const r=!u(this,Rs,"m",ur).call(this)&&a||this.baseURL,n=no(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return oo(o)||(t={...o,...t}),typeof t=="object"&&t&&!Array.isArray(t)&&(n.search=this.stringifyQuery(t)),n.toString()}_calculateNonstreamingTimeout(e){if(3600*e/128e3>600)throw new R("Streaming is required for operations that may take longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-typescript#streaming-responses for more details");return 600*1e3}async prepareOptions(e){}async prepareRequest(e,{url:t,options:a}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,a){return this.request(Promise.resolve(a).then(r=>({method:e,path:t,...r})))}request(e,t=null){return new rs(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,a){const r=await e,n=r.maxRetries??this.maxRetries;t==null&&(t=n),await this.prepareOptions(r);const{req:o,url:i,timeout:c}=await this.buildRequest(r,{retryCount:n-t});await this.prepareRequest(o,{url:i,options:r});const m="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),v=a===void 0?"":`, retryOf: ${a}`,_=Date.now();if(se(this).debug(`[${m}] sending request`,Je({retryOfRequestLogID:a,method:r.method,url:i,options:r,headers:o.headers})),r.signal?.aborted)throw new ye;const b=new AbortController,f=await this.fetchWithTimeout(i,o,c,b).catch(Es),S=Date.now();if(f instanceof globalThis.Error){const y=`retrying, ${t} attempts remaining`;if(r.signal?.aborted)throw new ye;const w=Et(f)||/timed? ?out/i.test(String(f)+("cause"in f?String(f.cause):""));if(t)return se(this).info(`[${m}] connection ${w?"timed out":"failed"} - ${y}`),se(this).debug(`[${m}] connection ${w?"timed out":"failed"} (${y})`,Je({retryOfRequestLogID:a,url:i,durationMs:S-_,message:f.message})),this.retryRequest(r,t,a??m);throw se(this).info(`[${m}] connection ${w?"timed out":"failed"} - error; no more retries left`),se(this).debug(`[${m}] connection ${w?"timed out":"failed"} (error; no more retries left)`,Je({retryOfRequestLogID:a,url:i,durationMs:S-_,message:f.message})),w?new Da:new as({cause:f})}const T=[...f.headers.entries()].filter(([y])=>y==="request-id").map(([y,w])=>", "+y+": "+JSON.stringify(w)).join(""),h=`[${m}${v}${T}] ${o.method} ${i} ${f.ok?"succeeded":"failed"} with status ${f.status} in ${S-_}ms`;if(!f.ok){const y=await this.shouldRetry(f);if(t&&y){const q=`retrying, ${t} attempts remaining`;return await vo(f.body),se(this).info(`${h} - ${q}`),se(this).debug(`[${m}] response error (${q})`,Je({retryOfRequestLogID:a,url:f.url,status:f.status,headers:f.headers,durationMs:S-_})),this.retryRequest(r,t,a??m,f.headers)}const w=y?"error; no more retries left":"error; not retryable";se(this).info(`${h} - ${w}`);const M=await f.text().catch(q=>Es(q).message),A=Fa(M),W=A?void 0:M;throw se(this).debug(`[${m}] response error (${w})`,Je({retryOfRequestLogID:a,url:f.url,status:f.status,headers:f.headers,message:W,durationMs:Date.now()-_})),this.makeStatusError(f.status,A,W,f.headers)}return se(this).info(h),se(this).debug(`[${m}] response start`,Je({retryOfRequestLogID:a,url:f.url,status:f.status,headers:f.headers,durationMs:S-_})),{response:f,options:r,controller:b,requestLogID:m,retryOfRequestLogID:a,startTime:_}}getAPIList(e,t,a){return this.requestAPIList(t,{method:"get",path:e,...a})}requestAPIList(e,t){const a=this.makeRequest(t,null,void 0);return new jo(this,a,e)}async fetchWithTimeout(e,t,a,r){const{signal:n,method:o,...i}=t||{};n&&n.addEventListener("abort",()=>r.abort());const c=setTimeout(()=>r.abort(),a),m=globalThis.ReadableStream&&i.body instanceof globalThis.ReadableStream||typeof i.body=="object"&&i.body!==null&&Symbol.asyncIterator in i.body,v={signal:r.signal,...m?{duplex:"half"}:{},method:"GET",...i};o&&(v.method=o.toUpperCase());try{return await this.fetch.call(void 0,e,v)}finally{clearTimeout(c)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,a,r){let n;const o=r?.get("retry-after-ms");if(o){const c=parseFloat(o);Number.isNaN(c)||(n=c)}const i=r?.get("retry-after");if(i&&!n){const c=parseFloat(i);Number.isNaN(c)?n=Date.parse(i)-Date.now():n=c*1e3}if(!(n&&0<=n&&n<60*1e3)){const c=e.maxRetries??this.maxRetries;n=this.calculateDefaultRetryTimeoutMillis(t,c)}return await co(n),this.makeRequest(e,t-1,a)}calculateDefaultRetryTimeoutMillis(e,t){const n=t-e,o=Math.min(.5*Math.pow(2,n),8),i=1-Math.random()*.25;return o*i*1e3}calculateNonstreamingTimeout(e,t){if(36e5*e/128e3>6e5||t!=null&&e>t)throw new R("Streaming is required for operations that may take longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-typescript#long-requests for more details");return 6e5}async buildRequest(e,{retryCount:t=0}={}){const a={...e},{method:r,path:n,query:o,defaultBaseURL:i}=a,c=this.buildURL(n,o,i);"timeout"in a&&lo("timeout",a.timeout),a.timeout=a.timeout??this.timeout;const{bodyHeaders:m,body:v}=this.buildBody({options:a}),_=await this.buildHeaders({options:e,method:r,bodyHeaders:m,retryCount:t});return{req:{method:r,headers:_,...a.signal&&{signal:a.signal},...globalThis.ReadableStream&&v instanceof globalThis.ReadableStream&&{duplex:"half"},...v&&{body:v},...this.fetchOptions??{},...a.fetchOptions??{}},url:c,timeout:a.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:a,retryCount:r}){let n={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),n[this.idempotencyHeader]=e.idempotencyKey);const o=z([n,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...fo(),...this._options.dangerouslyAllowBrowser?{"anthropic-dangerous-direct-browser-access":"true"}:void 0,"anthropic-version":"2023-06-01"},await this.authHeaders(e),this._options.defaultHeaders,a,e.headers]);return this.validateHeaders(o),o.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const a=z([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&a.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:Ja(e)}:u(this,Kt,"f").call(this,{body:e,headers:a})}}Us=J,Kt=new WeakMap,Rs=new WeakSet,ur=function(){return this.baseURL!=="https://api.anthropic.com"};J.Anthropic=Us;J.HUMAN_PROMPT=Vo;J.AI_PROMPT=Fo;J.DEFAULT_TIMEOUT=6e5;J.AnthropicError=R;J.APIError=G;J.APIConnectionError=as;J.APIConnectionTimeoutError=Da;J.APIUserAbortError=ye;J.NotFoundError=za;J.ConflictError=Wa;J.RateLimitError=Ha;J.BadRequestError=Oa;J.AuthenticationError=La;J.InternalServerError=Va;J.PermissionDeniedError=Ua;J.UnprocessableEntityError=Ba;J.toFile=qo;class Qe extends J{constructor(){super(...arguments),this.completions=new ir(this),this.messages=new Ls(this),this.models=new cr(this),this.beta=new Rt(this)}}Qe.Completions=ir;Qe.Messages=Ls;Qe.Models=cr;Qe.Beta=Rt;const $o={beginner:{tenses:"present simple, present continuous, going to (future), simple past, imperative",wordRange:"4-7 words",distractors:"2-3 distractors"},intermediate:{tenses:"present perfect, present perfect continuous, past continuous, will future, first conditional, second conditional, modals (can, must, should), used to",wordRange:"5-9 words",distractors:"3-4 distractors"},advanced:{tenses:"past perfect, third conditional, passive voice, reported speech, subjunctive, comparatives and superlatives",wordRange:"6-12 words",distractors:"4-6 distractors"}};function Ke(s){return s[Math.floor(Math.random()*s.length)]}const Jo=["I","you","he","she","we","they","my friend","the students","my parents","the dog","our teacher","the children"],Qo={"daily routine":["I","my sister","my brother","we","my roommate","my mom","the neighbors"],travel:["the tourists","we","my family","the pilot","the passengers","she","the guide"],work:["the manager","my colleague","we","the intern","the boss","the employees","I"],food:["the chef","my grandmother","we","the waiter","I","the customers","she"],sports:["the coach","the players","she","the team","my brother","the athlete","we"],shopping:["the customer","I","she","the cashier","we","my friend","they"],family:["my parents","the children","my uncle","we","my grandmother","the cousins","she"],health:["the doctor","the patient","I","the nurse","my dentist","she","we"],technology:["the programmer","I","the users","we","the app","she","the company"],hobbies:["I","my friend","she","we","the artist","the musician","they"],weather:["it","the forecast","we","the storm","the temperature","they","I"],school:["the teacher","the students","I","we","the professor","she","the class"],nature:["the animals","the birds","we","the river","the trees","I","the hikers"],"dev meetings & scrum":["the team","the developer","the scrum master","the product owner","we","the QA engineer","the tech lead","the intern","the backend team","the designer"],"software engineering":["the developer","the architect","we","the API","the server","the database","the frontend","the microservice","the application","the system","the engineer","the DevOps team"]},Xo={"daily routine":["wake up","eat","commute","cook","clean","shower","exercise","sleep","brush","prepare"],travel:["fly","book","explore","pack","visit","arrive","depart","check in","tour","discover"],work:["manage","present","schedule","hire","negotiate","organize","delegate","approve","submit","collaborate"],food:["cook","taste","bake","order","serve","chop","mix","fry","grill","prepare"],sports:["score","train","compete","win","practice","run","swim","kick","throw","defend"],shopping:["buy","return","compare","choose","pay","browse","try on","sell","exchange","discount"],family:["celebrate","visit","gather","support","raise","share","remember","call","help","invite"],health:["exercise","prescribe","diagnose","recover","check","treat","rest","breathe","stretch","heal"],technology:["download","update","code","stream","install","connect","browse","debug","upload","sync"],hobbies:["paint","play","collect","read","build","photograph","draw","sing","garden","craft"],weather:["rain","snow","blow","freeze","shine","warm up","cool down","forecast","clear up","flood"],school:["study","teach","learn","write","graduate","enroll","pass","fail","research","present"],nature:["grow","bloom","migrate","hike","flow","climb","observe","protect","plant","explore"],"dev meetings & scrum":["deploy","review","estimate","refactor","prioritize","demo","block","assign","sprint","release"],"software engineering":["compile","deploy","refactor","debug","optimize","authenticate","query","cache","scale","integrate"]},Go={"daily routine":"Use vocabulary related to everyday activities. Examples: alarm, breakfast, commute, shower, coffee, lunch, chores, dinner, homework, bedtime ‚Äî but feel free to use any other related vocabulary.",travel:"Use vocabulary related to travel and tourism. Examples: airport, passport, luggage, hotel, reservation, boarding pass, destination, souvenir, itinerary, customs ‚Äî but feel free to use any other related vocabulary.",work:"Use vocabulary related to the workplace. Examples: office, meeting, deadline, presentation, salary, promotion, colleague, project, report, client ‚Äî but feel free to use any other related vocabulary.",food:"Use vocabulary related to food and cooking. Examples: recipe, ingredient, restaurant, menu, appetizer, dessert, spice, oven, portion, reservation ‚Äî but feel free to use any other related vocabulary.",sports:"Use vocabulary related to sports and athletics. Examples: match, score, goal, referee, championship, training, stadium, opponent, league, medal ‚Äî but feel free to use any other related vocabulary.",shopping:"Use vocabulary related to shopping. Examples: store, price, discount, receipt, size, brand, cart, sale, fitting room, checkout ‚Äî but feel free to use any other related vocabulary.",family:"Use vocabulary related to family life. Examples: reunion, birthday, sibling, relative, tradition, wedding, generation, childhood, holiday, gathering ‚Äî but feel free to use any other related vocabulary.",health:"Use vocabulary related to health and wellness. Examples: doctor, patient, medicine, prescription, symptom, diagnosis, appointment, recovery, therapy, vitamins ‚Äî but feel free to use any other related vocabulary.",technology:"Use vocabulary related to technology and digital life. Examples: app, smartphone, software, internet, password, notification, device, screen, update, wireless ‚Äî but feel free to use any other related vocabulary.",hobbies:"Use vocabulary related to hobbies and leisure. Examples: guitar, canvas, puzzle, garden, stamp, chess, pottery, photography, knitting, workshop ‚Äî but feel free to use any other related vocabulary.",weather:"Use vocabulary related to weather and climate. Examples: temperature, forecast, umbrella, cloudy, sunshine, thunder, humidity, breeze, drought, season ‚Äî but feel free to use any other related vocabulary.",school:"Use vocabulary related to education. Examples: classroom, exam, homework, grade, campus, lecture, textbook, semester, scholarship, assignment ‚Äî but feel free to use any other related vocabulary.",nature:"Use vocabulary related to nature and the outdoors. Examples: forest, mountain, river, wildlife, trail, ocean, sunset, meadow, waterfall, ecosystem ‚Äî but feel free to use any other related vocabulary.","dev meetings & scrum":"Use vocabulary related to agile/scrum and dev team workflows. Examples include standup, sprint, backlog, blocker, retrospective, code review, deploy, pull request, ticket, demo, velocity, release, branch, merge ‚Äî but feel free to use any other related vocabulary.","software engineering":"Use vocabulary related to software development and infrastructure. Examples include API, database, server, cloud, Docker, cache, endpoint, query, schema, microservice, pipeline, authentication, deployment ‚Äî but feel free to use any other related vocabulary."};function Yo(s,e="random",t,a=[],r){const n=$o[s],o=n.tenses.split(", "),i=t||Ke(o),c=e==="random"?Ke(tn):e,m=Qo[c]||Jo,v=Ke(m),_=Go[c]||"",b=Xo[c],f=b?Ke(b):void 0,S=Ke(r?["interrogative","interrogative","negative-interrogative"]:["affirmative","negative"]),T=a.length>0?`
DO NOT generate any of these sentences (or similar ones):
${a.map(h=>`- "${h}"`).join(`
`)}
You MUST create a completely different sentence with a different subject, verb, and complement.
`:"";return`You are a grammar exercise generator for English learners. Generate ONE exercise.

DIFFICULTY: ${s}
TENSE TO USE: ${i}
TOPIC: ${c}${_?`
TOPIC VOCABULARY: ${_}`:""}
SENTENCE LENGTH: ${n.wordRange}
DISTRACTORS: ${n.distractors}
SUGGESTED SUBJECT: ${v} (use this or a similar subject)${f?`
SUGGESTED VERB: ${f} (use this or a similar verb related to the topic)`:""}
SENTENCE FORM: ${S}${S==="interrogative"?" (you MUST generate a question, not a statement)":S==="negative-interrogative"?` (you MUST generate a NEGATIVE QUESTION, e.g. "Don't you like coffee?", "Hasn't she finished?". Set isNegative: true AND isQuestion: true)`:""}
${i==="reported speech"?`REPORTED SPEECH VARIETY: You MUST pick ONE of these reported speech patterns:
- Reported statements with backshift: "She said that she was tired." (present‚Üípast)
- Reported statements with past perfect backshift: "He said he had finished." (past‚Üípast perfect)
- Reported statements with would backshift: "They said they would come." (will‚Üíwould)
- Reported statements with could backshift: "She said she could swim." (can‚Üícould)
- Reported questions with if/whether: "He asked if I was coming."
- Reported questions with wh-word: "She asked where I lived."
- Reported commands/requests: "He told me to wait." / "She asked me not to run."
- Reported speech with varied verbs: explained, admitted, denied, promised, warned, suggested, complained, insisted, announced, mentioned
- Reported speech with past perfect continuous: "You said you had been collecting stamps for years."
Do NOT always default to "said + past perfect". Mix it up!

REPORTED SPEECH TENSE LABEL: Based on the pattern you chose, set metadata.tense to ONE of these exact values:
- "reported speech" ‚Äî for reported statements (backshift of any kind)
- "reported speech: questions" ‚Äî for reported questions (asked if/whether/wh-)
- "reported speech: commands" ‚Äî for reported commands/requests (told/asked + to)
- "reported speech: reporting verbs" ‚Äî for sentences using verbs other than said/told (explained, admitted, denied, promised, warned, suggested, etc.)`:""}
${i==="imperative"?`IMPERATIVE INSTRUCTIONS: Generate a command, instruction, or request. Imperatives use the base form of the verb with NO subject.
Examples: "Close the door", "Be quiet", "Don't touch that", "Please sit down", "Turn off the lights"
- For negative imperatives use "Don't" or "Do not": "Don't run in the hallway"
- You can optionally add "Please" for polite requests: "Please open the window"
- The Sujeto hint should say "impl√≠cito (t√∫/usted)" since imperatives have no explicit subject.
- Set metadata.isNegative to true if using "Don't/Do not".`:""}
${i==="present perfect continuous"?`PRESENT PERFECT CONTINUOUS INSTRUCTIONS: Use have/has + been + verb-ing to express actions that started in the past and continue to the present, or recently stopped.
Examples: "She has been studying for three hours", "They have been waiting since morning", "I have been working all day"
- Use time expressions like "for", "since", "all day", "lately", "recently"`:""}
${i==="second conditional"?`SECOND CONDITIONAL INSTRUCTIONS: Express unreal/hypothetical present or future situations.
Structure: If + past simple, would + base verb
Examples: "If I had more money, I would travel the world", "If she spoke French, she would move to Paris"
- Use "were" instead of "was" for formal/correct usage: "If I were you, I would study harder"
- The condition is UNREAL (not likely to happen)`:""}
${i==="used to"?`USED TO INSTRUCTIONS: Express past habits or states that are no longer true.
Structure: Subject + used to + base verb
Examples: "I used to play football every weekend", "She used to live in London", "They used to be friends"
- "Used to" indicates something was true in the past but NOT anymore
- For negatives: "didn't use to" (no -d on "use")
- For questions: "Did you use to...?"`:""}
${i==="comparatives and superlatives"?`COMPARATIVES AND SUPERLATIVES INSTRUCTIONS: Generate a sentence using either a comparative or superlative form.
Comparatives: adjective + -er + than / more + adjective + than
Superlatives: the + adjective + -est / the most + adjective
Examples: "This book is more interesting than that one", "She is taller than her brother", "This is the most beautiful park in the city", "He is the fastest runner on the team"
- Short adjectives (1 syllable): -er/-est (tall‚Üítaller‚Üítallest)
- Long adjectives (2+ syllables): more/most (interesting‚Üímore interesting‚Üímost interesting)
- Irregular: good‚Üíbetter‚Üíbest, bad‚Üíworse‚Üíworst, far‚Üífarther‚Üífarthest`:""}
${T}

INSTRUCTIONS:
1. Use the specified tense and topic above. Be creative and generate a unique sentence.
2. FIRST write the correct English sentence (correctSentence). This is the source of truth for the entire exercise.
3. THEN write "spanishSentence": the full, natural Spanish translation of correctSentence. This must be a complete, grammatically correct sentence in Spanish (not a list of hints).
4. THEN create conceptual hints ENTIRELY IN SPANISH that describe ONLY what is in the correctSentence:
   - Sujeto: describe the subject in Spanish (e.g., "ella", "mis padres", "un perro")
   - Verbo: the verb in Spanish infinitive (e.g., "cocinar", "ir", "estudiar")
     MODAL VERBS RULE: When the sentence uses a modal verb, DO NOT just say "poder". Be specific:
     - can ‚Üí "poder (habilidad)"
     - could ‚Üí "podr√≠a (posibilidad/pasado)"
     - should ‚Üí "deber√≠a (consejo)"
     - must ‚Üí "deber (obligaci√≥n)"
     - might ‚Üí "podr√≠a/quiz√°s (posibilidad)"
     - may ‚Üí "poder (permiso/posibilidad)"
     Always include the main verb too, e.g., "deber√≠a (consejo) + enviar", "poder (habilidad) + nadar"
   - Complemento: describe the complement in Spanish (e.g., "en el parque", "una carta", "con sus amigos")
   - Tiempo: time expression in Spanish (e.g., "ayer", "todos los d√≠as", "ahora mismo")
   NEVER use English words in the hints ‚Äî EXCEPT for technical jargon that developers use in Spanish without translating (e.g., "pull request", "sprint", "deploy", "bug", "backlog", "standup", "branch", "merge", "pipeline", "scrum master"). These terms should stay in English in the hints because that's how Spanish speakers actually use them.
5. Break the correctSentence into individual word cards (one card per word).
6. Add ${n.distractors} that are plausible wrong choices.
7. Include a "translations" object mapping every word (lowercase) to its Spanish translation. Cover ALL correct words AND all distractors. Just provide the plain translation ‚Äî no extra notes, no "(incorrecto)", no tense labels.

CRITICAL CONSISTENCY RULE:
- The hints MUST describe EXACTLY the correctSentence ‚Äî nothing more, nothing less.
- Every concept mentioned in the hints MUST have corresponding words in correctSentence.
- The "Sujeto" hint MUST match the actual subject of correctSentence. Example of WRONG: Sujeto says "nosotros" but correctSentence is "Flowers do not bloom in winter" (the subject is "las flores", not "nosotros"). Double-check: who performs the action in correctSentence? That is the Sujeto.
- Example of WRONG: hints say "Complemento: en el gimnasio" but correctSentence is "My sister is going to exercise" (missing "at the gym").
- Example of CORRECT: hints say "Complemento: en el gimnasio" and correctSentence is "My sister is going to exercise at the gym".
- There must be exactly one card per word in correctSentence with isDistractor: false.

OTHER RULES:
- metadata.tense MUST be one of the allowed values for the tense (e.g. "reported speech", "reported speech: questions", etc.) ‚Äî do NOT invent labels like "reported speech (past perfect)" or "reported speech with could backshift"
- Each card has exactly ONE word (never two words in one card)
- No punctuation in card text (no periods, commas, etc.)
- NO duplicate words across cards. If a distractor would duplicate an existing card, pick a different distractor.
- The first word of the correct sentence should be capitalized
- Distractors should be tricky but fair (e.g., "goed" instead of "went", "in" instead of "at")
- For questions, use proper English question word order (auxiliary + subject + verb, or question word + auxiliary + subject + verb). Do NOT include question marks in cards.

Respond ONLY with valid JSON in this exact format, no markdown:
{
  "hints": ["Sujeto: ...", "Verbo: ...", "Complemento: ...", "Tiempo: ..."],
  "hintDisplay": "Sujeto: ... / Verbo: ... / Complemento: ... / Tiempo: ...",
  "spanishSentence": "La oraci√≥n completa en espa√±ol, natural y correcta",
  "correctSentence": "The full correct sentence",
  "cards": [
    {"id": "d1", "text": "distractor", "isDistractor": true},
    {"id": "c3", "text": "word3", "isDistractor": false},
    {"id": "c1", "text": "word1", "isDistractor": false},
    {"id": "c2", "text": "word2", "isDistractor": false}
  ],
  "translations": {
    "word1": "traducci√≥n1",
    "word2": "traducci√≥n2",
    "word3": "traducci√≥n3",
    "distractor": "traducci√≥n4"
  },
  "metadata": {
    "tense": "${i}",
    "isNegative": false,
    "isQuestion": false,
    "difficulty": "${s}",
    "topic": "daily routine"
  }
}

Use unique IDs like c1, c2... for correct words and d1, d2... for distractors. Remember: cards MUST be shuffled, not in sentence order.`}function Ko(s,e,t,a){return`You are an English grammar evaluator for Spanish-speaking learners.

CONTEXT:
- Grammar: ${e.tense}, ${e.isNegative?"negative":"affirmative"}
- Topic: ${e.topic}
- Difficulty: ${e.difficulty}
- Expected answer: "${t}"
- Student's answer: "${a}"

INSTRUCTIONS:
1. Compare the student's answer ONLY with the expected answer. The expected answer is the ONLY correct reference ‚Äî do not use the hints to judge correctness.
2. The answer is CORRECT if it conveys the same meaning with valid grammar, even if word order differs slightly or uses valid synonyms (e.g., "do not" vs "don't").
3. If incorrect, explain WHY in Spanish in a friendly, educational way.
4. Always include a brief grammar note in Spanish explaining the rule used.
5. The "correctSentence" field in your response MUST be exactly: "${t}" ‚Äî do not modify it.

Respond ONLY with valid JSON in this exact format, no markdown:
{
  "isCorrect": true,
  "feedback": "Brief feedback message in Spanish",
  "correctSentence": "${t}",
  "grammarNote": "Grammar explanation in Spanish about the tense/structure used"
}`}function Ns(s){return s instanceof Qe.APIConnectionError?"Sin conexi√≥n a internet. Verifica tu red e intenta de nuevo.":s instanceof Qe.APIError?s.status===529||s.status===503?"El servidor de Claude est√° sobrecargado. Intenta de nuevo en unos segundos.":s.status===401?"API key inv√°lida. Verifica tu clave.":s.status===429?"Demasiadas solicitudes. Espera un momento e intenta de nuevo.":s.status===400?"Error en la solicitud. Intenta de nuevo.":`Error del servidor (${s.status}). Intenta de nuevo.`:s instanceof Error?s.message.includes("fetch")||s.message.includes("network")||s.message.includes("Failed to fetch")?"Sin conexi√≥n a internet. Verifica tu red e intenta de nuevo.":s.message:"Error desconocido"}function dr(s){return new Qe({apiKey:s,dangerouslyAllowBrowser:!0})}function pr(s){const e=s.match(/```(?:json)?\s*([\s\S]*?)```/);return e?e[1].trim():s.trim()}function Zo(s){return s.replace(/[.,!?;:]+$/g,"").trim().split(/\s+/).map(e=>e.replace(/[.,!?;:]+$/,"").trim()).filter(Boolean)}function ei(s,e,t){const a=e.replace(/[.,!?;:]+/g,"").split(/\s+/).filter(Boolean),r=a.map((m,v)=>({id:`c${v+1}`,text:m,isDistractor:!1,translation:t?.[m.toLowerCase()]})),n=new Set(a.map(m=>m.toLowerCase())),o=[],i=new Set;let c=1;for(const m of s){if(!m.isDistractor)continue;const v=Zo(m.text);for(const _ of v){const b=_.toLowerCase();i.has(b)||n.has(b)||(i.add(b),o.push({id:`d${c++}`,text:_,isDistractor:!0,translation:t?.[b]}))}}return[...r,...o]}function ti(s){const e=[...s];for(let t=e.length-1;t>0;t--){const a=Math.floor(Math.random()*(t+1));[e[t],e[a]]=[e[a],e[t]]}return e}async function hr(s,e,t="random",a,r=[],n){const o=dr(s),i=Yo(e,t,a,r,n),m=(await o.messages.create({model:"claude-haiku-4-5-20251001",max_tokens:1024,temperature:.5,messages:[{role:"user",content:i}]})).content[0];if(m.type!=="text")throw new Error("Unexpected response type");const v=JSON.parse(pr(m.text)),_=v.translations,b=v;if(b.metadata.tense.toLowerCase().includes("reported speech")){const f=b.metadata.tense.toLowerCase();f.includes("question")||f.includes("asked")||f.includes("if/whether")?b.metadata.tense="reported speech: questions":f.includes("command")||f.includes("request")||f.includes("order")||f.includes("told")&&f.includes("to")?b.metadata.tense="reported speech: commands":f.includes("reporting verb")||f.includes("explained")||f.includes("admitted")||f.includes("denied")||f.includes("promised")||f.includes("warned")||f.includes("suggested")||f.includes("complained")||f.includes("insisted")?b.metadata.tense="reported speech: reporting verbs":b.metadata.tense="reported speech"}return b.cards=ei(b.cards,b.correctSentence,_),b.metadata.isQuestion&&(b.cards.push({id:"qm",text:"?",isDistractor:!1,translation:"signo de interrogaci√≥n"}),b.correctSentence=b.correctSentence.replace(/\?$/,"").trim()+" ?"),b.cards=ti(b.cards),b}async function si(s,e,t,a,r){const n=dr(s),o=Ko(e,t,a,r),c=(await n.messages.create({model:"claude-haiku-4-5-20251001",max_tokens:512,messages:[{role:"user",content:o}]})).content[0];if(c.type!=="text")throw new Error("Unexpected response type");return JSON.parse(pr(c.text))}let $e=null;function Nt(){return $e||($e=new AudioContext),$e.state==="suspended"&&$e.resume(),$e}function yt(s,e,t="sine",a=.15){const r=Nt(),n=r.createOscillator(),o=r.createGain();n.type=t,n.frequency.value=s,o.gain.setValueAtTime(a,r.currentTime),o.gain.exponentialRampToValueAtTime(.001,r.currentTime+e),n.connect(o),o.connect(r.destination),n.start(r.currentTime),n.stop(r.currentTime+e)}function ai(){const s=Nt(),e=s.createOscillator(),t=s.createGain();e.type="sine",e.frequency.setValueAtTime(600,s.currentTime),e.frequency.exponentialRampToValueAtTime(900,s.currentTime+.06),t.gain.setValueAtTime(.12,s.currentTime),t.gain.exponentialRampToValueAtTime(.001,s.currentTime+.1),e.connect(t),t.connect(s.destination),e.start(s.currentTime),e.stop(s.currentTime+.1)}function ri(){const s=Nt(),e=s.createOscillator(),t=s.createGain();e.type="sine",e.frequency.setValueAtTime(800,s.currentTime),e.frequency.exponentialRampToValueAtTime(500,s.currentTime+.08),t.gain.setValueAtTime(.1,s.currentTime),t.gain.exponentialRampToValueAtTime(.001,s.currentTime+.1),e.connect(t),t.connect(s.destination),e.start(s.currentTime),e.stop(s.currentTime+.1)}function ni(){Nt().currentTime,yt(523,.15,"sine",.15),setTimeout(()=>yt(659,.15,"sine",.15),100),setTimeout(()=>yt(784,.15,"sine",.15),200),setTimeout(()=>yt(1047,.3,"sine",.18),300),setTimeout(()=>yt(1319,.4,"triangle",.08),400)}function oi(){const s=Nt(),e=s.createOscillator(),t=s.createGain();e.type="sawtooth",e.frequency.setValueAtTime(350,s.currentTime),e.frequency.linearRampToValueAtTime(300,s.currentTime+.2),e.frequency.linearRampToValueAtTime(250,s.currentTime+.5),e.frequency.linearRampToValueAtTime(180,s.currentTime+.8),t.gain.setValueAtTime(.1,s.currentTime),t.gain.setValueAtTime(.1,s.currentTime+.15),t.gain.linearRampToValueAtTime(.03,s.currentTime+.25),t.gain.linearRampToValueAtTime(.1,s.currentTime+.35),t.gain.linearRampToValueAtTime(.03,s.currentTime+.5),t.gain.linearRampToValueAtTime(.08,s.currentTime+.6),t.gain.exponentialRampToValueAtTime(.001,s.currentTime+.9),e.connect(t),t.connect(s.destination),e.start(s.currentTime),e.stop(s.currentTime+.9)}var ii=I('<!> <div class="actions svelte-9e286u"><button class="clear-btn svelte-9e286u">Limpiar</button> <button class="submit-btn svelte-9e286u">Verificar</button></div>',1),li=I('<div class="loading-eval svelte-9e286u"><p>Evaluando tu respuesta...</p></div>'),ci=I("<!> <!> <!> <!> <!>",1),ui=I('<button class="svelte-9e286u">Cerrar</button>'),di=I('<button class="svelte-9e286u">Reintentar</button> <button class="change-key-btn svelte-9e286u">Volver</button>',1),pi=I('<div class="error-msg svelte-9e286u"><p class="svelte-9e286u"> </p> <div class="error-actions svelte-9e286u"><!> <button class="change-key-btn svelte-9e286u">Cambiar API key</button></div></div>'),hi=I('<div class="game-board svelte-9e286u"><!> <!> <!></div>');function mi(s,e){Pe(e,!0);const t=me(Wn),a=me(Fn),r=me(Na),n=me(Bn),o=me(Hn),i=me(so),c=me(Ca),m=me(ao);let v=B(!1),_=B("");function b(N){ai(),Zn(N)}function f(N){ri(),eo(N)}async function S(){if(!(!l(t)||!l(m).trim())){k(v,!0),k(_,l(m),!0),Ee("submitted");try{const N=await si(Qs(),l(t).hints,l(t).metadata,l(t).correctSentence,l(m));Kn(N),N.isCorrect?(ni(),setTimeout(()=>ks(l(_)),800)):oi(),Ee("feedback")}catch(N){_t(Ns(N)),Ee("playing")}finally{k(v,!1)}}}async function T(){Aa(),Ee("loading");try{const N=await hr(Qs(),On(),Ln(),Un(),Vn(),zn());Ma(N),Ee("playing")}catch(N){_t(Ns(N)),Ee("playing")}}var h=hi(),y=p(h);Dn(y,{get session(){return l(a)},get onback(){return Xs}});var w=g(y,2);{var M=N=>{var q=ci(),H=Gt(q);_n(H,{get hintDisplay(){return l(t).hintDisplay},get spanishSentence(){return l(t).spanishSentence},get metadata(){return l(t).metadata}});var Q=g(H,2);Pn(Q,{get cards(){return l(c)},ondeselect:f});var D=g(Q,2);{var Y=F=>{var j=ii(),C=Gt(j);Rn(C,{get cards(){return l(i)},onselect:b});var O=g(C,2),oe=p(O);oe.__click=function(...xe){to?.apply(this,xe)};var X=g(oe,2);X.__click=S,d(O),V(()=>{oe.disabled=l(c).length===0,X.disabled=l(c).length===0}),P(F,j)};$(D,F=>{l(r)==="playing"&&F(Y)})}var K=g(D,2);{var ae=F=>{var j=li();P(F,j)};$(K,F=>{l(r)==="submitted"&&F(ae)})}var Ie=g(K,2);{var re=F=>{An(F,{get result(){return l(n)},get correctSentence(){return l(t).correctSentence},get userSentence(){return l(_)},onnext:T})};$(Ie,F=>{l(r)==="feedback"&&l(n)&&F(re)})}P(N,q)};$(w,N=>{l(t)&&N(M)})}var A=g(w,2);{var W=N=>{var q=pi(),H=p(q),Q=p(H,!0);d(H);var D=g(H,2),Y=p(D);{var K=re=>{var F=ui();F.__click=()=>_t(null),P(re,F)},ae=re=>{var F=di(),j=Gt(F);j.__click=()=>{_t(null),T()};var C=g(j,2);C.__click=function(...O){Xs?.apply(this,O)},P(re,F)};$(Y,re=>{l(t)?re(K):re(ae,!1)})}var Ie=g(Y,2);Ie.__click=()=>{localStorage.removeItem("grammar_game_api_key"),location.reload()},d(D),d(q),V(()=>E(Q,l(o))),P(N,q)};$(A,N=>{l(o)&&N(W)})}d(h),P(s,h),je()}De(["click"]);var fi=I('<div class="tense-detail svelte-14kz89h"><span class="detail-label svelte-14kz89h">Estructura</span> <p class="detail-text svelte-14kz89h"> </p></div>'),gi=I('<th class="svelte-14kz89h"> </th>'),vi=I('<td class="svelte-14kz89h"> </td>'),bi=I('<tr class="svelte-14kz89h"></tr>'),yi=I('<details class="table-collapsible svelte-14kz89h"><summary class="table-toggle svelte-14kz89h"> </summary> <div class="table-detail svelte-14kz89h"><table class="verb-table svelte-14kz89h"><thead><tr></tr></thead><tbody class="svelte-14kz89h"></tbody></table></div></details>'),wi=I('<details class="tense-card svelte-14kz89h"><summary class="tense-name svelte-14kz89h"> </summary> <div class="tense-content svelte-14kz89h"><p class="tense-desc svelte-14kz89h"> </p> <!> <div class="tense-detail example svelte-14kz89h"><span class="detail-label svelte-14kz89h">Ejemplo</span> <p class="detail-text svelte-14kz89h"> </p> <p class="detail-text-es svelte-14kz89h"> </p></div> <div class="tense-detail tip svelte-14kz89h"><span class="detail-label svelte-14kz89h">Tip</span> <p class="detail-text svelte-14kz89h"> </p></div> <!></div></details>'),_i=I('<div class="section svelte-14kz89h"><h3 class="section-title svelte-14kz89h"> </h3> <!></div>'),xi=I('<div class="glossary svelte-14kz89h"><div class="glossary-header svelte-14kz89h"><button class="close-btn svelte-14kz89h" aria-label="Cerrar glosario"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg></button> <h2 class="glossary-title svelte-14kz89h">Glosario gramatical</h2></div> <!></div>');function Si(s,e){const t={Fundamentos:"#6b7280",Principiante:"#e85d04",Intermedio:"#e85d04",Avanzado:"#d00000",Preguntas:"#1a56db"};var a=xi(),r=p(a),n=p(r);n.__click=function(...i){e.onclose?.apply(this,i)},qe(2),d(r);var o=g(r,2);be(o,17,()=>at,Me,(i,c)=>{var m=_i(),v=p(m),_=p(v,!0);d(v);var b=g(v,2);be(b,17,()=>l(c).tenses,Me,(f,S)=>{var T=wi(),h=p(T),y=p(h,!0);d(h);var w=g(h,2),M=p(w),A=p(M,!0);d(M);var W=g(M,2);{var N=j=>{var C=fi(),O=g(p(C),2),oe=p(O,!0);d(O),d(C),V(()=>E(oe,l(S).structure)),P(j,C)};$(W,j=>{l(S).structure&&j(N)})}var q=g(W,2),H=g(p(q),2),Q=p(H,!0);d(H);var D=g(H,2),Y=p(D,!0);d(D),d(q);var K=g(q,2),ae=g(p(K),2),Ie=p(ae,!0);d(ae),d(K);var re=g(K,2);{var F=j=>{var C=yi(),O=p(C),oe=p(O);d(O);var X=g(O,2),xe=p(X),Z=p(xe),fe=p(Z);be(fe,21,()=>l(S).table.headers,Me,(ee,te)=>{var ie=gi(),ue=p(ie,!0);d(ie),V(()=>E(ue,l(te))),P(ee,ie)}),d(fe),d(Z);var Le=g(Z);be(Le,21,()=>l(S).table.rows,Me,(ee,te)=>{var ie=bi();be(ie,21,()=>l(te),Me,(ue,Ve)=>{var de=vi(),Se=p(de,!0);d(de),V(()=>E(Se,l(Ve))),P(ue,de)}),d(ie),P(ee,ie)}),d(Le),d(xe),d(X),d(C),V(()=>E(oe,`Ver lista completa (${l(S).table.rows.length??""} verbos)`)),P(j,C)};$(re,j=>{l(S).table&&j(F)})}d(w),d(T),V(()=>{E(y,l(S).name),E(A,l(S).description),E(Q,l(S).example),E(Y,l(S).exampleEs),E(Ie,l(S).tip)}),P(f,T)}),d(m),V(()=>{Xr(v,`color: ${t[l(c).level]??""}`),E(_,l(c).level)}),P(i,m)}),d(a),P(s,a)}De(["click"]);var ki=I(`<div class="dedication svelte-kt5d72"><button class="back-btn svelte-kt5d72"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-kt5d72"><path d="M19 12H5" class="svelte-kt5d72"></path><path d="M12 19l-7-7 7-7" class="svelte-kt5d72"></path></svg></button> <div class="heart-big svelte-kt5d72">üß°</div> <h2 class="title svelte-kt5d72">Dedicatoria</h2> <div class="message svelte-kt5d72"><p class="svelte-kt5d72">Dedicado a mis hijos <strong class="svelte-kt5d72">Anaelle</strong> y <strong class="svelte-kt5d72">David</strong>,
			a mis padres <strong class="svelte-kt5d72">Reinaldo</strong> y <strong class="svelte-kt5d72">Nelcy</strong>,
			a mi hermanita <strong class="svelte-kt5d72">Jeje</strong>,
			a toda mi familia <strong class="svelte-kt5d72">Dominguez</strong> y <strong class="svelte-kt5d72">Castiblanco</strong>,
			y por ultimo pero no menos importante,
			a mi bella esposa <strong class="svelte-kt5d72">Olga Lucia</strong>.</p> <p class="svelte-kt5d72">Que este jueguito sea una entretencion sana,
			les ayude a dominar el idioma
			y les mantenga la mente saludable y en forma.</p></div> <div class="decoration svelte-kt5d72"><span class="svelte-kt5d72">~</span> <span class="svelte-kt5d72">üß°</span> <span class="svelte-kt5d72">~</span></div> <p class="signature svelte-kt5d72">Con todo mi amor, Diego</p></div>`);function Ei(s,e){var t=ki(),a=p(t);a.__click=function(...r){e.onclose?.apply(this,r)},qe(10),d(t),P(s,t)}De(["click"]);var Ti=I('<div class="loading-screen svelte-1uha8ag"><div class="spinner svelte-1uha8ag"></div> <p>Generando ejercicio...</p></div>');function Di(s,e){Pe(e,!0);const t=me(Na);let a=B(!1),r=B(!1),n=B(!1);gr(()=>{Jn()&&k(a,!0)});function o(w){$n(w),k(a,!0)}async function i(w,M,A,W){Qn(w),Xn(M),Gn(A),Yn(W??!1),Aa(),Ee("loading");try{const N=await hr(m(),w,M,A,[],W);Ma(N),Ee("playing")}catch(N){_t(Ns(N)),Ee("playing")}}function c(){localStorage.removeItem("grammar_game_api_key"),k(a,!1),Ee("setup")}function m(){return localStorage.getItem("grammar_game_api_key")??""}var v=fr(),_=Gt(v);{var b=w=>{Zr(w,{onsave:o})},f=w=>{Si(w,{onclose:()=>k(r,!1)})},S=w=>{Ei(w,{onclose:()=>k(n,!1)})},T=w=>{ln(w,{onselect:i,onglossary:()=>k(r,!0),ondedication:()=>k(n,!0),onchangekey:c})},h=w=>{var M=Ti();P(w,M)},y=w=>{mi(w,{})};$(_,w=>{l(t)==="setup"&&!l(a)?w(b):l(t)==="setup"&&l(a)&&l(r)?w(f,1):l(t)==="setup"&&l(a)&&l(n)?w(S,2):l(t)==="setup"&&l(a)?w(T,3):l(t)==="loading"?w(h,4):w(y,!1)})}P(s,v),je()}export{Di as component};
