import{a as P,f as N,d as Un,c as ss}from"../chunks/BIg0sYn1.js";import{o as zn}from"../chunks/CJFNuX6i.js";import{h as Re,x as ba,W as Hn,e as ya,o as Wn,n as Fn,B as o,t as Vn,v as Bn,w as ns,y as wa,i as Ht,a2 as $n,aO as Qn,az as rs,c as lt,f as Aa,aV as Gn,s as Jn,aW as zs,R as Xn,aX as Yn,aM as Ba,aY as Kn,am as os,aZ as Zn,a_ as er,aR as tr,a$ as Be,r as Hs,p as Ws,b0 as _a,q as ar,b1 as sr,b2 as nr,aL as rr,d as or,a3 as ir,b3 as lr,aS as cr,k as ur,al as dr,b4 as pr,ai as je,a8 as h,a9 as d,D as I,ab as c,a5 as Se,a6 as V,aj as Ne,aT as J,aU as K,C as da,a4 as at}from"../chunks/xRZkEjnd.js";import{i as Q,p as hr}from"../chunks/BtEb-poF.js";import{d as Oe,s as k,e as Fs}from"../chunks/CRTnJ9BO.js";import{r as is,s as ls}from"../chunks/Df0M1iNH.js";function be(a,e){return e}function mr(a,e,t){for(var s=[],n=e.length,r,l=e.length,i=0;i<n;i++){let x=e[i];Ws(x,()=>{if(r){if(r.pending.delete(x),r.done.add(x),r.pending.size===0){var _=a.outrogroups;Ma(Ba(r.done)),_.delete(r),_.size===0&&(a.outrogroups=null)}}else l-=1},!1)}if(l===0){var u=s.length===0&&t!==null;if(u){var m=t,v=m.parentNode;rr(v),v.append(m),a.items.clear()}Ma(e,!u)}else r={pending:new Set(e),done:new Set},(a.outrogroups??=new Set).add(r)}function Ma(a,e=!0){for(var t=0;t<a.length;t++)or(a[t],e)}var cs;function me(a,e,t,s,n,r=null){var l=a,i=new Map,u=(e&zs)!==0;if(u){var m=a;l=Re?ba(Hn(m)):m.appendChild(ya())}Re&&Wn();var v=null,x=Xn(()=>{var y=t();return Yn(y)?y:y==null?[]:Ba(y)}),_,g=!0;function S(){f.fallback=v,fr(f,_,l,e,s),v!==null&&(_.length===0?(v.f&Be)===0?Hs(v):(v.f^=Be,jt(v,null,l)):Ws(v,()=>{v=null}))}var M=Fn(()=>{_=o(x);var y=_.length;let T=!1;if(Re){var W=Vn(l)===Bn;W!==(y===0)&&(l=ns(),ba(l),wa(!1),T=!0)}for(var F=new Set,A=lt,b=Jn(),w=0;w<y;w+=1){Re&&Ht.nodeType===$n&&Ht.data===Qn&&(l=Ht,T=!0,wa(!1));var j=_[w],E=s(j,w),C=g?null:i.get(E);C?(C.v&&rs(C.v,j),C.i&&rs(C.i,w),b&&A.unskip_effect(C.e)):(C=vr(i,g?l:cs??=ya(),j,E,w,n,e,t),g||(C.e.f|=Be),i.set(E,C)),F.add(E)}if(y===0&&r&&!v&&(g?v=Aa(()=>r(l)):(v=Aa(()=>r(cs??=ya())),v.f|=Be)),y>F.size&&Gn(),Re&&y>0&&ba(ns()),!g)if(b){for(const[D,G]of i)F.has(D)||A.skip_effect(G.e);A.oncommit(S),A.ondiscard(()=>{})}else S();T&&wa(!0),o(x)}),f={effect:M,items:i,outrogroups:null,fallback:v};g=!1,Re&&(l=Ht)}function mt(a){for(;a!==null&&(a.f&sr)===0;)a=a.next;return a}function fr(a,e,t,s,n){var r=(s&nr)!==0,l=e.length,i=a.items,u=mt(a.effect.first),m,v=null,x,_=[],g=[],S,M,f,y;if(r)for(y=0;y<l;y+=1)S=e[y],M=n(S,y),f=i.get(M).e,(f.f&Be)===0&&(f.nodes?.a?.measure(),(x??=new Set).add(f));for(y=0;y<l;y+=1){if(S=e[y],M=n(S,y),f=i.get(M).e,a.outrogroups!==null)for(const C of a.outrogroups)C.pending.delete(f),C.done.delete(f);if((f.f&Be)!==0)if(f.f^=Be,f===u)jt(f,null,t);else{var T=v?v.next:u;f===a.effect.last&&(a.effect.last=f.prev),f.prev&&(f.prev.next=f.next),f.next&&(f.next.prev=f.prev),Qe(a,v,f),Qe(a,f,T),jt(f,T,t),v=f,_=[],g=[],u=mt(v.next);continue}if((f.f&_a)!==0&&(Hs(f),r&&(f.nodes?.a?.unfix(),(x??=new Set).delete(f))),f!==u){if(m!==void 0&&m.has(f)){if(_.length<g.length){var W=g[0],F;v=W.prev;var A=_[0],b=_[_.length-1];for(F=0;F<_.length;F+=1)jt(_[F],W,t);for(F=0;F<g.length;F+=1)m.delete(g[F]);Qe(a,A.prev,b.next),Qe(a,v,A),Qe(a,b,W),u=W,v=b,y-=1,_=[],g=[]}else m.delete(f),jt(f,u,t),Qe(a,f.prev,f.next),Qe(a,f,v===null?a.effect.first:v.next),Qe(a,v,f),v=f;continue}for(_=[],g=[];u!==null&&u!==f;)(m??=new Set).add(u),g.push(u),u=mt(u.next);if(u===null)continue}(f.f&Be)===0&&_.push(f),v=f,u=mt(f.next)}if(a.outrogroups!==null){for(const C of a.outrogroups)C.pending.size===0&&(Ma(Ba(C.done)),a.outrogroups?.delete(C));a.outrogroups.size===0&&(a.outrogroups=null)}if(u!==null||m!==void 0){var w=[];if(m!==void 0)for(f of m)(f.f&_a)===0&&w.push(f);for(;u!==null;)(u.f&_a)===0&&u!==a.fallback&&w.push(u),u=mt(u.next);var j=w.length;if(j>0){var E=(s&zs)!==0&&l===0?t:null;if(r){for(y=0;y<j;y+=1)w[y].nodes?.a?.measure();for(y=0;y<j;y+=1)w[y].nodes?.a?.fix()}mr(a,w,E)}}r&&ar(()=>{if(x!==void 0)for(f of x)f.nodes?.a?.apply()})}function vr(a,e,t,s,n,r,l,i){var u=(l&Zn)!==0?(l&er)===0?tr(t,!1,!1):os(t):null,m=(l&Kn)!==0?os(n):null;return{v:u,i:m,e:Aa(()=>(r(e,u??t,m??n,i),()=>{a.delete(s)}))}}function jt(a,e,t){if(a.nodes)for(var s=a.nodes.start,n=a.nodes.end,r=e&&(e.f&Be)===0?e.nodes.start:t;s!==null;){var l=ir(s);if(r.before(s),s===n)return;s=l}}function Qe(a,e,t){e===null?a.effect.first=t:e.next=t,t===null?a.effect.last=e:t.prev=e}const us=[...` 	
\r\fÂ \v\uFEFF`];function gr(a,e,t){var s=a==null?"":""+a;if(e&&(s=s?s+" "+e:e),t){for(var n in t)if(t[n])s=s?s+" "+n:n;else if(s.length)for(var r=n.length,l=0;(l=s.indexOf(n,l))>=0;){var i=l+r;(l===0||us.includes(s[l-1]))&&(i===s.length||us.includes(s[i]))?s=(l===0?"":s.substring(0,l))+s.substring(i+1):l=i}}return s===""?null:s}function br(a,e){return a==null?null:String(a)}function Ue(a,e,t,s,n,r){var l=a.__className;if(Re||l!==t||l===void 0){var i=gr(t,s,r);(!Re||i!==a.getAttribute("class"))&&(i==null?a.removeAttribute("class"):a.className=i),a.__className=t}else if(r&&n!==r)for(var u in r){var m=!!r[u];(n==null||m!==!!n[u])&&a.classList.toggle(u,m)}return r}function qa(a,e,t,s){var n=a.__style;if(Re||n!==e){var r=br(e);(!Re||r!==a.getAttribute("style"))&&(r==null?a.removeAttribute("style"):a.style.cssText=r),a.__style=e}return s}function ds(a,e,t=e){var s=new WeakSet;lr(a,"input",async n=>{var r=n?a.defaultValue:a.value;if(r=xa(a)?Sa(r):r,t(r),lt!==null&&s.add(lt),await cr(),r!==(r=e())){var l=a.selectionStart,i=a.selectionEnd,u=a.value.length;if(a.value=r??"",i!==null){var m=a.value.length;l===i&&i===u&&m>u?(a.selectionStart=m,a.selectionEnd=m):(a.selectionStart=l,a.selectionEnd=Math.min(i,m))}}}),(Re&&a.defaultValue!==a.value||ur(e)==null&&a.value)&&(t(xa(a)?Sa(a.value):a.value),lt!==null&&s.add(lt)),dr(()=>{var n=e();if(a===document.activeElement){var r=pr??lt;if(s.has(r))return}xa(a)&&n===Sa(a.value)||a.type==="date"&&!n&&!a.value||n!==a.value&&(a.value=n??"")})}function xa(a){var e=a.type;return e==="number"||e==="range"}function Sa(a){return a===""?null:+a}var yr=N('<input type="text" placeholder="sk-ant-..." class="api-input svelte-1s08ceg"/>'),wr=N('<input type="password" placeholder="sk-ant-..." class="api-input svelte-1s08ceg"/>'),_r=N('<div class="setup svelte-1s08ceg"><p class="subtitle svelte-1s08ceg">Aprende gramatica inglesa armando frases con tarjetas</p> <div class="card svelte-1s08ceg"><p class="instructions svelte-1s08ceg">Ingresa tu API key de Anthropic para comenzar:</p> <form class="svelte-1s08ceg"><div class="input-wrapper svelte-1s08ceg"><!> <button type="button" class="toggle-btn svelte-1s08ceg"> </button></div> <button type="submit" class="submit-btn svelte-1s08ceg">Guardar y continuar</button></form> <p class="note svelte-1s08ceg">Tu key se guarda solo en este navegador (localStorage).</p></div> <p class="footer svelte-1s08ceg">Hecho con ğŸ§¡ por <a class="author-link svelte-1s08ceg" href="https://www.linkedin.com/in/diegofdom/" target="_blank" rel="noopener noreferrer">Diego Dominguez</a></p></div>');function xr(a,e){je(e,!0);let t=J(""),s=J(!1);function n(){const M=o(t).trim();M&&e.onsave(M)}var r=_r(),l=h(d(r),2),i=h(d(l),2),u=d(i),m=d(u);{var v=M=>{var f=yr();is(f),ds(f,()=>o(t),y=>I(t,y)),P(M,f)},x=M=>{var f=wr();is(f),ds(f,()=>o(t),y=>I(t,y)),P(M,f)};Q(m,M=>{o(s)?M(v):M(x,!1)})}var _=h(m,2);_.__click=()=>I(s,!o(s));var g=d(_,!0);c(_),c(u);var S=h(u,2);c(i),Se(2),c(l),Se(2),c(r),V(M=>{k(g,o(s)?"Ocultar":"Mostrar"),S.disabled=M},[()=>!o(t).trim()]),Fs("submit",i,n),P(a,r),Ne()}Oe(["click"]);const Vs=[{id:"random",label:"Aleatorio",description:"Temas variados en cada ejercicio"},{id:"daily routine",label:"Rutina diaria",description:"Actividades del dÃ­a a dÃ­a"},{id:"travel",label:"Viajes",description:"Aeropuertos, hoteles, destinos"},{id:"work",label:"Trabajo",description:"Oficina, tareas, compaÃ±eros"},{id:"food",label:"Comida",description:"Restaurantes, recetas, cocina"},{id:"sports",label:"Deportes",description:"Partidos, entrenamiento, equipos"},{id:"shopping",label:"Compras",description:"Tiendas, precios, productos"},{id:"family",label:"Familia",description:"Padres, hijos, reuniones"},{id:"health",label:"Salud",description:"Doctor, ejercicio, bienestar"},{id:"technology",label:"TecnologÃ­a",description:"Apps, gadgets, internet"},{id:"hobbies",label:"Hobbies",description:"MÃºsica, lectura, juegos"},{id:"weather",label:"Clima",description:"Sol, lluvia, estaciones"},{id:"school",label:"Escuela",description:"Clases, exÃ¡menes, campus"},{id:"nature",label:"Naturaleza",description:"Animales, plantas, paisajes"},{id:"entertainment",label:"Entretenimiento",description:"PelÃ­culas, mÃºsica, series"}],Sr=[{id:"dev meetings & scrum",label:"Dev & Scrum",description:"Sprints, standups, PRs, deploys"},{id:"software engineering",label:"Software Dev",description:"CÃ³digo, arquitectura, cloud, APIs"},{id:"job interviews",label:"Entrevistas",description:"CV, preguntas, proceso de selecciÃ³n"}],kr=Vs.filter(a=>a.id!=="random").map(a=>a.id);function $a(){return typeof crypto<"u"&&crypto.randomUUID?$a():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,a=>{const e=Math.random()*16|0;return(a==="x"?e:e&3|8).toString(16)})}const Qa="grammar_game_failed_exercises",Bs="grammar_game_exercise_records",ps=500,hs=1e4;function $s(a){try{const e=localStorage.getItem(a);if(!e)return[];const t=JSON.parse(e);return Array.isArray(t)?t:[]}catch{return[]}}function Ga(a,e){localStorage.setItem(a,JSON.stringify(e))}function At(){return $s(Qa)}function Er(a,e){const t=At(),s={id:$a(),challenge:a,failedAt:new Date().toISOString(),userAnswer:e};t.push(s),t.length>ps&&t.splice(0,t.length-ps),Ga(Qa,t)}function Qs(a){const e=At().filter(t=>t.id!==a);Ga(Qa,e)}function Tr(){return At().length}function Gs(){return $s(Bs)}function Ir(a){const e=Gs(),t={id:$a(),timestamp:new Date().toISOString(),...a};e.push(t),e.length>hs&&e.splice(0,e.length-hs),Ga(Bs,e)}function Pr(a){const e=Gs();if(a==="all")return e;const t=new Date;let s;switch(a){case"day":s=new Date(t.getFullYear(),t.getMonth(),t.getDate());break;case"week":{const n=t.getDay(),r=n===0?6:n-1;s=new Date(t.getFullYear(),t.getMonth(),t.getDate()-r);break}case"month":s=new Date(t.getFullYear(),t.getMonth(),1);break;case"year":s=new Date(t.getFullYear(),0,1);break}return e.filter(n=>new Date(n.timestamp)>=s)}var jr=N("<button> </button>"),Nr=N("<button> </button>"),Cr=N('<button class="tense-badge svelte-ro4c24"> </button>'),Rr=N('<div class="level-card svelte-ro4c24" role="group"><button class="level-header svelte-ro4c24"><span class="level-label svelte-ro4c24"> </span> <span class="level-desc svelte-ro4c24"> </span></button> <div class="tense-badges svelte-ro4c24"><!> <button class="tense-badge question-badge svelte-ro4c24">Questions</button></div></div>'),Ar=N('<span class="badge-count svelte-ro4c24"> </span>'),Mr=N('<div class="selector svelte-ro4c24"><p class="intro svelte-ro4c24">Elige un tema y un nivel para empezar. Si quieres practicar un tiempo en particular, toca la etiqueta.</p> <div class="topic-section svelte-ro4c24"><div class="topic-chips svelte-ro4c24"></div> <div class="specialized-section svelte-ro4c24"><div class="specialized-line svelte-ro4c24"><span class="specialized-label svelte-ro4c24">Especializados</span></div> <div class="topic-chips svelte-ro4c24"></div></div></div> <div class="levels svelte-ro4c24"></div> <div class="extra-btns svelte-ro4c24"><button class="extra-btn retry svelte-ro4c24"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path></svg> Ejercicios por conquistar <!></button> <button class="extra-btn stats svelte-ro4c24"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="20" x2="18" y2="10"></line><line x1="12" y1="20" x2="12" y2="4"></line><line x1="6" y1="20" x2="6" y2="14"></line></svg> Mis estadÃ­sticas</button></div> <button class="glossary-btn svelte-ro4c24"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path></svg> Glosario gramatical</button> <button class="change-key-btn svelte-ro4c24">Cambiar API key</button> <p class="footer svelte-ro4c24">Hecho con <button class="heart-link svelte-ro4c24">ğŸ§¡</button> por <a class="author-link svelte-ro4c24" href="https://www.linkedin.com/in/diegofdom/" target="_blank" rel="noopener noreferrer">Diego Dominguez</a></p></div>');function qr(a,e){je(e,!0);const t=K(Tr);let s=J("random");const n=[{key:"beginner",label:"Principiante",tenses:["Present simple","Present continuous","Going to","Simple past","Imperative","Articles","There is/are","Prepositions"],description:"Presente simple, presente continuo, futuro con going to, pasado simple, imperativo, artÃ­culos, there is/are, preposiciones de tiempo y lugar."},{key:"intermediate",label:"Intermedio",tenses:["Present perfect","Present perfect continuous","Past continuous","Will future","First conditional","Second conditional","Zero conditional","Modals","Used to","Gerund vs infinitive","Relative clauses","Connectors"],description:"Presente perfecto, presente perfecto continuo, pasado continuo, futuro con will, primer condicional, segundo condicional, condicional cero, modales, used to, gerundio vs infinitivo, clÃ¡usulas relativas, conectores."},{key:"advanced",label:"Avanzado",tenses:["Past perfect","Past perfect continuous","Third conditional","Mixed conditional","Passive voice","Reported speech","Subjunctive","Comparatives and superlatives","Future perfect","Future continuous","Causative","Wish/If only","Inversion"],description:"Pasado perfecto, pasado perfecto continuo, tercer condicional, condicional mixto, voz pasiva, estilo indirecto, subjuntivo, comparativos y superlativos, futuro perfecto, futuro continuo, causativo, wish/if only, inversiÃ³n."}];function r(b,w,j){b.stopPropagation(),e.onselect(w,o(s),j)}function l(b,w){b.stopPropagation(),e.onselect(w,o(s),void 0,!0)}var i=Mr(),u=h(d(i),2),m=d(u);me(m,21,()=>Vs,be,(b,w)=>{var j=jr();let E;j.__click=()=>I(s,o(w).id,!0);var C=d(j,!0);c(j),V(()=>{E=Ue(j,1,"topic-chip svelte-ro4c24",null,E,{active:o(s)===o(w).id}),ls(j,"title",o(w).description),k(C,o(w).label)}),P(b,j)}),c(m);var v=h(m,2),x=h(d(v),2);me(x,21,()=>Sr,be,(b,w)=>{var j=Nr();let E;j.__click=()=>I(s,o(w).id,!0);var C=d(j,!0);c(j),V(()=>{E=Ue(j,1,"topic-chip specialized svelte-ro4c24",null,E,{active:o(s)===o(w).id}),ls(j,"title",o(w).description),k(C,o(w).label)}),P(b,j)}),c(x),c(v),c(u);var _=h(u,2);me(_,21,()=>n,be,(b,w)=>{var j=Rr(),E=d(j);E.__click=()=>e.onselect(o(w).key,o(s));var C=d(E),D=d(C,!0);c(C);var G=h(C,2),te=d(G,!0);c(G),c(E);var de=h(E,2),oe=d(de);me(oe,17,()=>o(w).tenses,be,(B,$)=>{var U=Cr();U.__click=q=>r(q,o(w).key,o($).toLowerCase());var ie=d(U,!0);c(U),V(()=>k(ie,o($))),P(B,U)});var ae=h(oe,2);ae.__click=B=>l(B,o(w).key),c(de),c(j),V(()=>{k(D,o(w).label),k(te,o(w).description)}),P(b,j)}),c(_);var g=h(_,2),S=d(g);S.__click=function(...b){e.onretry?.apply(this,b)};var M=h(d(S),2);{var f=b=>{var w=Ar(),j=d(w,!0);c(w),V(()=>k(j,o(t))),P(b,w)};Q(M,b=>{o(t)>0&&b(f)})}c(S);var y=h(S,2);y.__click=function(...b){e.onstats?.apply(this,b)},c(g);var T=h(g,2);T.__click=function(...b){e.onglossary?.apply(this,b)};var W=h(T,2);W.__click=function(...b){e.onchangekey?.apply(this,b)};var F=h(W,2),A=h(d(F));A.__click=function(...b){e.ondedication?.apply(this,b)},Se(2),c(F),c(i),P(a,i),Ne()}Oe(["click"]);const Dr={level:"Fundamentos",tenses:[{name:"Personal Pronouns - Pronombres personales",description:"Los pronombres reemplazan al nombre del sujeto en la oraciÃ³n.",example:"I am a student. / She likes music. / They are playing.",exampleEs:"Yo soy estudiante. / A ella le gusta la mÃºsica. / Ellos estÃ¡n jugando.",structure:"I (yo) Â· you (tÃº/usted) Â· he (Ã©l) Â· she (ella) Â· it (ello) Â· we (nosotros) Â· they (ellos/ellas)",tip:'"You" sirve para tÃº, usted, ustedes y vosotros. "It" se usa para cosas y animales.'},{name:'Verb "to be" - Verbo "ser/estar"',description:"El verbo mÃ¡s importante del inglÃ©s. Sirve para describir, identificar y ubicar.",example:"I am happy. / She is a doctor. / We are at home.",exampleEs:"Yo estoy feliz. / Ella es doctora. / Nosotros estamos en casa.",structure:"I am Â· you are Â· he/she/it is Â· we are Â· they are",tip:"Formas cortas: I'm, you're, he's, she's, it's, we're, they're. NegaciÃ³n: am not, isn't, aren't."},{name:"Articles - ArtÃ­culos",description:"Palabras que van antes del sustantivo para indicar si es especÃ­fico o general.",example:"The cat is on the table. / I have a dog. / She is an artist.",exampleEs:"El gato estÃ¡ en la mesa. / Tengo un perro. / Ella es una artista.",structure:"the (el/la/los/las) Â· a (un/una antes de consonante) Â· an (un/una antes de vocal)",tip:'"The" = algo especÃ­fico. "A/an" = algo general. No se usa artÃ­culo para cosas en general: "I like music" (no "the music").'},{name:"Regular Verbs - Verbos regulares",description:"Verbos que siguen el patrÃ³n regular: se les agrega -ed en pasado y participio.",example:"I work every day. / She played yesterday. / They have finished.",exampleEs:"Trabajo todos los dÃ­as. / Ella jugÃ³ ayer. / Ellos han terminado.",structure:"",tip:"Reglas: verbo+ed (worked). Termina en -e â†’ solo -d (lived). Consonante+y â†’ ied (studied). CVC corto â†’ dobla consonante (stopped).",table:{headers:["Verb","Past","EspaÃ±ol"],rows:[["agree","agreed","estar de acuerdo"],["answer","answered","responder"],["arrive","arrived","llegar"],["ask","asked","preguntar"],["believe","believed","creer"],["call","called","llamar"],["carry","carried","cargar"],["change","changed","cambiar"],["clean","cleaned","limpiar"],["close","closed","cerrar"],["complete","completed","completar"],["cook","cooked","cocinar"],["create","created","crear"],["cry","cried","llorar"],["dance","danced","bailar"],["decide","decided","decidir"],["deliver","delivered","entregar"],["describe","described","describir"],["design","designed","diseÃ±ar"],["develop","developed","desarrollar"],["enjoy","enjoyed","disfrutar"],["explain","explained","explicar"],["finish","finished","terminar"],["fix","fixed","arreglar"],["follow","followed","seguir"],["help","helped","ayudar"],["imagine","imagined","imaginar"],["improve","improved","mejorar"],["invite","invited","invitar"],["jump","jumped","saltar"],["laugh","laughed","reÃ­r"],["learn","learned","aprender"],["like","liked","gustar"],["listen","listened","escuchar"],["live","lived","vivir"],["look","looked","mirar"],["love","loved","amar"],["manage","managed","gestionar"],["miss","missed","extraÃ±ar"],["move","moved","mover"],["need","needed","necesitar"],["offer","offered","ofrecer"],["open","opened","abrir"],["order","ordered","ordenar"],["organize","organized","organizar"],["plan","planned","planear"],["play","played","jugar"],["practice","practiced","practicar"],["prepare","prepared","preparar"],["promise","promised","prometer"],["pull","pulled","jalar"],["push","pushed","empujar"],["rain","rained","llover"],["relax","relaxed","relajarse"],["remember","remembered","recordar"],["return","returned","regresar"],["smile","smiled","sonreÃ­r"],["start","started","empezar"],["stop","stopped","parar"],["study","studied","estudiar"],["suggest","suggested","sugerir"],["talk","talked","hablar"],["travel","traveled","viajar"],["try","tried","intentar"],["turn","turned","girar"],["use","used","usar"],["visit","visited","visitar"],["wait","waited","esperar"],["walk","walked","caminar"],["want","wanted","querer"],["wash","washed","lavar"],["watch","watched","ver/mirar"],["work","worked","trabajar"],["worry","worried","preocuparse"]]}},{name:"Irregular Verbs - Verbos irregulares",description:"Verbos que NO siguen el patrÃ³n -ed. Debes memorizarlos.",example:"I go to school. / She went home. / They have gone.",exampleEs:"Voy a la escuela. / Ella fue a casa. / Ellos se han ido.",structure:"",tip:'No hay regla: hay que aprenderlos. Algunos no cambian: putâ†’putâ†’put, cutâ†’cutâ†’cut. "Read" se escribe igual pero cambia pronunciaciÃ³n: /riËd/ â†’ /rÉ›d/.',table:{headers:["Base","Past","Participle","EspaÃ±ol"],rows:[["be","was/were","been","ser/estar"],["become","became","become","convertirse"],["begin","began","begun","comenzar"],["bite","bit","bitten","morder"],["blow","blew","blown","soplar"],["break","broke","broken","romper"],["bring","brought","brought","traer"],["build","built","built","construir"],["buy","bought","bought","comprar"],["catch","caught","caught","atrapar"],["choose","chose","chosen","elegir"],["come","came","come","venir"],["cost","cost","cost","costar"],["cut","cut","cut","cortar"],["do","did","done","hacer"],["draw","drew","drawn","dibujar"],["drink","drank","drunk","beber"],["drive","drove","driven","conducir"],["eat","ate","eaten","comer"],["fall","fell","fallen","caer"],["feed","fed","fed","alimentar"],["feel","felt","felt","sentir"],["find","found","found","encontrar"],["fly","flew","flown","volar"],["forget","forgot","forgotten","olvidar"],["forgive","forgave","forgiven","perdonar"],["get","got","gotten","obtener"],["give","gave","given","dar"],["go","went","gone","ir"],["grow","grew","grown","crecer"],["hang","hung","hung","colgar"],["have","had","had","tener"],["hear","heard","heard","oÃ­r"],["hide","hid","hidden","esconder"],["hit","hit","hit","golpear"],["hold","held","held","sostener"],["keep","kept","kept","mantener"],["know","knew","known","saber"],["lead","led","led","liderar"],["leave","left","left","irse/dejar"],["lend","lent","lent","prestar"],["let","let","let","permitir"],["lie","lay","lain","acostarse"],["lose","lost","lost","perder"],["make","made","made","hacer/fabricar"],["mean","meant","meant","significar"],["pay","paid","paid","pagar"],["put","put","put","poner"],["read","read","read","leer"],["ride","rode","ridden","montar"],["rise","rose","risen","levantarse"],["run","ran","run","correr"],["say","said","said","decir"],["see","saw","seen","ver"],["sell","sold","sold","vender"],["send","sent","sent","enviar"],["set","set","set","fijar"],["shake","shook","shaken","sacudir"],["show","showed","shown","mostrar"],["shut","shut","shut","cerrar"],["sing","sang","sung","cantar"],["sit","sat","sat","sentarse"],["sleep","slept","slept","dormir"],["speak","spoke","spoken","hablar"],["spend","spent","spent","gastar/pasar tiempo"],["stand","stood","stood","pararse"],["steal","stole","stolen","robar"],["swim","swam","swum","nadar"],["take","took","taken","tomar"],["teach","taught","taught","enseÃ±ar"],["tell","told","told","contar/decir"],["think","thought","thought","pensar"],["throw","threw","thrown","lanzar"],["understand","understood","understood","entender"],["wake","woke","woken","despertar"],["wear","wore","worn","vestir/usar"],["win","won","won","ganar"],["write","wrote","written","escribir"]]}},{name:"Question Words - Palabras interrogativas",description:"Palabras que se usan al inicio de preguntas para pedir informaciÃ³n especÃ­fica.",example:"What is your name? / Where do you live? / Why are you late?",exampleEs:"Â¿CuÃ¡l es tu nombre? / Â¿DÃ³nde vives? / Â¿Por quÃ© llegas tarde?",structure:"What (quÃ©) Â· Where (dÃ³nde) Â· When (cuÃ¡ndo) Â· Who (quiÃ©n) Â· Why (por quÃ©) Â· How (cÃ³mo) Â· Which (cuÃ¡l) Â· How many (cuÃ¡ntos) Â· How much (cuÃ¡nto)",tip:'La estructura es: Question word + auxiliar + sujeto + verbo. Ej: "Where do you work?"'},{name:"Prepositions of Time - Preposiciones de tiempo",description:"Palabras que indican cuÃ¡ndo ocurre algo.",example:"I wake up at 7. / She was born in 1990. / We travel on Mondays.",exampleEs:"Me despierto a las 7. / Ella naciÃ³ en 1990. / Viajamos los lunes.",structure:"at (hora): at 3 PM, at night Â· in (mes/aÃ±o/perÃ­odo): in May, in 2020, in the morning Â· on (dÃ­a/fecha): on Monday, on July 4th",tip:'AT = hora/momento puntual. IN = perÃ­odo largo. ON = dÃ­a especÃ­fico. "At night" pero "in the morning/afternoon/evening".'},{name:"Prepositions of Place - Preposiciones de lugar",description:"Palabras que indican dÃ³nde estÃ¡ algo o alguien.",example:"The book is on the table. / She is at school. / They live in Paris.",exampleEs:"El libro estÃ¡ en la mesa. / Ella estÃ¡ en la escuela. / Ellos viven en ParÃ­s.",structure:"in (dentro): in the box, in Paris Â· on (sobre): on the table, on the wall Â· at (punto): at school, at home Â· under (debajo) Â· next to (al lado) Â· between (entre) Â· behind (detrÃ¡s) Â· in front of (enfrente de)",tip:"IN = dentro de un espacio. ON = sobre una superficie. AT = un punto/lugar especÃ­fico."},{name:"Possessive Adjectives - Adjetivos posesivos",description:"Indican a quiÃ©n pertenece algo. Van antes del sustantivo.",example:"This is my book. / Her cat is black. / Their house is big.",exampleEs:"Este es mi libro. / Su gato (de ella) es negro. / Su casa (de ellos) es grande.",structure:"my (mi) Â· your (tu/su) Â· his (su, de Ã©l) Â· her (su, de ella) Â· its (su, de ello) Â· our (nuestro) Â· their (su, de ellos)",tip:`No confundas: "your" (tu) con "you're" (tÃº eres), ni "their" (su) con "they're" (ellos son) o "there" (allÃ­).`},{name:"Demonstratives - Demostrativos",description:"Palabras que seÃ±alan algo cercano o lejano, en singular o plural.",example:"This is my pen. / That is your car. / These are delicious. / Those are expensive.",exampleEs:"Este es mi bolÃ­grafo. / Ese es tu carro. / Estos estÃ¡n deliciosos. / Esos son caros.",structure:"this (este/esta, cerca singular) Â· that (ese/esa, lejos singular) Â· these (estos/estas, cerca plural) Â· those (esos/esas, lejos plural)",tip:'"This/these" = cerca de ti. "That/those" = lejos de ti. TambiÃ©n se usan para tiempo: "this week" (esta semana), "that day" (ese dÃ­a).'},{name:"Common Adjectives - Adjetivos comunes",description:"Palabras que describen sustantivos. En inglÃ©s van ANTES del sustantivo y no cambian en plural.",example:"She has a big house. / The small cats are cute. / It is an old book.",exampleEs:"Ella tiene una casa grande. / Los gatos pequeÃ±os son lindos. / Es un libro viejo.",structure:"bigâ†”small (grandeâ†”pequeÃ±o) Â· hotâ†”cold (calienteâ†”frÃ­o) Â· oldâ†”new (viejoâ†”nuevo) Â· goodâ†”bad (buenoâ†”malo) Â· happyâ†”sad (felizâ†”triste) Â· fastâ†”slow (rÃ¡pidoâ†”lento) Â· easyâ†”hard (fÃ¡cilâ†”difÃ­cil) Â· longâ†”short (largoâ†”corto) Â· beautifulâ†”ugly (bonitoâ†”feo) Â· expensiveâ†”cheap (caroâ†”barato)",tip:'En inglÃ©s los adjetivos NO tienen plural: "big houses" (no "bigs houses"). Siempre van antes del sustantivo: "a red car" (no "a car red").'},{name:"Numbers - NÃºmeros",description:"Los nÃºmeros bÃ¡sicos en inglÃ©s del 1 al 20 y las decenas.",example:"I have two brothers. / She is twenty-five years old. / There are fifty students.",exampleEs:"Tengo dos hermanos. / Ella tiene veinticinco aÃ±os. / Hay cincuenta estudiantes.",structure:"1 one Â· 2 two Â· 3 three Â· 4 four Â· 5 five Â· 6 six Â· 7 seven Â· 8 eight Â· 9 nine Â· 10 ten Â· 11 eleven Â· 12 twelve Â· 13 thirteen Â· 14 fourteen Â· 15 fifteen Â· 16 sixteen Â· 17 seventeen Â· 18 eighteen Â· 19 nineteen Â· 20 twenty Â· 30 thirty Â· 40 forty Â· 50 fifty Â· 60 sixty Â· 70 seventy Â· 80 eighty Â· 90 ninety Â· 100 one hundred",tip:'Del 13 al 19 terminan en -teen. Las decenas terminan en -ty. Para compuestos: twenty-one (21), thirty-five (35). Cuidado: "forty" (no "fourty").'},{name:"Days & Months - DÃ­as y meses",description:"En inglÃ©s los dÃ­as y meses SIEMPRE se escriben con mayÃºscula.",example:"I work on Monday. / My birthday is in July. / See you on Friday!",exampleEs:"Trabajo el lunes. / Mi cumpleaÃ±os es en julio. / Â¡Nos vemos el viernes!",structure:"Monday (lunes) Â· Tuesday (martes) Â· Wednesday (miÃ©rcoles) Â· Thursday (jueves) Â· Friday (viernes) Â· Saturday (sÃ¡bado) Â· Sunday (domingo) Â·Â· January (enero) Â· February (febrero) Â· March (marzo) Â· April (abril) Â· May (mayo) Â· June (junio) Â· July (julio) Â· August (agosto) Â· September (septiembre) Â· October (octubre) Â· November (noviembre) Â· December (diciembre)",tip:'Usa "on" con dÃ­as: "on Monday". Usa "in" con meses: "in July". Siempre con mayÃºscula: "Friday" (no "friday").'},{name:"Adverbs of Frequency - Adverbios de frecuencia",description:'Indican con quÃ© frecuencia ocurre algo. Van entre el sujeto y el verbo (excepto con "to be").',example:"I always drink coffee. / She never eats meat. / They usually arrive early.",exampleEs:"Siempre tomo cafÃ©. / Ella nunca come carne. / Ellos usualmente llegan temprano.",structure:"always (siempre, 100%) Â· usually (usualmente, 90%) Â· often (a menudo, 70%) Â· sometimes (a veces, 50%) Â· rarely (raramente, 10%) Â· never (nunca, 0%)",tip:'Van ANTES del verbo: "I always eat". Pero DESPUÃ‰S de "to be": "She is always happy" (no "She always is happy").'},{name:"Basic Connectors - Conectores bÃ¡sicos",description:"Palabras que unen ideas en una oraciÃ³n.",example:"I like tea and coffee. / She is tired but happy. / Study hard or you will fail.",exampleEs:"Me gusta el tÃ© y el cafÃ©. / Ella estÃ¡ cansada pero feliz. / Estudia duro o reprobarÃ¡s.",structure:"and (y) Â· but (pero) Â· or (o) Â· because (porque) Â· so (asÃ­ que/entonces) Â· also (tambiÃ©n) Â· however (sin embargo) Â· then (entonces/luego)",tip:'"Because" responde a "why": "I stayed home because it was raining." "So" indica resultado: "It was raining, so I stayed home."'}]},ht=[{level:"Principiante",tenses:[{name:"Present Simple - Presente simple",description:"Acciones habituales, rutinas o verdades generales.",example:"She works every day.",exampleEs:"Ella trabaja todos los dÃ­as.",structure:"Sujeto + verbo (base / +s en 3a persona)",tip:'Usa "do/does" para preguntas y negaciones.'},{name:"Present Continuous - Presente continuo",description:"Acciones que ocurren en este momento o situaciones temporales.",example:"They are playing in the park.",exampleEs:"Ellos estÃ¡n jugando en el parque.",structure:"Sujeto + am/is/are + verbo-ing",tip:"No se usa con verbos de estado (know, want, like)."},{name:'Going to (Future) - Futuro con "ir a"',description:"Planes o intenciones futuras, o predicciones basadas en evidencia.",example:"I am going to travel next month.",exampleEs:"Voy a viajar el prÃ³ximo mes.",structure:"Sujeto + am/is/are + going to + verbo base",tip:"Indica que ya se ha decidido o hay evidencia visible."},{name:"Simple Past - Pasado simple",description:"Acciones completadas en el pasado.",example:"We visited the museum yesterday.",exampleEs:"Visitamos el museo ayer.",structure:"Sujeto + verbo en pasado (-ed / irregular)",tip:'Usa "did" para preguntas y negaciones. Cuidado con los verbos irregulares (goâ†’went, eatâ†’ate).'},{name:"Imperative - Imperativo",description:"Ã“rdenes, instrucciones o peticiones. No llevan sujeto explÃ­cito.",example:"Close the door. / Don't touch that. / Please sit down.",exampleEs:"Cierra la puerta. / No toques eso. / Por favor siÃ©ntate.",structure:"Verbo base (sin sujeto) / Don't + verbo base (negativo)",tip:`El sujeto "you" estÃ¡ implÃ­cito. Para ser mÃ¡s cortÃ©s agrega "Please". Negativo: "Don't run!" (no "Not run!").`},{name:"Articles - ArtÃ­culos (a/an/the)",description:"Los artÃ­culos indican si un sustantivo es especÃ­fico o general. Es uno de los errores mÃ¡s comunes para hispanohablantes.",example:"She is an engineer. / The children are at school. / I like music.",exampleEs:"Ella es ingeniera. / Los niÃ±os estÃ¡n en la escuela. / Me gusta la mÃºsica.",structure:"a (antes de consonante) Â· an (antes de vocal) Â· the (especÃ­fico) Â· âˆ… (sin artÃ­culo, general)",tip:'"A/an" = algo no especÃ­fico o primera menciÃ³n. "The" = algo especÃ­fico o ya mencionado. Sin artÃ­culo = conceptos generales: "I like dogs" (en general). Cuidado: en espaÃ±ol decimos "me gusta la mÃºsica" pero en inglÃ©s es "I like music" (sin "the").'},{name:"There is / There are - Hay",description:"Se usa para expresar la existencia o presencia de algo.",example:"There is a cat on the roof. / There are many students in the class.",exampleEs:"Hay un gato en el techo. / Hay muchos estudiantes en la clase.",structure:"There is + singular/incontable Â· There are + plural",tip:`"There is" para singular e incontable: "There is water". "There are" para plural: "There are books". Negativo: "There isn't / There aren't". Pregunta: "Is there...? / Are there...?"`},{name:"Prepositions - Preposiciones (in/on/at)",description:"Las preposiciones in, on, at se usan tanto para tiempo como para lugar.",example:"The meeting is at 3 PM on Monday. / She lives in Paris.",exampleEs:"La reuniÃ³n es a las 3 PM el lunes. / Ella vive en ParÃ­s.",structure:"Tiempo: at (hora), in (mes/aÃ±o/perÃ­odo), on (dÃ­a/fecha) Â· Lugar: in (dentro), on (superficie), at (punto)",tip:'AT = momento puntual / punto: "at 3 PM", "at home". IN = perÃ­odo / dentro: "in July", "in the box". ON = dÃ­a / superficie: "on Monday", "on the table". Excepciones: "at night", "at the weekend" (UK), "on the weekend" (US).'}]},{level:"Intermedio",tenses:[{name:"Present Perfect - Presente perfecto",description:"Acciones pasadas con conexion al presente, o experiencias de vida.",example:"I have visited three countries.",exampleEs:"He visitado tres paÃ­ses.",structure:"Sujeto + have/has + participio pasado",tip:'Usa "ever", "never", "already", "yet", "just" como pistas.'},{name:"Present Perfect Continuous - Presente perfecto continuo",description:"Acciones que empezaron en el pasado y continÃºan hasta el presente, o que acaban de terminar.",example:"She has been studying for three hours.",exampleEs:"Ella ha estado estudiando durante tres horas.",structure:"Sujeto + have/has + been + verbo-ing",tip:'Usa "for" (duraciÃ³n) y "since" (punto de inicio). Enfatiza la duraciÃ³n de la acciÃ³n, no solo el resultado.'},{name:"Past Continuous - Pasado continuo",description:"Acciones en progreso en un momento del pasado, o acciones interrumpidas.",example:"She was reading when the phone rang.",exampleEs:"Ella estaba leyendo cuando sonÃ³ el telÃ©fono.",structure:"Sujeto + was/were + verbo-ing",tip:'Frecuentemente se combina con Simple Past usando "when" o "while".'},{name:'Will (Future) - Futuro con "will"',description:"Decisiones espontaneas, predicciones, promesas u ofertas.",example:"I will help you with that.",exampleEs:"Te ayudarÃ© con eso.",structure:"Sujeto + will + verbo base",tip:'A diferencia de "going to", indica decision en el momento o prediccion sin evidencia.'},{name:"First Conditional - Primer condicional",description:"Situaciones posibles/probables en el futuro.",example:"If it rains, we will stay home.",exampleEs:"Si llueve, nos quedaremos en casa.",structure:"If + present simple, will + verbo base",tip:'La condicion es real y posible. No uses "will" en la clausula con "if".'},{name:"Modals - Verbos modales (can, must, should)",description:"Expresan habilidad, obligacion o consejo.",example:"You should study more. / She can swim very well.",exampleEs:"DeberÃ­as estudiar mÃ¡s. / Ella sabe nadar muy bien.",structure:'Sujeto + modal + verbo base (sin "to")',tip:"Can = poder/saber, must = deber (obligacion fuerte), should = deberia (consejo)."},{name:"Second Conditional - Segundo condicional",description:"Situaciones hipotÃ©ticas o irreales en el presente o futuro.",example:"If I had more money, I would travel the world.",exampleEs:"Si tuviera mÃ¡s dinero, viajarÃ­a por el mundo.",structure:"If + past simple, would + verbo base",tip:'La situaciÃ³n es irreal o poco probable. Usa "were" (no "was") para todos: "If I were you...".'},{name:"Used to - SolÃ­a",description:"HÃ¡bitos o estados pasados que ya no son verdad.",example:"I used to play football every weekend.",exampleEs:"Yo solÃ­a jugar fÃºtbol cada fin de semana.",structure:"Sujeto + used to + verbo base",tip:`Indica que algo era verdad en el pasado pero ya NO lo es. Negativo: "didn't use to" (sin -d). Pregunta: "Did you use to...?".`},{name:"Zero Conditional - Condicional cero",description:"Verdades generales, hechos cientÃ­ficos o cosas que siempre suceden.",example:"If you heat water to 100 degrees, it boils.",exampleEs:"Si calientas agua a 100 grados, hierve.",structure:"If/When + present simple, present simple",tip:'Ambas clÃ¡usulas usan presente simple. "When" puede reemplazar "if" porque el resultado siempre ocurre. No confundir con el primer condicional (que habla del futuro).'},{name:"Gerund vs Infinitive - Gerundio vs Infinitivo",description:"Algunos verbos van seguidos de gerundio (-ing) y otros de infinitivo (to + verbo). Es uno de los errores mÃ¡s comunes.",example:"She enjoys cooking. / He wants to travel.",exampleEs:"Ella disfruta cocinar. / Ã‰l quiere viajar.",structure:"Verbo + gerundio (-ing) / Verbo + to + verbo base",tip:'Gerundio: enjoy, avoid, finish, mind, suggest, keep, practice, consider, miss, deny. Infinitivo: want, decide, agree, hope, plan, promise, refuse, learn, expect, afford. Algunos aceptan ambos con cambio de significado: "stop smoking" (dejar de) vs "stop to smoke" (parar para).'},{name:"Relative Clauses - ClÃ¡usulas relativas",description:"Oraciones que dan informaciÃ³n adicional sobre un sustantivo usando who, which, that, where o whose.",example:"The man who lives next door is a doctor.",exampleEs:"El hombre que vive al lado es doctor.",structure:"Sustantivo + who/which/that/where/whose + informaciÃ³n",tip:'"Who" para personas, "which" para cosas, "that" para ambos, "where" para lugares, "whose" para posesiÃ³n. En clÃ¡usulas definitorias (esenciales) se puede omitir "that/who" si es objeto: "The book (that) I read".'},{name:"Connectors - Conectores",description:"Palabras y expresiones que unen ideas mostrando contraste, causa, resultado o adiciÃ³n.",example:"Although it was raining, we went for a walk. / Despite the traffic, we arrived on time.",exampleEs:"Aunque estaba lloviendo, salimos a caminar. / A pesar del trÃ¡fico, llegamos a tiempo.",structure:"although/even though + clÃ¡usula Â· despite/in spite of + sustantivo/gerundio Â· however/nevertheless (sin embargo) Â· therefore/as a result (por lo tanto)",tip:'"Although/even though" van con clÃ¡usula (sujeto + verbo): "Although it rained". "Despite/in spite of" van con sustantivo o gerundio: "Despite the rain" / "Despite being tired". "However" suele ir despuÃ©s de punto o punto y coma: "It rained; however, we went out."'}]},{level:"Avanzado",tenses:[{name:"Past Perfect - Pasado perfecto",description:"Una accion que ocurrio antes de otra accion en el pasado.",example:"She had already left when I arrived.",exampleEs:"Ella ya se habÃ­a ido cuando lleguÃ©.",structure:"Sujeto + had + participio pasado",tip:'Es "el pasado del pasado". Usa "already", "just", "never", "before" como pistas.'},{name:"Third Conditional - Tercer condicional",description:"Situaciones hipoteticas del pasado (que no ocurrieron).",example:"If I had studied, I would have passed.",exampleEs:"Si hubiera estudiado, habrÃ­a aprobado.",structure:"If + past perfect, would have + participio",tip:"Expresa arrepentimiento o especulacion sobre el pasado. Es irreal."},{name:"Passive Voice - Voz pasiva",description:"Cuando el foco esta en la accion o el receptor, no en quien la realiza.",example:"The book was written by a famous author.",exampleEs:"El libro fue escrito por un autor famoso.",structure:"Sujeto (receptor) + be + participio pasado",tip:'Usa "by" para indicar quien realiza la accion (agente), pero es opcional.'},{name:"Passive Voice: Present Simple - Voz pasiva: Presente simple",description:"Voz pasiva para acciones habituales o verdades generales.",example:"The reports are reviewed every Monday.",exampleEs:"Los informes son revisados cada lunes.",structure:"Sujeto + am/is/are + participio pasado",tip:'Usa "am/is/are" como auxiliar. Ej: "English is spoken here."'},{name:"Passive Voice: Present Continuous - Voz pasiva: Presente continuo",description:"Voz pasiva para acciones en progreso ahora mismo.",example:"The house is being painted this week.",exampleEs:"La casa estÃ¡ siendo pintada esta semana.",structure:"Sujeto + am/is/are + being + participio pasado",tip:'Agrega "being" entre el auxiliar y el participio. Ej: "is being repaired".'},{name:"Passive Voice: Past Simple - Voz pasiva: Pasado simple",description:"Voz pasiva para acciones completadas en el pasado.",example:"The letter was sent yesterday.",exampleEs:"La carta fue enviada ayer.",structure:"Sujeto + was/were + participio pasado",tip:'Usa "was/were" como auxiliar. Ej: "The cake was made by my grandmother."'},{name:"Passive Voice: Past Continuous - Voz pasiva: Pasado continuo",description:"Voz pasiva para acciones en progreso en un momento del pasado.",example:"The road was being repaired when we arrived.",exampleEs:"La carretera estaba siendo reparada cuando llegamos.",structure:"Sujeto + was/were + being + participio pasado",tip:'Similar al present continuous pasivo pero en pasado: "was/were being + participio".'},{name:"Passive Voice: Present Perfect - Voz pasiva: Presente perfecto",description:"Voz pasiva para acciones pasadas con conexion al presente.",example:"The homework has been finished already.",exampleEs:"La tarea ya ha sido terminada.",structure:"Sujeto + have/has + been + participio pasado",tip:'Combina "have/has been" + participio. Ej: "has been sold".'},{name:"Passive Voice: Past Perfect - Voz pasiva: Pasado perfecto",description:"Voz pasiva para acciones que ocurrieron antes de otra accion pasada.",example:"The dinner had been prepared before the guests arrived.",exampleEs:"La cena habÃ­a sido preparada antes de que llegaran los invitados.",structure:"Sujeto + had + been + participio pasado",tip:'Usa "had been" + participio. Es el pasado del pasado en voz pasiva.'},{name:'Passive Voice: Will (Future) - Voz pasiva: Futuro con "will"',description:"Voz pasiva para acciones futuras.",example:"The winners will be announced tomorrow.",exampleEs:"Los ganadores serÃ¡n anunciados maÃ±ana.",structure:"Sujeto + will + be + participio pasado",tip:'Usa "will be" + participio. Ej: "will be delivered", "will be invited".'},{name:'Passive Voice: Going to (Future) - Voz pasiva: Futuro con "ir a"',description:"Voz pasiva para planes o intenciones futuras.",example:"The park is going to be renovated next year.",exampleEs:"El parque va a ser renovado el prÃ³ximo aÃ±o.",structure:"Sujeto + am/is/are + going to + be + participio pasado",tip:'Agrega "be" antes del participio: "is going to be cleaned".'},{name:"Passive Voice: Modal Verb - Voz pasiva: Verbo modal",description:"Voz pasiva combinada con un verbo modal (can, must, should, could, might).",example:"This report must be finished by Friday.",exampleEs:"Este informe debe ser terminado para el viernes.",structure:"Sujeto + modal + be + participio pasado",tip:'El modal va primero, luego "be" + participio. Ej: "can be done", "should be reviewed", "must be sent".'},{name:"Reported Speech - Discurso indirecto",description:"Relatar lo que alguien dijo, cambiando tiempos verbales. Incluye afirmaciones, preguntas, Ã³rdenes y peticiones.",example:"He said that he was tired.",exampleEs:"Ã‰l dijo que estaba cansado.",structure:"Sujeto + said/told + (that) + oraciÃ³n con tiempo retrocedido",tip:'Los tiempos "retroceden": presentâ†’past, pastâ†’past perfect, willâ†’would, canâ†’could.',table:{headers:["Directo","Indirecto","Ejemplo"],rows:[["present simple","past simple",'"I work" â†’ He said he worked'],["present continuous","past continuous",'"I am working" â†’ He said he was working'],["past simple","past perfect",'"I worked" â†’ He said he had worked'],["present perfect","past perfect",'"I have worked" â†’ He said he had worked'],["pres. perfect continuous","past perfect continuous",'"I have been working" â†’ He said he had been working'],["past continuous","past perfect continuous",'"I was working" â†’ He said he had been working'],["will","would",'"I will go" â†’ He said he would go'],["can","could",'"I can swim" â†’ He said he could swim'],["must","had to",'"I must leave" â†’ He said he had to leave']]}},{name:"Reported Speech: Questions - Preguntas indirectas",description:"Al reportar preguntas, se pierde la inversiÃ³n sujeto-auxiliar y se usa orden de afirmaciÃ³n.",example:"She asked if I was coming. / He asked where I lived.",exampleEs:"Ella preguntÃ³ si yo iba. / Ã‰l preguntÃ³ dÃ³nde vivÃ­a yo.",structure:"Sujeto + asked/wanted to know + if/whether (sÃ­/no) o wh-word + orden normal",tip:'Yes/no questions usan "if" o "whether". Wh-questions mantienen la palabra interrogativa pero sin inversiÃ³n: "Where do you live?" â†’ He asked where I lived.'},{name:"Reported Speech: Commands - Ã“rdenes y peticiones indirectas",description:'Al reportar Ã³rdenes o peticiones, se usa "told/asked + objeto + to + verbo".',example:"He told me to wait. / She asked me not to run.",exampleEs:"Ã‰l me dijo que esperara. / Ella me pidiÃ³ que no corriera.",structure:"Sujeto + told/asked/ordered + objeto + (not) to + verbo base",tip:'Usa "told" para Ã³rdenes directas y "asked" para peticiones. Para negativo: "asked me not to..."'},{name:"Reported Speech: Reporting Verbs - Verbos de reporte",description:'AdemÃ¡s de "said" y "told", hay muchos verbos para reportar con diferentes matices.',example:"She admitted she had lied. / He warned me not to go.",exampleEs:"Ella admitiÃ³ que habÃ­a mentido. / Ã‰l me advirtiÃ³ que no fuera.",structure:"explained/admitted/denied/promised/warned/suggested/complained/insisted + that/to...",tip:"Cada verbo tiene su matiz: admitted (admitiÃ³), denied (negÃ³), promised (prometiÃ³), warned (advirtiÃ³), suggested (sugiriÃ³), complained (se quejÃ³), insisted (insistiÃ³), explained (explicÃ³)."},{name:"Subjunctive - Subjuntivo",description:"Deseos, sugerencias o situaciones hipoteticas.",example:"I wish I were taller. / He suggested that she study harder.",exampleEs:"DesearÃ­a ser mÃ¡s alto. / Ã‰l sugiriÃ³ que ella estudie mÃ¡s.",structure:"Wish + past simple / suggest + (that) + verbo base",tip:'Con "wish", usa "were" para todas las personas (no "was").'},{name:"Comparatives and Superlatives - Comparativos y superlativos",description:"Comparan cualidades entre dos cosas (comparativo) o destacan el grado mÃ¡ximo (superlativo).",example:"She is taller than her brother. / This is the most beautiful park in the city.",exampleEs:"Ella es mÃ¡s alta que su hermano. / Este es el parque mÃ¡s bonito de la ciudad.",structure:"Comparativo: adj + -er + than / more + adj + than Â· Superlativo: the + adj + -est / the most + adj",tip:"Cortos (1 sÃ­laba): -er/-est (tallâ†’tallerâ†’tallest). Largos (2+): more/most. Irregulares: goodâ†’betterâ†’best, badâ†’worseâ†’worst."},{name:"Future Perfect - Futuro perfecto",description:"Acciones que estarÃ¡n completadas antes de un momento especÃ­fico en el futuro.",example:"By next year, I will have graduated from university.",exampleEs:"Para el prÃ³ximo aÃ±o, me habrÃ© graduado de la universidad.",structure:"Sujeto + will have + participio pasado",tip:'Usa marcadores de tiempo: "by + tiempo", "by the time...", "before...". Responde a: "Â¿EstarÃ¡ hecho para entonces?".'},{name:"Future Continuous - Futuro continuo",description:"Acciones que estarÃ¡n en progreso en un momento especÃ­fico del futuro.",example:"This time tomorrow, I will be flying to London.",exampleEs:"MaÃ±ana a esta hora, estarÃ© volando a Londres.",structure:"Sujeto + will be + verbo-ing",tip:'Usa marcadores: "this time tomorrow", "at + hora especÃ­fica", "next week". Visualiza la acciÃ³n EN PROGRESO en el futuro.'},{name:"Mixed Conditional - Condicional mixto",description:"Mezcla clÃ¡usulas condicionales de diferentes marcos temporales (pasadoâ†’presente o presenteâ†’pasado).",example:"If I had studied medicine, I would be a doctor now.",exampleEs:"Si hubiera estudiado medicina, serÃ­a doctor ahora.",structure:"Tipo 1: If + past perfect, would + verbo base (pasadoâ†’presente) Â· Tipo 2: If + past simple, would have + participio (presenteâ†’pasado)",tip:"Tipo 1 (mÃ¡s comÃºn): condiciÃ³n pasada irreal â†’ resultado presente. Tipo 2: condiciÃ³n presente irreal â†’ resultado pasado."},{name:"Past Perfect Continuous - Pasado perfecto continuo",description:"Acciones que habÃ­an estado en progreso antes de otra acciÃ³n pasada. Enfatiza la duraciÃ³n.",example:"I had been waiting for two hours when the bus finally came.",exampleEs:"HabÃ­a estado esperando dos horas cuando el autobÃºs finalmente llegÃ³.",structure:"Sujeto + had been + verbo-ing",tip:'Usa "for + duraciÃ³n" y "when/before" para conectar con otro evento pasado. Es como el present perfect continuous pero en el pasado.'},{name:"Causative - Causativo",description:"Se usa para expresar que alguien hace que otra persona haga algo por ellos. Muy comÃºn para servicios.",example:"I had my car repaired. / She got her hair cut at the salon.",exampleEs:"Hice reparar mi carro. / Ella se cortÃ³ el pelo en el salÃ³n.",structure:"have/get + objeto + participio pasado",tip:`"Have something done" (formal) y "get something done" (informal) significan lo mismo: alguien mÃ¡s lo hace por ti. Se puede usar en cualquier tiempo: "I'm having my house painted" (presente continuo), "I had my phone fixed" (pasado), "I'll have it delivered" (futuro).`},{name:"Wish / If only - Desear / Si tan solo",description:"Expresan deseos sobre el presente, arrepentimientos sobre el pasado, o frustraciÃ³n con hÃ¡bitos.",example:"I wish I had more free time. / If only I had studied harder. / I wish it would stop raining.",exampleEs:"DesearÃ­a tener mÃ¡s tiempo libre. / Si tan solo hubiera estudiado mÃ¡s. / DesearÃ­a que dejara de llover.",structure:"Presente: wish/if only + past simple Â· Pasado: wish/if only + past perfect Â· HÃ¡bitos: wish + would",tip:'Para el presente usa pasado simple: "I wish I were taller" (usa "were", no "was"). Para arrepentimientos usa past perfect: "I wish I had known". Para quejas sobre hÃ¡bitos: "I wish you would listen". "If only" es mÃ¡s enfÃ¡tico/emocional que "wish".'},{name:"Inversion - InversiÃ³n",description:"Orden invertido del sujeto y auxiliar para dar Ã©nfasis. Se usa en inglÃ©s formal, literario o retÃ³rico.",example:"Not only did he pass, but he also got the highest score. / Never have I seen such beauty.",exampleEs:"No solo aprobÃ³, sino que tambiÃ©n obtuvo la nota mÃ¡s alta. / Nunca he visto tal belleza.",structure:"Adverbio negativo/restrictivo + auxiliar + sujeto + verbo",tip:'Expresiones que provocan inversiÃ³n: "Not only...but also", "Never", "Rarely", "Seldom", "Hardly...when", "No sooner...than", "Only after/when/if", "Not until". TambiÃ©n se usa en condicionales sin "if": "Had I known..." = "If I had known...".'}]}],Js={name:"Negative (Negation) - NegaciÃ³n",description:'Las oraciones negativas en inglÃ©s se forman agregando "not" despuÃ©s del auxiliar. Si no hay auxiliar, se agrega do/does/did + not.',example:"She doesn't like coffee. / They aren't coming. / He hasn't finished.",exampleEs:"A ella no le gusta el cafÃ©. / Ellos no vienen. / Ã‰l no ha terminado.",structure:"Sujeto + auxiliar + not + verbo (don't/doesn't, isn't/aren't, hasn't/haven't, won't, can't...)",tip:`Identifica el auxiliar del tiempo verbal y agrega "not" despuÃ©s. Si no hay auxiliar (present/past simple), usa do/does/did + not. Las contracciones son muy comunes: don't, doesn't, didn't, isn't, aren't, hasn't, haven't, won't, can't, shouldn't, mustn't.`},z={"present simple":{name:"Negative: Present Simple - NegaciÃ³n: Presente simple",description:"Se usa do not (don't) / does not (doesn't) + verbo en forma base.",structure:"Sujeto + don't/doesn't + verbo base",example:"I don't like fish. / She doesn't work on Sundays.",exampleEs:"No me gusta el pescado. / Ella no trabaja los domingos.",tip:`Usa "don't" para I/you/we/they y "doesn't" para he/she/it. El verbo principal va en forma base (sin -s): "She doesn't likes" es incorrecto.`},"present continuous":{name:"Negative: Present Continuous - NegaciÃ³n: Presente continuo",description:'Se agrega "not" despuÃ©s de am/is/are.',structure:"Sujeto + am/is/are + not + verbo-ing",example:"I'm not sleeping. / They aren't listening.",exampleEs:"No estoy durmiendo. / Ellos no estÃ¡n escuchando.",tip:`Contracciones: "isn't" (is not), "aren't" (are not). Para "I": siempre "I'm not" (nunca "I amn't").`},"going to":{name:'Negative: Going to (Future) - NegaciÃ³n: Futuro con "ir a"',description:'Se agrega "not" despuÃ©s de am/is/are, antes de "going to".',structure:"Sujeto + am/is/are + not + going to + verbo base",example:"She isn't going to come. / We aren't going to wait.",exampleEs:"Ella no va a venir. / No vamos a esperar.",tip:'"Going to" no cambia â€” solo agrega "not" despuÃ©s del auxiliar be.'},"simple past":{name:"Negative: Simple Past - NegaciÃ³n: Pasado simple",description:"Se usa did not (didn't) + verbo en forma base.",structure:"Sujeto + didn't + verbo base",example:"I didn't go to the party. / She didn't eat breakfast.",exampleEs:"No fui a la fiesta. / Ella no desayunÃ³.",tip:`Cuidado: el verbo NO va en pasado. "I didn't went" es incorrecto â€” debe ser "I didn't go".`},imperative:{name:"Negative: Imperative - NegaciÃ³n: Imperativo",description:`Se usa "Don't" + verbo base para dar Ã³rdenes negativas.`,structure:"Don't + verbo base",example:"Don't touch that. / Don't be late. / Don't run in the hallway.",exampleEs:"No toques eso. / No llegues tarde. / No corras en el pasillo.",tip:`Siempre usa "Don't" (nunca "Not" solo). Para ser formal: "Do not open the door."`},"present perfect":{name:"Negative: Present Perfect - NegaciÃ³n: Presente perfecto",description:'Se agrega "not" despuÃ©s de have/has.',structure:"Sujeto + have/has + not + participio pasado",example:"I haven't finished yet. / She hasn't called.",exampleEs:"No he terminado todavÃ­a. / Ella no ha llamado.",tip:`Contracciones: "haven't" (have not), "hasn't" (has not). Suele aparecer con "yet" y "never".`},"present perfect continuous":{name:"Negative: Present Perfect Continuous - NegaciÃ³n: Presente perfecto continuo",description:'Se agrega "not" despuÃ©s de have/has.',structure:"Sujeto + have/has + not + been + verbo-ing",example:"I haven't been sleeping well. / She hasn't been working lately.",exampleEs:"No he estado durmiendo bien. / Ella no ha estado trabajando Ãºltimamente.",tip:`Contracciones: "haven't been" / "hasn't been". Enfatiza que la acciÃ³n continua NO ha estado ocurriendo.`},"past continuous":{name:"Negative: Past Continuous - NegaciÃ³n: Pasado continuo",description:'Se agrega "not" despuÃ©s de was/were.',structure:"Sujeto + was/were + not + verbo-ing",example:"I wasn't paying attention. / They weren't playing.",exampleEs:"No estaba prestando atenciÃ³n. / Ellos no estaban jugando.",tip:`Contracciones: "wasn't" (was not), "weren't" (were not).`},"will future":{name:'Negative: Will (Future) - NegaciÃ³n: Futuro con "will"',description:'Se agrega "not" despuÃ©s de "will".',structure:"Sujeto + will + not + verbo base",example:"I won't forget. / They won't be late.",exampleEs:"No olvidarÃ©. / Ellos no llegarÃ¡n tarde.",tip:`La contracciÃ³n "won't" (will not) es mucho mÃ¡s comÃºn que "will not" en lenguaje hablado.`},"first conditional":{name:"Negative: First Conditional - NegaciÃ³n: Primer condicional",description:'Se puede negar la clÃ¡usula con "if", la clÃ¡usula con "will", o ambas.',structure:"If + sujeto + don't/doesn't + verbo, sujeto + won't + verbo",example:"If you don't study, you won't pass. / If it rains, we won't go.",exampleEs:"Si no estudias, no aprobarÃ¡s. / Si llueve, no iremos.",tip:`La negaciÃ³n puede estar en cualquiera de las dos clÃ¡usulas. En la clÃ¡usula "if" usa don't/doesn't; en la clÃ¡usula resultado usa won't.`},modals:{name:"Negative: Modals - NegaciÃ³n: Verbos modales",description:'Se agrega "not" directamente despuÃ©s del modal.',structure:"Sujeto + modal + not + verbo base",example:"You shouldn't eat that. / She can't swim. / You mustn't run here.",exampleEs:"No deberÃ­as comer eso. / Ella no sabe nadar. / No debes correr aquÃ­.",tip:`Contracciones: can't, couldn't, shouldn't, mustn't, won't. Cuidado: "can not" se escribe junto â†’ "cannot" o "can't".`},"second conditional":{name:"Negative: Second Conditional - NegaciÃ³n: Segundo condicional",description:'Se puede negar la clÃ¡usula "if" o la clÃ¡usula con "would".',structure:"If + sujeto + didn't + verbo, sujeto + wouldn't + verbo base",example:"If I didn't have a car, I wouldn't go. / If she weren't so busy, she would help.",exampleEs:"Si no tuviera carro, no irÃ­a. / Si ella no estuviera tan ocupada, ayudarÃ­a.",tip:`Usa "weren't" (no "wasn't") en lenguaje formal. La negaciÃ³n puede ir en una o ambas clÃ¡usulas.`},"used to":{name:"Negative: Used to - NegaciÃ³n: SolÃ­a",description:`Se usa "didn't use to" para negar hÃ¡bitos pasados.`,structure:"Sujeto + didn't use to + verbo base",example:"I didn't use to like coffee. / She didn't use to exercise.",exampleEs:"No solÃ­a gustarme el cafÃ©. / Ella no solÃ­a hacer ejercicio.",tip:`Cuidado: es "didn't use to" (sin -d en "use"). TambiÃ©n existe "never used to": "I never used to smoke."`},"comparatives and superlatives":{name:"Negative: Comparatives - NegaciÃ³n: Comparativos",description:'Se niega el auxiliar o se usa "not as...as" para comparaciones de igualdad negadas.',structure:"Sujeto + be + not + as + adj + as / Sujeto + be + not + comparative + than",example:"This book is not as interesting as that one. / He isn't taller than his brother.",exampleEs:"Este libro no es tan interesante como ese. / Ã‰l no es mÃ¡s alto que su hermano.",tip:'"Not as...as" es la forma mÃ¡s natural de negar una comparaciÃ³n. "Less...than" tambiÃ©n funciona pero es menos comÃºn.'},"zero conditional":{name:"Negative: Zero Conditional - NegaciÃ³n: Condicional cero",description:"Se niega una o ambas clÃ¡usulas usando don't/doesn't.",structure:"If + sujeto + don't/doesn't + verbo, sujeto + don't/doesn't + verbo",example:"If you don't water plants, they don't grow. / If you don't study, you don't learn.",exampleEs:"Si no riegas las plantas, no crecen. / Si no estudias, no aprendes.",tip:"Ambas clÃ¡usulas se niegan en presente simple. La verdad general sigue siendo universal."},"gerund vs infinitive":{name:"Negative: Gerund vs Infinitive - NegaciÃ³n: Gerundio vs Infinitivo",description:'Se agrega "not" antes del gerundio o infinitivo.',structure:"Verbo + not + gerundio / Verbo + not + to + verbo base",example:"She suggested not going out. / He decided not to accept the offer.",exampleEs:"Ella sugiriÃ³ no salir. / Ã‰l decidiÃ³ no aceptar la oferta.",tip:`Para gerundio: "not + verb-ing" (not going). Para infinitivo: "not to + verb" (not to go). TambiÃ©n se puede negar el verbo principal: "I don't enjoy cooking."`},"relative clauses":{name:"Negative: Relative Clauses - NegaciÃ³n: ClÃ¡usulas relativas",description:"La negaciÃ³n va dentro de la clÃ¡usula relativa o en la oraciÃ³n principal.",structure:"Sustantivo + who/which/that + auxiliar + not + verbo",example:"The students who didn't study failed. / I don't like the restaurant that we visited.",exampleEs:"Los estudiantes que no estudiaron reprobaron. / No me gusta el restaurante que visitamos.",tip:"La negaciÃ³n funciona normalmente dentro de cada clÃ¡usula. La clÃ¡usula relativa es independiente de la principal."},"future perfect":{name:"Negative: Future Perfect - NegaciÃ³n: Futuro perfecto",description:'Se agrega "not" despuÃ©s de "will".',structure:"Sujeto + will + not + have + participio pasado",example:"I won't have finished by then. / She won't have arrived before noon.",exampleEs:"No habrÃ© terminado para entonces. / Ella no habrÃ¡ llegado antes del mediodÃ­a.",tip:`ContracciÃ³n: "won't have + participio". Indica que algo NO estarÃ¡ completado antes de un momento futuro.`},"future continuous":{name:"Negative: Future Continuous - NegaciÃ³n: Futuro continuo",description:'Se agrega "not" despuÃ©s de "will".',structure:"Sujeto + will + not + be + verbo-ing",example:"I won't be working tomorrow. / They won't be traveling next week.",exampleEs:"No estarÃ© trabajando maÃ±ana. / Ellos no estarÃ¡n viajando la prÃ³xima semana.",tip:`ContracciÃ³n: "won't be + verb-ing". Indica que algo NO estarÃ¡ en progreso en un momento futuro.`},"mixed conditional":{name:"Negative: Mixed Conditional - NegaciÃ³n: Condicional mixto",description:'Se puede negar la clÃ¡usula "if" o la clÃ¡usula resultado.',structure:"If + sujeto + hadn't + participio, sujeto + wouldn't + verbo / If + sujeto + didn't + verbo, sujeto + wouldn't have + participio",example:"If I hadn't moved here, I wouldn't know her. / If he weren't lazy, he would have finished.",exampleEs:"Si no me hubiera mudado aquÃ­, no la conocerÃ­a. / Si Ã©l no fuera perezoso, habrÃ­a terminado.",tip:"La negaciÃ³n puede ir en una o ambas clÃ¡usulas. El mixto combina tiempos, asÃ­ que cada clÃ¡usula se niega segÃºn su propio tiempo."},"past perfect continuous":{name:"Negative: Past Perfect Continuous - NegaciÃ³n: Pasado perfecto continuo",description:'Se agrega "not" despuÃ©s de "had".',structure:"Sujeto + had + not + been + verbo-ing",example:"I hadn't been sleeping well before the exam. / She hadn't been working there long.",exampleEs:"No habÃ­a estado durmiendo bien antes del examen. / Ella no habÃ­a estado trabajando allÃ­ mucho tiempo.",tip:`ContracciÃ³n: "hadn't been + verb-ing". Indica que una acciÃ³n continua NO habÃ­a estado ocurriendo.`},"past perfect":{name:"Negative: Past Perfect - NegaciÃ³n: Pasado perfecto",description:'Se agrega "not" despuÃ©s de "had".',structure:"Sujeto + had + not + participio pasado",example:"She hadn't eaten before the meeting. / They hadn't arrived yet.",exampleEs:"Ella no habÃ­a comido antes de la reuniÃ³n. / Ellos no habÃ­an llegado todavÃ­a.",tip:`ContracciÃ³n: "hadn't" (had not). Suele aparecer con "yet", "never", "before".`},"third conditional":{name:"Negative: Third Conditional - NegaciÃ³n: Tercer condicional",description:'Se puede negar la clÃ¡usula "if" o la clÃ¡usula resultado.',structure:"If + sujeto + hadn't + participio, sujeto + would/wouldn't + have + participio",example:"If I hadn't studied, I wouldn't have passed.",exampleEs:"Si no hubiera estudiado, no habrÃ­a aprobado.",tip:`La negaciÃ³n puede ir en una o ambas clÃ¡usulas. "Hadn't" en la condiciÃ³n, "wouldn't have" en el resultado.`},"passive voice":{name:"Negative: Passive Voice - NegaciÃ³n: Voz pasiva",description:'Se agrega "not" despuÃ©s del auxiliar de la pasiva.',structure:"Sujeto + auxiliar + not + (been) + participio pasado",example:"The email wasn't sent. / The project hasn't been finished.",exampleEs:"El email no fue enviado. / El proyecto no ha sido terminado.",tip:`Agrega "not" despuÃ©s del primer auxiliar: "isn't cleaned", "wasn't sent", "hasn't been done", "won't be delivered".`},"reported speech":{name:"Negative: Reported Speech - NegaciÃ³n: Discurso indirecto",description:'La negaciÃ³n se reporta dentro de la clÃ¡usula subordinada o usando "not to" en comandos.',structure:"Sujeto + said/told + (that) + sujeto + auxiliar + not + verbo",example:"He said he didn't agree. / She told me not to worry.",exampleEs:"Ã‰l dijo que no estaba de acuerdo. / Ella me dijo que no me preocupara.",tip:'Para comandos negativos: "told/asked + objeto + not to + verbo". Para afirmaciones: el "not" va dentro de la oraciÃ³n reportada con su auxiliar.'},subjunctive:{name:"Negative: Subjunctive - NegaciÃ³n: Subjuntivo",description:'Con "wish" se expresa deseo de que algo NO fuera asÃ­. Con sugerencias se usa "not + verbo base".',structure:"I wish + sujeto + didn't + verbo / suggest + that + sujeto + not + verbo base",example:"I wish I didn't have to work. / He suggested that she not leave early.",exampleEs:"DesearÃ­a no tener que trabajar. / Ã‰l sugiriÃ³ que ella no se fuera temprano.",tip:`Con "wish": usa didn't/weren't para el deseo negativo. Con "suggest/recommend": usa "not" antes del verbo base (sin auxiliar).`},articles:{name:"Negative: Articles - NegaciÃ³n: ArtÃ­culos",description:'Para negar con artÃ­culos se usa "no" antes del sustantivo o se niega el verbo.',structure:"Sujeto + verbo + no + sustantivo / Sujeto + don't/doesn't + verbo + a/the + sustantivo",example:"There is no water. / I don't have a car. / She doesn't like the movie.",exampleEs:"No hay agua. / No tengo carro. / A ella no le gusta la pelÃ­cula.",tip:`"No + sustantivo" = nada de: "There is no milk". TambiÃ©n se puede negar el verbo: "There isn't any milk". Ambas son correctas.`},"there is/are":{name:"Negative: There is/are - NegaciÃ³n: Hay",description:'Se agrega "not" despuÃ©s de is/are, o se usa "no" antes del sustantivo.',structure:"There is not (isn't) / There are not (aren't) + sustantivo Â· There is/are + no + sustantivo",example:"There isn't any milk. / There are no students. / There aren't any chairs.",exampleEs:"No hay leche. / No hay estudiantes. / No hay sillas.",tip:`Dos formas: "There isn't any..." o "There is no...". Ambas son correctas. "Any" se usa con la forma negativa del verbo.`},prepositions:{name:"Negative: Prepositions - NegaciÃ³n: Preposiciones",description:"La negaciÃ³n no afecta la preposiciÃ³n sino el verbo principal de la oraciÃ³n.",structure:"Sujeto + auxiliar + not + verbo + preposiciÃ³n",example:"She doesn't live in Paris. / He wasn't at home. / They don't work on Mondays.",exampleEs:"Ella no vive en ParÃ­s. / Ã‰l no estaba en casa. / Ellos no trabajan los lunes.",tip:`La preposiciÃ³n no cambia al negar â€” lo que cambia es el verbo. "She lives in Paris" â†’ "She doesn't live in Paris".`},connectors:{name:"Negative: Connectors - NegaciÃ³n: Conectores",description:"Algunos conectores ya expresan contraste o negaciÃ³n implÃ­cita.",structure:"Although/Despite + idea positiva, negaciÃ³n / However + negaciÃ³n",example:"Although he studied, he didn't pass. / Despite her efforts, she didn't win.",exampleEs:"Aunque estudiÃ³, no aprobÃ³. / A pesar de sus esfuerzos, no ganÃ³.",tip:'La negaciÃ³n va en la clÃ¡usula principal, no en el conector. "Although" ya implica contraste, asÃ­ que una de las clÃ¡usulas suele ser negativa.'},causative:{name:"Negative: Causative - NegaciÃ³n: Causativo",description:'Se niega el auxiliar "have" o "get".',structure:"Sujeto + didn't have/get + objeto + participio pasado",example:"I didn't have my car repaired. / She hasn't gotten her hair cut yet.",exampleEs:"No hice reparar mi carro. / Ella aÃºn no se ha cortado el pelo.",tip:`Se niega "have/get" como cualquier verbo: "didn't have...done", "hasn't had...fixed", "won't get...delivered".`},"wish/if only":{name:"Negative: Wish/If only - NegaciÃ³n: Desear/Si tan solo",description:"Los deseos ya suelen expresar algo negativo (algo que no es real). Para negar el deseo en sÃ­ se niega dentro de la clÃ¡usula.",structure:"I wish + sujeto + didn't/hadn't + verbo",example:"I wish I didn't have to work. / If only she hadn't left early.",exampleEs:"DesearÃ­a no tener que trabajar. / Si tan solo ella no se hubiera ido temprano.",tip:`"I wish I didn't..." = deseo de que algo del presente NO fuera asÃ­. "I wish I hadn't..." = arrepentimiento de algo que SÃ pasÃ³.`},inversion:{name:"Negative: Inversion - NegaciÃ³n: InversiÃ³n",description:"Las inversiones ya usan adverbios negativos/restrictivos, por lo que la negaciÃ³n estÃ¡ implÃ­cita en la estructura.",structure:"Never/Rarely/Seldom/Hardly + auxiliar + sujeto + verbo",example:"Never have I been so disappointed. / Rarely does he arrive on time.",exampleEs:"Nunca he estado tan decepcionado. / Rara vez llega a tiempo.",tip:'La inversiÃ³n por sÃ­ misma ya expresa negaciÃ³n o restricciÃ³n. "Never", "rarely", "seldom", "hardly" son inherentemente negativos.'}};function Or(a){const e=a.toLowerCase().trim();if(z[e])return z[e];for(const t of Object.keys(z))if(e.includes(t)||t.includes(e))return z[t];return e.includes("passive")?z["passive voice"]:e.includes("modal")?z.modals:Js}const Xs={name:"Interrogative (Questions) - Interrogativo (Preguntas)",description:"Las preguntas en inglÃ©s se forman invirtiendo el orden del sujeto y el auxiliar. Si no hay auxiliar, se agrega do/does/did.",example:"Do you speak English? / Is she working? / Have they finished?",exampleEs:"Â¿Hablas inglÃ©s? / Â¿EstÃ¡ ella trabajando? / Â¿Han terminado ellos?",structure:"Auxiliar + sujeto + verbo (Do you like...? / Is she...? / Can they...?)",tip:"Identifica el auxiliar del tiempo verbal (do/does, did, is/are, have/has, will, can...) y colÃ³calo antes del sujeto. Para Wh-questions: What/Where/Why + auxiliar + sujeto + verbo."},H={"present simple":{name:"Questions: Present Simple - Preguntas: Presente simple",description:"Se usa do/does como auxiliar para formar preguntas en presente simple.",structure:"Do/Does + sujeto + verbo base",example:"Do you like coffee? / Does she work here?",exampleEs:"Â¿Te gusta el cafÃ©? / Â¿Ella trabaja aquÃ­?",tip:'Usa "do" para I/you/we/they y "does" para he/she/it. El verbo principal va en forma base (sin -s).'},"present continuous":{name:"Questions: Present Continuous - Preguntas: Presente continuo",description:"Se invierte el auxiliar am/is/are con el sujeto.",structure:"Am/Is/Are + sujeto + verbo-ing",example:"Are you studying? / Is he coming?",exampleEs:"Â¿EstÃ¡s estudiando? / Â¿Ã‰l viene?",tip:"El auxiliar ya existe en la oraciÃ³n, solo hay que moverlo al inicio."},"going to":{name:'Questions: Going to (Future) - Preguntas: Futuro con "ir a"',description:'Se invierte am/is/are con el sujeto, manteniendo "going to".',structure:"Am/Is/Are + sujeto + going to + verbo base",example:"Are you going to travel? / Is she going to study?",exampleEs:"Â¿Vas a viajar? / Â¿Ella va a estudiar?",tip:'No cambies "going to" â€” solo mueve am/is/are al inicio.'},"simple past":{name:"Questions: Simple Past - Preguntas: Pasado simple",description:'Se usa "did" como auxiliar. El verbo principal vuelve a forma base.',structure:"Did + sujeto + verbo base",example:"Did you go? / Did she eat breakfast?",exampleEs:"Â¿Fuiste? / Â¿Ella desayunÃ³?",tip:'Cuidado: el verbo NO va en pasado. "Did you went" es incorrecto â†’ "Did you go".'},imperative:{name:"Questions: Imperative - Preguntas: Imperativo",description:"Los imperativos no forman preguntas directas, pero se pueden hacer peticiones corteses.",structure:"Can/Could/Would you + verbo base (peticiÃ³n cortÃ©s)",example:"Can you close the door? / Would you please sit down?",exampleEs:"Â¿Puedes cerrar la puerta? / Â¿PodrÃ­as sentarte por favor?",tip:'Los imperativos puros no son preguntas. Para pedir algo como pregunta, usa modales: "Could you help me?"'},"present perfect":{name:"Questions: Present Perfect - Preguntas: Presente perfecto",description:"Se invierte have/has con el sujeto.",structure:"Have/Has + sujeto + participio pasado",example:"Have you finished? / Has she ever been to Paris?",exampleEs:"Â¿Has terminado? / Â¿Ella ha estado alguna vez en ParÃ­s?",tip:'Usa "ever" para preguntar sobre experiencias: "Have you ever tried sushi?"'},"present perfect continuous":{name:"Questions: Present Perfect Continuous - Preguntas: Presente perfecto continuo",description:"Se invierte have/has con el sujeto.",structure:"Have/Has + sujeto + been + verbo-ing",example:"Have you been waiting long? / Has she been studying all day?",exampleEs:"Â¿Has estado esperando mucho? / Â¿Ella ha estado estudiando todo el dÃ­a?",tip:'Pregunta sobre la duraciÃ³n de una acciÃ³n que empezÃ³ en el pasado. Suele usar "how long": "How long have you been working here?"'},"past continuous":{name:"Questions: Past Continuous - Preguntas: Pasado continuo",description:"Se invierte was/were con el sujeto.",structure:"Was/Were + sujeto + verbo-ing",example:"Were you sleeping? / Was she working at 8?",exampleEs:"Â¿Estabas durmiendo? / Â¿Ella estaba trabajando a las 8?",tip:'Usa "was" para I/he/she/it y "were" para you/we/they.'},"will future":{name:'Questions: Will (Future) - Preguntas: Futuro con "will"',description:'Se invierte "will" con el sujeto.',structure:"Will + sujeto + verbo base",example:"Will you come? / Will they help us?",exampleEs:"Â¿VendrÃ¡s? / Â¿Nos ayudarÃ¡n?",tip:`"Will" es igual para todas las personas. En forma corta negativa: "Won't you come?"`},"first conditional":{name:"Questions: First Conditional - Preguntas: Primer condicional",description:'La pregunta se forma en la clÃ¡usula con "will", no en la de "if".',structure:"Will + sujeto + verbo base + if + present simple",example:"Will you go if it stops raining? / What will happen if we are late?",exampleEs:"Â¿IrÃ¡s si deja de llover? / Â¿QuÃ© pasarÃ¡ si llegamos tarde?",tip:'TambiÃ©n se puede preguntar con "if" al inicio: "If it rains, will you stay home?"'},modals:{name:"Questions: Modals - Preguntas: Verbos modales",description:"Se invierte el modal (can, should, must, etc.) con el sujeto.",structure:"Modal + sujeto + verbo base",example:"Can you swim? / Should we leave? / Must I finish today?",exampleEs:"Â¿Sabes nadar? / Â¿DeberÃ­amos irnos? / Â¿Debo terminar hoy?",tip:"Los modales funcionan como auxiliares â€” solo muÃ©velos al inicio de la oraciÃ³n."},"second conditional":{name:"Questions: Second Conditional - Preguntas: Segundo condicional",description:'Se invierte "would" con el sujeto en la clÃ¡usula principal.',structure:"Would + sujeto + verbo base + if + past simple",example:"Would you move if you got a better job? / What would you do if you won the lottery?",exampleEs:"Â¿Te mudarÃ­as si consiguieras un mejor trabajo? / Â¿QuÃ© harÃ­as si ganaras la loterÃ­a?",tip:'Pregunta sobre situaciones hipotÃ©ticas. La clÃ¡usula con "if" no cambia.'},"used to":{name:"Questions: Used to - Preguntas: SolÃ­a",description:'Se usa "Did + sujeto + use to" para preguntar sobre hÃ¡bitos pasados.',structure:"Did + sujeto + use to + verbo base",example:"Did you use to play sports? / Did she use to live here?",exampleEs:"Â¿SolÃ­as practicar deportes? / Â¿Ella solÃ­a vivir aquÃ­?",tip:`Es "Did you use to" (sin -d en "use"). Respuesta: "Yes, I used to" / "No, I didn't use to".`},"comparatives and superlatives":{name:"Questions: Comparatives - Preguntas: Comparativos",description:"Se invierte el auxiliar con el sujeto, manteniendo la estructura comparativa.",structure:"Be + sujeto + comparative + than / Which is the + superlative",example:"Is this book more interesting than that one? / Which is the tallest building in the city?",exampleEs:"Â¿Este libro es mÃ¡s interesante que ese? / Â¿CuÃ¡l es el edificio mÃ¡s alto de la ciudad?",tip:'Para comparar usa "which" o "who": "Who is taller, John or Mike?". Para superlativos: "What is the best restaurant here?"'},"zero conditional":{name:"Questions: Zero Conditional - Preguntas: Condicional cero",description:"Se forma la pregunta en una de las clÃ¡usulas usando do/does.",structure:"What happens if + present simple / Do/Does + sujeto + verbo + if + present simple",example:"What happens if you mix oil and water? / Does ice melt if you heat it?",exampleEs:"Â¿QuÃ© pasa si mezclas aceite y agua? / Â¿Se derrite el hielo si lo calientas?",tip:'Pregunta sobre verdades generales o resultados cientÃ­ficos. Usa "what happens if..." como estructura comÃºn.'},"gerund vs infinitive":{name:"Questions: Gerund vs Infinitive - Preguntas: Gerundio vs Infinitivo",description:"La pregunta se forma con el verbo principal, manteniendo el gerundio o infinitivo.",structure:"Do/Does + sujeto + verbo + gerundio/infinitivo",example:"Do you enjoy cooking? / Does she want to travel abroad?",exampleEs:"Â¿Disfrutas cocinar? / Â¿Ella quiere viajar al extranjero?",tip:"El gerundio o infinitivo no cambian en la pregunta â€” solo se agrega el auxiliar do/does al inicio."},"relative clauses":{name:"Questions: Relative Clauses - Preguntas: ClÃ¡usulas relativas",description:"Las preguntas pueden contener clÃ¡usulas relativas o usar palabras interrogativas que funcionan como relativos.",structure:"Wh-word + auxiliar + sujeto + verbo + clÃ¡usula relativa",example:"Do you know the person who called? / Where is the book that I left here?",exampleEs:"Â¿Conoces a la persona que llamÃ³? / Â¿DÃ³nde estÃ¡ el libro que dejÃ© aquÃ­?",tip:"La clÃ¡usula relativa se mantiene igual dentro de la pregunta. La inversiÃ³n solo ocurre en la oraciÃ³n principal."},"future perfect":{name:"Questions: Future Perfect - Preguntas: Futuro perfecto",description:'Se invierte "will" con el sujeto.',structure:"Will + sujeto + have + participio pasado",example:"Will you have finished by Friday? / Will she have graduated by then?",exampleEs:"Â¿HabrÃ¡s terminado para el viernes? / Â¿Ella se habrÃ¡ graduado para entonces?",tip:'Pregunta si algo estarÃ¡ completado antes de un momento futuro. Usa "by + tiempo".'},"future continuous":{name:"Questions: Future Continuous - Preguntas: Futuro continuo",description:'Se invierte "will" con el sujeto.',structure:"Will + sujeto + be + verbo-ing",example:"Will you be working tomorrow? / What will she be doing at 8 PM?",exampleEs:"Â¿EstarÃ¡s trabajando maÃ±ana? / Â¿QuÃ© estarÃ¡ haciendo ella a las 8 PM?",tip:"Pregunta si algo estarÃ¡ en progreso en un momento futuro especÃ­fico."},"mixed conditional":{name:"Questions: Mixed Conditional - Preguntas: Condicional mixto",description:'Se invierte "would" con el sujeto en la clÃ¡usula principal.',structure:"Would + sujeto + verbo base + if + past perfect / Would + sujeto + have + participio + if + past simple",example:"Would you be happier if you had chosen differently? / Would she have succeeded if she were more patient?",exampleEs:"Â¿SerÃ­as mÃ¡s feliz si hubieras elegido diferente? / Â¿HabrÃ­a tenido Ã©xito si fuera mÃ¡s paciente?",tip:'Pregunta sobre situaciones hipotÃ©ticas que mezclan tiempos. La clÃ¡usula "if" no cambia.'},"past perfect continuous":{name:"Questions: Past Perfect Continuous - Preguntas: Pasado perfecto continuo",description:'Se invierte "had" con el sujeto.',structure:"Had + sujeto + been + verbo-ing",example:"Had you been waiting long? / How long had she been working there?",exampleEs:"Â¿HabÃ­as estado esperando mucho? / Â¿CuÃ¡nto tiempo habÃ­a estado trabajando allÃ­?",tip:'Pregunta sobre la duraciÃ³n de una acciÃ³n antes de otro evento pasado. Usa "how long" frecuentemente.'},"past perfect":{name:"Questions: Past Perfect - Preguntas: Pasado perfecto",description:'Se invierte "had" con el sujeto.',structure:"Had + sujeto + participio pasado",example:"Had you eaten before? / Had she already left?",exampleEs:"Â¿HabÃ­as comido antes? / Â¿Ella ya se habÃ­a ido?",tip:'"Had" es igual para todas las personas. Suele aparecer con "already", "ever", "before".'},"passive voice":{name:"Questions: Passive Voice - Preguntas: Voz pasiva",description:"Se invierte el auxiliar de la pasiva (is/was/have been/will be) con el sujeto.",structure:"Auxiliar + sujeto + participio pasado",example:"Was the letter sent? / Has the project been finished?",exampleEs:"Â¿Fue enviada la carta? / Â¿Ha sido terminado el proyecto?",tip:"Identifica el auxiliar de la voz pasiva y muÃ©velo al inicio."},"reported speech":{name:"Questions: Reported Speech - Preguntas: Discurso indirecto",description:"Las preguntas reportadas pierden la inversiÃ³n y usan orden de afirmaciÃ³n.",structure:"Sujeto + asked/wanted to know + if/wh- + orden normal",example:"She asked if I was coming. / He wanted to know where I lived.",exampleEs:"Ella preguntÃ³ si yo iba. / Ã‰l querÃ­a saber dÃ³nde vivÃ­a yo.",tip:'Las yes/no questions usan "if/whether". Las wh-questions mantienen la palabra interrogativa pero sin inversiÃ³n.'},subjunctive:{name:"Questions: Subjunctive - Preguntas: Subjuntivo",description:"Preguntas con deseos o sugerencias hipotÃ©ticas.",structure:"Do you wish + past simple / Should + sujeto + verbo base",example:"Do you wish you were taller? / Should he study harder?",exampleEs:"Â¿DesearÃ­as ser mÃ¡s alto? / Â¿DeberÃ­a Ã©l estudiar mÃ¡s?",tip:'Con "wish" se pregunta sobre deseos. Con "should" se pide consejo o sugerencia.'},"third conditional":{name:"Questions: Third Conditional - Preguntas: Tercer condicional",description:'Se invierte "would" con el sujeto en la clÃ¡usula principal.',structure:"Would + sujeto + have + participio + if + past perfect",example:"Would you have gone if she had invited you?",exampleEs:"Â¿HabrÃ­as ido si ella te hubiera invitado?",tip:'Pregunta sobre situaciones hipotÃ©ticas del pasado. La clÃ¡usula con "if" no cambia.'},articles:{name:"Questions: Articles - Preguntas: ArtÃ­culos",description:"Las preguntas con artÃ­culos funcionan como cualquier pregunta, manteniendo el artÃ­culo correcto.",structure:"Auxiliar + sujeto + verbo + a/an/the + sustantivo",example:"Is there a doctor nearby? / Did you read the book? / Do you have an umbrella?",exampleEs:"Â¿Hay un doctor cerca? / Â¿LeÃ­ste el libro? / Â¿Tienes un paraguas?",tip:"El artÃ­culo no cambia al formar preguntas. La pregunta se forma con el auxiliar, no con el artÃ­culo."},"there is/are":{name:"Questions: There is/are - Preguntas: Hay",description:'Se invierte "there" con "is/are".',structure:"Is there + singular Â· Are there + plural",example:"Is there a pharmacy nearby? / Are there any questions?",exampleEs:"Â¿Hay una farmacia cerca? / Â¿Hay alguna pregunta?",tip:'Usa "any" en preguntas: "Are there any chairs?" (no "Are there some chairs?"). Con "how many/much": "How many students are there?"'},prepositions:{name:"Questions: Prepositions - Preguntas: Preposiciones",description:"Las preguntas con preposiciones mantienen la preposiciÃ³n, a menudo al final.",structure:"Wh-word + auxiliar + sujeto + verbo + preposiciÃ³n",example:"Where do you live? / What time does the meeting start at? / Who are you waiting for?",exampleEs:"Â¿DÃ³nde vives? / Â¿A quÃ© hora empieza la reuniÃ³n? / Â¿A quiÃ©n estÃ¡s esperando?",tip:'En inglÃ©s informal la preposiciÃ³n va al final: "Who are you talking to?" En formal va al inicio: "To whom are you talking?" La primera forma es mucho mÃ¡s natural.'},connectors:{name:"Questions: Connectors - Preguntas: Conectores",description:"Las preguntas pueden contener conectores para unir ideas complejas.",structure:"Auxiliar + sujeto + verbo + conector + clÃ¡usula",example:"Did you go out even though it was raining? / Will you accept despite the low salary?",exampleEs:"Â¿Saliste aunque estaba lloviendo? / Â¿AceptarÃ¡s a pesar del bajo salario?",tip:"El conector se mantiene igual en preguntas. La inversiÃ³n solo ocurre en la clÃ¡usula principal."},causative:{name:"Questions: Causative - Preguntas: Causativo",description:"Se invierte el auxiliar con el sujeto, manteniendo la estructura causativa.",structure:"Auxiliar + sujeto + have/get + objeto + participio pasado",example:"Did you have your car repaired? / Have you gotten your hair cut?",exampleEs:"Â¿Hiciste reparar tu carro? / Â¿Te cortaste el pelo?",tip:'Se pregunta sobre "have/get" como con cualquier verbo: "Did you have...done?", "Are you having...fixed?", "Will you get...delivered?"'},"wish/if only":{name:"Questions: Wish/If only - Preguntas: Desear/Si tan solo",description:"Se puede preguntar sobre los deseos de alguien invirtiendo el auxiliar.",structure:"Do you wish + past simple / Don't you wish + past simple",example:"Do you wish you had more free time? / Don't you wish you could fly?",exampleEs:"Â¿DesearÃ­as tener mÃ¡s tiempo libre? / Â¿No desearÃ­as poder volar?",tip:'La estructura "wish + past" se mantiene dentro de la pregunta. Solo se agrega "do you" al inicio.'},inversion:{name:"Questions: Inversion - Preguntas: InversiÃ³n",description:"Las inversiones son estructuras enfÃ¡ticas que ya tienen orden de pregunta, pero no son preguntas.",structure:"La inversiÃ³n no forma preguntas â€” es enfÃ¡tica. Para preguntar sobre inversiones se usa pregunta normal.",example:'Have you ever heard the expression "Not only...but also"? / Do you know what inversion means?',exampleEs:'Â¿Has escuchado alguna vez la expresiÃ³n "Not only...but also"? / Â¿Sabes quÃ© significa la inversiÃ³n?',tip:'La inversiÃ³n en sÃ­ parece pregunta por el orden auxiliar-sujeto, pero NO es pregunta â€” es Ã©nfasis. "Never have I seen" es una afirmaciÃ³n enfÃ¡tica, no una pregunta.'}};function Lr(a){const e=a.toLowerCase().trim();if(H[e])return H[e];for(const t of Object.keys(H))if(e.includes(t)||t.includes(e))return H[t];return e.includes("passive")?H["passive voice"]:e.includes("modal")?H.modals:Xs}ht.push({level:"NegaciÃ³n",tenses:[Js,z["present simple"],z["present continuous"],z["going to"],z["simple past"],z.imperative,z["present perfect"],z["present perfect continuous"],z["past continuous"],z["will future"],z["first conditional"],z["second conditional"],z["zero conditional"],z.modals,z["used to"],z["gerund vs infinitive"],z["relative clauses"],z["past perfect"],z["past perfect continuous"],z["third conditional"],z["mixed conditional"],z["passive voice"],z["reported speech"],z.subjunctive,z["comparatives and superlatives"],z["future perfect"],z["future continuous"],z.articles,z["there is/are"],z.prepositions,z.connectors,z.causative,z["wish/if only"],z.inversion]});ht.push({level:"Preguntas",tenses:[Xs,H["present simple"],H["present continuous"],H["going to"],H["simple past"],H.imperative,H["present perfect"],H["present perfect continuous"],H["past continuous"],H["will future"],H["first conditional"],H["second conditional"],H["zero conditional"],H.modals,H["used to"],H["gerund vs infinitive"],H["relative clauses"],H["past perfect"],H["past perfect continuous"],H["third conditional"],H["mixed conditional"],H["passive voice"],H["reported speech"],H.subjunctive,H["comparatives and superlatives"],H["future perfect"],H["future continuous"],H.articles,H["there is/are"],H.prepositions,H.connectors,H.causative,H["wish/if only"],H.inversion]});ht.push(Dr);function Ur(a){const e=a.toLowerCase().trim();for(const l of ht)for(const i of l.tenses)if(i.name.split(" - ")[0].toLowerCase().trim()===e)return i;let t=e.replace(/\([^)]*\)/g,"").replace(/[-â€“,]/g," ").trim();t.includes("passive")&&!t.includes("voice")&&(t=t.replace("passive","passive voice")),t.includes("future")&&!t.includes("will")&&(t+=" will");const s=new Set(t.split(/\s+/).filter(Boolean));let n=null,r=0;for(const l of ht)for(const i of l.tenses){const m=i.name.split(" - ")[0].toLowerCase().replace(/\([^)]*\)/g,"").replace(/[-â€“,:]/g," ").split(/\s+/).filter(Boolean);m.every(v=>s.has(v))&&m.length>r&&(n=i,r=m.length)}return n}var zr=N('<p class="spanish-sentence svelte-n845i0"> </p>'),Hr=Un('<svg class="info-icon svelte-n845i0" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>'),Wr=N('<button class="tag negative clickable svelte-n845i0">negativo <svg class="info-icon svelte-n845i0" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg></button>'),Fr=N('<button class="tag question clickable svelte-n845i0">pregunta <svg class="info-icon svelte-n845i0" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg></button>'),Vr=N('<div class="tense-popup svelte-n845i0"><p class="popup-title svelte-n845i0"> </p> <p class="popup-desc svelte-n845i0"> </p> <div class="popup-detail svelte-n845i0"><span class="popup-label svelte-n845i0">Estructura</span> <p class="popup-text svelte-n845i0"> </p></div> <div class="popup-detail example svelte-n845i0"><span class="popup-label svelte-n845i0">Ejemplo</span> <p class="popup-text svelte-n845i0"> </p> <p class="popup-text-es svelte-n845i0"> </p></div> <div class="popup-detail tip svelte-n845i0"><span class="popup-label svelte-n845i0">Tip</span> <p class="popup-text svelte-n845i0"> </p></div></div>'),Br=N('<div class="tense-popup question-popup svelte-n845i0"><p class="popup-title svelte-n845i0"> </p> <p class="popup-desc svelte-n845i0"> </p> <div class="popup-detail svelte-n845i0"><span class="popup-label svelte-n845i0">Estructura</span> <p class="popup-text svelte-n845i0"> </p></div> <div class="popup-detail example svelte-n845i0"><span class="popup-label svelte-n845i0">Ejemplo</span> <p class="popup-text svelte-n845i0"> </p> <p class="popup-text-es svelte-n845i0"> </p></div> <div class="popup-detail tip svelte-n845i0"><span class="popup-label svelte-n845i0">Tip</span> <p class="popup-text svelte-n845i0"> </p></div></div>'),$r=N('<div class="tense-popup negative-popup svelte-n845i0"><p class="popup-title svelte-n845i0"> </p> <p class="popup-desc svelte-n845i0"> </p> <div class="popup-detail svelte-n845i0"><span class="popup-label svelte-n845i0">Estructura</span> <p class="popup-text svelte-n845i0"> </p></div> <div class="popup-detail example svelte-n845i0"><span class="popup-label svelte-n845i0">Ejemplo</span> <p class="popup-text svelte-n845i0"> </p> <p class="popup-text-es svelte-n845i0"> </p></div> <div class="popup-detail tip svelte-n845i0"><span class="popup-label svelte-n845i0">Tip</span> <p class="popup-text svelte-n845i0"> </p></div></div>'),Qr=N('<div class="tense-popup help-popup svelte-n845i0"><p class="popup-title svelte-n845i0">Â¿CÃ³mo jugar?</p> <div class="help-steps svelte-n845i0"><div class="help-step svelte-n845i0"><span class="help-number svelte-n845i0">1</span> <p class="svelte-n845i0">Lee las <strong>pistas</strong> y la <strong>oraciÃ³n en espaÃ±ol</strong> para entender quÃ© frase debes armar en inglÃ©s.</p></div> <div class="help-step svelte-n845i0"><span class="help-number svelte-n845i0">2</span> <p class="svelte-n845i0">Toca las <strong>palabras disponibles</strong> para armar tu frase. Cuidado: hay palabras trampa (distractores) que no pertenecen a la respuesta.</p></div> <div class="help-step svelte-n845i0"><span class="help-number svelte-n845i0">3</span> <p class="svelte-n845i0">Si no entiendes una palabra, <strong>mantÃ©n presionado</strong> (toque largo) para ver su traducciÃ³n al espaÃ±ol.</p></div> <div class="help-step svelte-n845i0"><span class="help-number svelte-n845i0">4</span> <p class="svelte-n845i0">Toca la <strong>etiqueta del tiempo verbal</strong> (ej: "present simple", "negativo") para ver una explicaciÃ³n gramatical con ejemplos.</p></div> <div class="help-step svelte-n845i0"><span class="help-number svelte-n845i0">5</span> <p class="svelte-n845i0">Cuando termines, pulsa <strong>Verificar</strong>. Si te equivocas, verÃ¡s la respuesta correcta y una nota gramatical.</p></div></div></div>'),Gr=N('<div class="prompt-display svelte-n845i0"><div class="hints"><p class="hint-label svelte-n845i0">Pistas</p> <p class="hint-text svelte-n845i0"> </p> <!></div> <div class="meta svelte-n845i0"><button> <!></button> <!> <!> <button class="help-btn svelte-n845i0" title="Â¿CÃ³mo jugar?"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path><line x1="12" y1="17" x2="12.01" y2="17"></line></svg></button></div> <!> <!> <!> <!></div>');function Jr(a,e){je(e,!0);let t=J(!1),s=J(!1),n=J(!1),r=J(!1);const l=K(()=>Ur(e.metadata.tense)),i=K(()=>Lr(e.metadata.tense)),u=K(()=>Or(e.metadata.tense));function m(){o(l)&&I(t,!o(t)),I(s,!1),I(n,!1)}function v(){I(s,!o(s)),I(t,!1),I(n,!1)}function x(){I(n,!o(n)),I(t,!1),I(s,!1)}var _=Gr(),g=d(_),S=h(d(g),2),M=d(S,!0);c(S);var f=h(S,2);{var y=q=>{var L=zr(),Z=d(L,!0);c(L),V(()=>k(Z,e.spanishSentence)),P(q,L)};Q(f,q=>{e.spanishSentence&&q(y)})}c(g);var T=h(g,2),W=d(T);let F;W.__click=m;var A=d(W),b=h(A);{var w=q=>{var L=Hr();P(q,L)};Q(b,q=>{o(l)&&q(w)})}c(W);var j=h(W,2);{var E=q=>{var L=Wr();L.__click=x,P(q,L)};Q(j,q=>{e.metadata.isNegative&&q(E)})}var C=h(j,2);{var D=q=>{var L=Fr();L.__click=v,P(q,L)};Q(C,q=>{e.metadata.isQuestion&&q(D)})}var G=h(C,2);G.__click=()=>I(r,!o(r)),c(T);var te=h(T,2);{var de=q=>{var L=Vr(),Z=d(L),we=d(Z,!0);c(Z);var ue=h(Z,2),le=d(ue,!0);c(ue);var X=h(ue,2),ee=h(d(X),2),ve=d(ee,!0);c(ee),c(X);var Y=h(X,2),se=h(d(Y),2),ce=d(se,!0);c(se);var re=h(se,2),_e=d(re,!0);c(re),c(Y);var fe=h(Y,2),ge=h(d(fe),2),he=d(ge,!0);c(ge),c(fe),c(L),V(()=>{k(we,o(l).name),k(le,o(l).description),k(ve,o(l).structure),k(ce,o(l).example),k(_e,o(l).exampleEs),k(he,o(l).tip)}),P(q,L)};Q(te,q=>{o(t)&&o(l)&&q(de)})}var oe=h(te,2);{var ae=q=>{var L=Br(),Z=d(L),we=d(Z,!0);c(Z);var ue=h(Z,2),le=d(ue,!0);c(ue);var X=h(ue,2),ee=h(d(X),2),ve=d(ee,!0);c(ee),c(X);var Y=h(X,2),se=h(d(Y),2),ce=d(se,!0);c(se);var re=h(se,2),_e=d(re,!0);c(re),c(Y);var fe=h(Y,2),ge=h(d(fe),2),he=d(ge,!0);c(ge),c(fe),c(L),V(()=>{k(we,o(i).name),k(le,o(i).description),k(ve,o(i).structure),k(ce,o(i).example),k(_e,o(i).exampleEs),k(he,o(i).tip)}),P(q,L)};Q(oe,q=>{o(s)&&q(ae)})}var B=h(oe,2);{var $=q=>{var L=$r(),Z=d(L),we=d(Z,!0);c(Z);var ue=h(Z,2),le=d(ue,!0);c(ue);var X=h(ue,2),ee=h(d(X),2),ve=d(ee,!0);c(ee),c(X);var Y=h(X,2),se=h(d(Y),2),ce=d(se,!0);c(se);var re=h(se,2),_e=d(re,!0);c(re),c(Y);var fe=h(Y,2),ge=h(d(fe),2),he=d(ge,!0);c(ge),c(fe),c(L),V(()=>{k(we,o(u).name),k(le,o(u).description),k(ve,o(u).structure),k(ce,o(u).example),k(_e,o(u).exampleEs),k(he,o(u).tip)}),P(q,L)};Q(B,q=>{o(n)&&q($)})}var U=h(B,2);{var ie=q=>{var L=Qr();P(q,L)};Q(U,q=>{o(r)&&q(ie)})}c(_),V(()=>{k(M,e.hintDisplay),F=Ue(W,1,"tag tense-tag svelte-n845i0",null,F,{clickable:!!o(l)}),k(A,`${e.metadata.tense??""} `)}),P(a,_),Ne()}Oe(["click"]);let ct;function Ja(){if(ct!==void 0)return ct;const a=speechSynthesis.getVoices(),e=a.find(n=>n.default&&n.lang.startsWith("en"));if(!e||!e.name.toLowerCase().includes("alex"))return ct=null,null;const t=a.filter(n=>n.lang.startsWith("en")),s=["samantha","siri","daniel","karen"];for(const n of s){const r=t.find(l=>l.name.toLowerCase().includes(n)&&!l.name.toLowerCase().includes("alex"));if(r)return ct=r,r}return ct=null,null}typeof speechSynthesis<"u"&&(speechSynthesis.getVoices(),speechSynthesis.addEventListener("voiceschanged",()=>{ct=void 0,Ja()}));function Xr(a){if(typeof speechSynthesis>"u")return;speechSynthesis.cancel();const e=new SpeechSynthesisUtterance(a);e.lang="en-US",e.rate=.9;const t=Ja();t&&(e.voice=t),speechSynthesis.speak(e)}function Da(a){if(typeof speechSynthesis>"u")return;speechSynthesis.cancel();const e=new SpeechSynthesisUtterance(a);e.lang="en-US",e.rate=.85;const t=Ja();t&&(e.voice=t),speechSynthesis.speak(e)}var Yr=N('<div class="tooltip svelte-pj5bsu"> </div>'),Kr=N('<div class="word-card-wrapper svelte-pj5bsu"><!> <button> </button></div>');function Ys(a,e){je(e,!0);let t=hr(e,"variant",3,"pool"),s=J(!1),n=null,r=!1;function l(){r=!1,n=setTimeout(()=>{e.translation&&(I(s,!0),r=!0)},500)}function i(){n&&(clearTimeout(n),n=null),o(s)&&setTimeout(()=>{I(s,!1)},1200),r&&(r=!1)}function u(){r||(e.onclick(),Xr(e.text)),r=!1}var m=Kr(),v=d(m);{var x=S=>{var M=Yr(),f=d(M,!0);c(M),V(()=>k(f,e.translation)),P(S,M)};Q(v,S=>{o(s)&&e.translation&&S(x)})}var _=h(v,2);_.__click=u,_.__pointerdown=l,_.__pointerup=i,_.__contextmenu=S=>S.preventDefault();var g=d(_,!0);c(_),c(m),V(()=>{Ue(_,1,`word-card ${t()??""}`,"svelte-pj5bsu"),k(g,e.text)}),Fs("pointerleave",_,i),P(a,m),Ne()}Oe(["click","pointerdown","pointerup","contextmenu"]);var Zr=N('<p class="placeholder svelte-1d0eofs">Toca las palabras para armar la frase...</p>'),eo=N('<div class="sentence-area svelte-1d0eofs"><p class="label svelte-1d0eofs">Tu frase</p> <div class="sentence-box svelte-1d0eofs"><!> <!></div></div>');function to(a,e){je(e,!0);var t=eo(),s=h(d(t),2),n=d(s);me(n,17,()=>e.cards,i=>i.id,(i,u)=>{Ys(i,{get text(){return o(u).text},onclick:()=>e.ondeselect(o(u).id),variant:"sentence",get translation(){return o(u).translation}})});var r=h(n,2);{var l=i=>{var u=Zr();P(i,u)};Q(r,i=>{e.cards.length===0&&i(l)})}c(s),c(t),P(a,t),Ne()}var ao=N('<p class="empty svelte-ymehbo">Todas las palabras fueron usadas</p>'),so=N('<div class="card-pool svelte-ymehbo"><p class="label svelte-ymehbo">Palabras disponibles</p> <div class="cards svelte-ymehbo"><!> <!></div></div>');function no(a,e){je(e,!0);var t=so(),s=h(d(t),2),n=d(s);me(n,17,()=>e.cards,i=>i.id,(i,u)=>{Ys(i,{get text(){return o(u).text},onclick:()=>e.onselect(o(u).id),variant:"pool",get translation(){return o(u).translation}})});var r=h(n,2);{var l=i=>{var u=ao();P(i,u)};Q(r,i=>{e.cards.length===0&&i(l)})}c(s),c(t),P(a,t),Ne()}var ro=N('<div class="correct-answer svelte-p7nz7"><p class="correct-label svelte-p7nz7">Respuesta correcta:</p> <div class="correct-text-row svelte-p7nz7"><p class="correct-text svelte-p7nz7"> </p> <button class="speak-btn svelte-p7nz7" aria-label="Escuchar pronunciaciÃ³n">ğŸ”Š</button></div></div>'),oo=N('<div class="speak-row svelte-p7nz7"><button class="speak-btn svelte-p7nz7" aria-label="Escuchar pronunciaciÃ³n">ğŸ”Š Escuchar</button></div>'),io=N('<div><div class="result-icon svelte-p7nz7"> </div> <p class="result-label svelte-p7nz7"> </p> <p class="feedback svelte-p7nz7"> </p> <!> <div class="grammar-note svelte-p7nz7"><p class="note-label svelte-p7nz7">Nota gramatical</p> <p class="note-text svelte-p7nz7"> </p></div> <button class="next-btn svelte-p7nz7"> </button></div>');function lo(a,e){je(e,!0);var t=io(),s=d(t),n=d(s,!0);c(s);var r=h(s,2),l=d(r,!0);c(r);var i=h(r,2),u=d(i,!0);c(i);var m=h(i,2);{var v=y=>{var T=ro(),W=h(d(T),2),F=d(W),A=d(F,!0);c(F);var b=h(F,2);b.__click=()=>Da(e.correctSentence),c(W),c(T),V(()=>k(A,e.result.correctSentence)),P(y,T)},x=y=>{var T=oo(),W=d(T);W.__click=()=>Da(e.userSentence),c(T),P(y,T)};Q(m,y=>{e.result.isCorrect?y(x,!1):y(v)})}var _=h(m,2),g=h(d(_),2),S=d(g,!0);c(g),c(_);var M=h(_,2);M.__click=function(...y){e.onnext?.apply(this,y)};var f=d(M,!0);c(M),c(t),V(()=>{Ue(t,1,`feedback-panel ${e.result.isCorrect?"correct":"incorrect"}`,"svelte-p7nz7"),k(n,e.result.isCorrect?"âœ“":"âœ—"),k(l,e.result.isCorrect?"Â¡Correcto!":"Incorrecto"),k(u,e.result.feedback),k(S,e.result.grammarNote),k(f,e.nextLabel??"Siguiente")}),P(a,t),Ne()}Oe(["click"]);var co=N('<div class="score-bar svelte-1szkqx"><button class="back-btn svelte-1szkqx" aria-label="Volver al inicio"><svg class="home-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor" stroke="none"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"></path></svg> <span class="back-label svelte-1szkqx">Inicio</span></button> <div class="stat svelte-1szkqx"><span class="stat-value svelte-1szkqx"> </span> <span class="stat-label svelte-1szkqx">Ronda</span></div> <div class="stat svelte-1szkqx"><span class="stat-value svelte-1szkqx"> </span> <span class="stat-label svelte-1szkqx">Aciertos</span></div> <div class="stat svelte-1szkqx"><span class="stat-value svelte-1szkqx"> </span> <span class="stat-label svelte-1szkqx">Racha</span></div> <div class="stat svelte-1szkqx"><span class="stat-value svelte-1szkqx"> </span> <span class="stat-label svelte-1szkqx">Mejor</span></div></div>');function uo(a,e){je(e,!0);var t=co(),s=d(t);s.__click=function(...f){e.onback?.apply(this,f)};var n=h(s,2),r=d(n),l=d(r,!0);c(r),Se(2),c(n);var i=h(n,2),u=d(i),m=d(u);c(u),Se(2),c(i);var v=h(i,2),x=d(v),_=d(x,!0);c(x),Se(2),c(v);var g=h(v,2),S=d(g),M=d(S,!0);c(S),Se(2),c(g),c(t),V(()=>{k(l,e.session.currentRound),k(m,`${e.session.totalCorrect??""}/${e.session.totalAttempted??""}`),k(_,e.session.streak),k(M,e.session.bestStreak)}),P(a,t),Ne()}Oe(["click"]);let Xa=J(""),Ks=J("beginner"),Zs=J("random"),en=J(void 0),tn=J(!1),Ya=J("setup"),Ye=J(null),qe=J(da([])),qt=J(null),Dt=J(null),ia=J(da([])),Ka=J("home"),pa=J(!1),ha=J(null),Ce=J(da({currentRound:0,totalCorrect:0,totalAttempted:0,streak:0,bestStreak:0}));function ms(){return o(Xa)}function po(){return o(Ks)}function ho(){return o(Zs)}function mo(){return o(en)}function fo(){return o(tn)}function an(){return o(Ya)}function vo(){return o(Ye)}function go(){return o(qt)}function bo(){return o(Dt)}function yo(){return o(ia)}function wo(){return o(Ce)}function _o(){return o(Ka)}function xo(){return o(pa)}function So(){return o(ha)}function ko(a){I(Xa,a,!0),localStorage.setItem("grammar_game_api_key",a)}function Eo(){const a=localStorage.getItem("grammar_game_api_key");return a&&I(Xa,a,!0),!!a}function To(a){I(Ks,a,!0)}function Io(a){I(Zs,a,!0)}function Po(a){I(en,a,!0)}function jo(a){I(tn,a,!0)}function Fe(a){I(Ka,a,!0)}function No(a){I(pa,!0),I(ha,a,!0)}function fs(){I(pa,!1),I(ha,null)}function Ae(a){I(Ya,a,!0)}function Oa(a){I(Ye,a,!0),I(qe,[],!0),I(qt,null),I(Dt,null),I(ia,[...o(ia).slice(-9),a.correctSentence],!0)}function Co(a){I(qt,a,!0),o(Ce).totalAttempted++,a.isCorrect?(o(Ce).totalCorrect++,o(Ce).streak++,o(Ce).streak>o(Ce).bestStreak&&(o(Ce).bestStreak=o(Ce).streak)):o(Ce).streak=0}function Nt(a){I(Dt,a,!0)}function Ro(a){o(qe).includes(a)||I(qe,[...o(qe),a],!0)}function Ao(a){I(qe,o(qe).filter(e=>e!==a),!0)}function Mo(){I(qe,[],!0)}function qo(){return o(Ye)?o(Ye).cards.filter(a=>!o(qe).includes(a.id)):[]}function sn(){return o(Ye)?o(qe).map(a=>o(Ye).cards.find(e=>e.id===a)).filter(a=>a!==void 0):[]}function Do(){return sn().map(a=>a.text).join(" ")}function nn(){o(Ce).currentRound++,I(Ye,null),I(qe,[],!0),I(qt,null),I(Dt,null)}function vs(){I(Ya,"setup"),I(Ye,null),I(qe,[],!0),I(qt,null),I(Dt,null),I(ia,[],!0),I(pa,!1),I(ha,null),I(Ka,"home"),I(Ce,{currentRound:0,totalCorrect:0,totalAttempted:0,streak:0,bestStreak:0},!0)}function R(a,e,t,s,n){if(typeof e=="function"?a!==e||!0:!e.has(a))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(a,t),t}function p(a,e,t,s){if(t==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?a!==e||!s:!e.has(a))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?s:t==="a"?s.call(a):s?s.value:e.get(a)}let rn=function(){const{crypto:a}=globalThis;if(a?.randomUUID)return rn=a.randomUUID.bind(a),a.randomUUID();const e=new Uint8Array(1),t=a?()=>a.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^t()&15>>+s/4).toString(16))};function Mt(a){return typeof a=="object"&&a!==null&&("name"in a&&a.name==="AbortError"||"message"in a&&String(a.message).includes("FetchRequestCanceledException"))}const La=a=>{if(a instanceof Error)return a;if(typeof a=="object"&&a!==null){try{if(Object.prototype.toString.call(a)==="[object Error]"){const e=new Error(a.message,a.cause?{cause:a.cause}:{});return a.stack&&(e.stack=a.stack),a.cause&&!e.cause&&(e.cause=a.cause),a.name&&(e.name=a.name),e}}catch{}try{return new Error(JSON.stringify(a))}catch{}}return new Error(a)};class O extends Error{}class ye extends O{constructor(e,t,s,n){super(`${ye.makeMessage(e,t,s)}`),this.status=e,this.headers=n,this.requestID=n?.get("request-id"),this.error=t}static makeMessage(e,t,s){const n=t?.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):s;return e&&n?`${e} ${n}`:e?`${e} status code (no body)`:n||"(no status code or body)"}static generate(e,t,s,n){if(!e||!n)return new ma({message:s,cause:La(t)});const r=t;return e===400?new ln(e,r,s,n):e===401?new cn(e,r,s,n):e===403?new un(e,r,s,n):e===404?new dn(e,r,s,n):e===409?new pn(e,r,s,n):e===422?new hn(e,r,s,n):e===429?new mn(e,r,s,n):e>=500?new fn(e,r,s,n):new ye(e,r,s,n)}}class Me extends ye{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class ma extends ye{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class on extends ma{constructor({message:e}={}){super({message:e??"Request timed out."})}}class ln extends ye{}class cn extends ye{}class un extends ye{}class dn extends ye{}class pn extends ye{}class hn extends ye{}class mn extends ye{}class fn extends ye{}const Oo=/^[a-z][a-z0-9+.-]*:/i,Lo=a=>Oo.test(a);let Ua=a=>(Ua=Array.isArray,Ua(a)),gs=Ua;function bs(a){return typeof a!="object"?{}:a??{}}function Uo(a){if(!a)return!0;for(const e in a)return!1;return!0}function zo(a,e){return Object.prototype.hasOwnProperty.call(a,e)}const Ho=(a,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new O(`${a} must be an integer`);if(e<0)throw new O(`${a} must be a positive integer`);return e},vn=a=>{try{return JSON.parse(a)}catch{return}},Wo=a=>new Promise(e=>setTimeout(e,a)),ut="0.65.0",Fo=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function Vo(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const Bo=()=>{const a=Vo();if(a==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ut,"X-Stainless-OS":ws(Deno.build.os),"X-Stainless-Arch":ys(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ut,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(a==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ut,"X-Stainless-OS":ws(globalThis.process.platform??"unknown"),"X-Stainless-Arch":ys(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=$o();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ut,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ut,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function $o(){if(typeof navigator>"u"||!navigator)return null;const a=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of a){const s=t.exec(navigator.userAgent);if(s){const n=s[1]||0,r=s[2]||0,l=s[3]||0;return{browser:e,version:`${n}.${r}.${l}`}}}return null}const ys=a=>a==="x32"?"x32":a==="x86_64"||a==="x64"?"x64":a==="arm"?"arm":a==="aarch64"||a==="arm64"?"arm64":a?`other:${a}`:"unknown",ws=a=>(a=a.toLowerCase(),a.includes("ios")?"iOS":a==="android"?"Android":a==="darwin"?"MacOS":a==="win32"?"Windows":a==="freebsd"?"FreeBSD":a==="openbsd"?"OpenBSD":a==="linux"?"Linux":a?`Other:${a}`:"Unknown");let _s;const Qo=()=>_s??(_s=Bo());function Go(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new Anthropic({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function gn(...a){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...a)}function bn(a){let e=Symbol.asyncIterator in a?a[Symbol.asyncIterator]():a[Symbol.iterator]();return gn({start(){},async pull(t){const{done:s,value:n}=await e.next();s?t.close():t.enqueue(n)},async cancel(){await e.return?.()}})}function Za(a){if(a[Symbol.asyncIterator])return a;const e=a.getReader();return{async next(){try{const t=await e.read();return t?.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Jo(a){if(a===null||typeof a!="object")return;if(a[Symbol.asyncIterator]){await a[Symbol.asyncIterator]().return?.();return}const e=a.getReader(),t=e.cancel();e.releaseLock(),await t}const Xo=({headers:a,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});function Yo(a){let e=0;for(const n of a)e+=n.length;const t=new Uint8Array(e);let s=0;for(const n of a)t.set(n,s),s+=n.length;return t}let xs;function es(a){let e;return(xs??(e=new globalThis.TextEncoder,xs=e.encode.bind(e)))(a)}let Ss;function ks(a){let e;return(Ss??(e=new globalThis.TextDecoder,Ss=e.decode.bind(e)))(a)}var Ee,Te;class Ot{constructor(){Ee.set(this,void 0),Te.set(this,void 0),R(this,Ee,new Uint8Array),R(this,Te,null)}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?es(e):e;R(this,Ee,Yo([p(this,Ee,"f"),t]));const s=[];let n;for(;(n=Ko(p(this,Ee,"f"),p(this,Te,"f")))!=null;){if(n.carriage&&p(this,Te,"f")==null){R(this,Te,n.index);continue}if(p(this,Te,"f")!=null&&(n.index!==p(this,Te,"f")+1||n.carriage)){s.push(ks(p(this,Ee,"f").subarray(0,p(this,Te,"f")-1))),R(this,Ee,p(this,Ee,"f").subarray(p(this,Te,"f"))),R(this,Te,null);continue}const r=p(this,Te,"f")!==null?n.preceding-1:n.preceding,l=ks(p(this,Ee,"f").subarray(0,r));s.push(l),R(this,Ee,p(this,Ee,"f").subarray(n.index)),R(this,Te,null)}return s}flush(){return p(this,Ee,"f").length?this.decode(`
`):[]}}Ee=new WeakMap,Te=new WeakMap;Ot.NEWLINE_CHARS=new Set([`
`,"\r"]);Ot.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Ko(a,e){for(let n=e??0;n<a.length;n++){if(a[n]===10)return{preceding:n,index:n+1,carriage:!1};if(a[n]===13)return{preceding:n,index:n+1,carriage:!0}}return null}function Zo(a){for(let s=0;s<a.length-1;s++){if(a[s]===10&&a[s+1]===10||a[s]===13&&a[s+1]===13)return s+2;if(a[s]===13&&a[s+1]===10&&s+3<a.length&&a[s+2]===13&&a[s+3]===10)return s+4}return-1}const la={off:0,error:200,warn:300,info:400,debug:500},Es=(a,e,t)=>{if(a){if(zo(la,a))return a;xe(t).warn(`${e} was set to ${JSON.stringify(a)}, expected one of ${JSON.stringify(Object.keys(la))}`)}};function Ct(){}function Wt(a,e,t){return!e||la[a]>la[t]?Ct:e[a].bind(e)}const ei={error:Ct,warn:Ct,info:Ct,debug:Ct};let Ts=new WeakMap;function xe(a){const e=a.logger,t=a.logLevel??"off";if(!e)return ei;const s=Ts.get(e);if(s&&s[0]===t)return s[1];const n={error:Wt("error",e,t),warn:Wt("warn",e,t),info:Wt("info",e,t),debug:Wt("debug",e,t)};return Ts.set(e,[t,n]),n}const tt=a=>(a.options&&(a.options={...a.options},delete a.options.headers),a.headers&&(a.headers=Object.fromEntries((a.headers instanceof Headers?[...a.headers]:Object.entries(a.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in a&&(a.retryOfRequestLogID&&(a.retryOf=a.retryOfRequestLogID),delete a.retryOfRequestLogID),a);var ft;class ze{constructor(e,t,s){this.iterator=e,ft.set(this,void 0),this.controller=t,R(this,ft,s)}static fromSSEResponse(e,t,s){let n=!1;const r=s?xe(s):console;async function*l(){if(n)throw new O("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let i=!1;try{for await(const u of ti(e,t)){if(u.event==="completion")try{yield JSON.parse(u.data)}catch(m){throw r.error("Could not parse message into JSON:",u.data),r.error("From chunk:",u.raw),m}if(u.event==="message_start"||u.event==="message_delta"||u.event==="message_stop"||u.event==="content_block_start"||u.event==="content_block_delta"||u.event==="content_block_stop")try{yield JSON.parse(u.data)}catch(m){throw r.error("Could not parse message into JSON:",u.data),r.error("From chunk:",u.raw),m}if(u.event!=="ping"&&u.event==="error")throw new ye(void 0,vn(u.data)??u.data,void 0,e.headers)}i=!0}catch(u){if(Mt(u))return;throw u}finally{i||t.abort()}}return new ze(l,t,s)}static fromReadableStream(e,t,s){let n=!1;async function*r(){const i=new Ot,u=Za(e);for await(const m of u)for(const v of i.decode(m))yield v;for(const m of i.flush())yield m}async function*l(){if(n)throw new O("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let i=!1;try{for await(const u of r())i||u&&(yield JSON.parse(u));i=!0}catch(u){if(Mt(u))return;throw u}finally{i||t.abort()}}return new ze(l,t,s)}[(ft=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],t=[],s=this.iterator(),n=r=>({next:()=>{if(r.length===0){const l=s.next();e.push(l),t.push(l)}return r.shift()}});return[new ze(()=>n(e),this.controller,p(this,ft,"f")),new ze(()=>n(t),this.controller,p(this,ft,"f"))]}toReadableStream(){const e=this;let t;return gn({async start(){t=e[Symbol.asyncIterator]()},async pull(s){try{const{value:n,done:r}=await t.next();if(r)return s.close();const l=es(JSON.stringify(n)+`
`);s.enqueue(l)}catch(n){s.error(n)}},async cancel(){await t.return?.()}})}}async function*ti(a,e){if(!a.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new O("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new O("Attempted to iterate over a response with no body");const t=new si,s=new Ot,n=Za(a.body);for await(const r of ai(n))for(const l of s.decode(r)){const i=t.decode(l);i&&(yield i)}for(const r of s.flush()){const l=t.decode(r);l&&(yield l)}}async function*ai(a){let e=new Uint8Array;for await(const t of a){if(t==null)continue;const s=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?es(t):t;let n=new Uint8Array(e.length+s.length);n.set(e),n.set(s,e.length),e=n;let r;for(;(r=Zo(e))!==-1;)yield e.slice(0,r),e=e.slice(r)}e.length>0&&(yield e)}class si{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const r={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],r}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,s,n]=ni(e,":");return n.startsWith(" ")&&(n=n.substring(1)),t==="event"?this.event=n:t==="data"&&this.data.push(n),null}}function ni(a,e){const t=a.indexOf(e);return t!==-1?[a.substring(0,t),e,a.substring(t+e.length)]:[a,"",""]}async function yn(a,e){const{response:t,requestLogID:s,retryOfRequestLogID:n,startTime:r}=e,l=await(async()=>{if(e.options.stream)return xe(a).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller):ze.fromSSEResponse(t,e.controller);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const u=t.headers.get("content-type")?.split(";")[0]?.trim();if(u?.includes("application/json")||u?.endsWith("+json")){const x=await t.json();return wn(x,t)}return await t.text()})();return xe(a).debug(`[${s}] response parsed`,tt({retryOfRequestLogID:n,url:t.url,status:t.status,body:l,durationMs:Date.now()-r})),l}function wn(a,e){return!a||typeof a!="object"||Array.isArray(a)?a:Object.defineProperty(a,"_request_id",{value:e.headers.get("request-id"),enumerable:!1})}var Rt;class fa extends Promise{constructor(e,t,s=yn){super(n=>{n(null)}),this.responsePromise=t,this.parseResponse=s,Rt.set(this,void 0),R(this,Rt,e)}_thenUnwrap(e){return new fa(p(this,Rt,"f"),this.responsePromise,async(t,s)=>wn(e(await this.parseResponse(t,s),s),s.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(p(this,Rt,"f"),e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}Rt=new WeakMap;var Ft;class ri{constructor(e,t,s,n){Ft.set(this,void 0),R(this,Ft,e),this.options=n,this.response=t,this.body=s}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new O("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await p(this,Ft,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Ft=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}}class oi extends fa{constructor(e,t,s){super(e,t,async(n,r)=>new s(n,r.response,await yn(n,r),r.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const t of e)yield t}}class Lt extends ri{constructor(e,t,s,n){super(e,t,s,n),this.data=s.data||[],this.has_more=s.has_more||!1,this.first_id=s.first_id||null,this.last_id=s.last_id||null}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){if(this.options.query?.before_id){const t=this.first_id;return t?{...this.options,query:{...bs(this.options.query),before_id:t}}:null}const e=this.last_id;return e?{...this.options,query:{...bs(this.options.query),after_id:e}}:null}}const _n=()=>{if(typeof File>"u"){const{process:a}=globalThis,e=typeof a?.versions?.node=="string"&&parseInt(a.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function pt(a,e,t){return _n(),new File(a,e??"unknown_file",t)}function ra(a){return(typeof a=="object"&&a!==null&&("name"in a&&a.name&&String(a.name)||"url"in a&&a.url&&String(a.url)||"filename"in a&&a.filename&&String(a.filename)||"path"in a&&a.path&&String(a.path))||"").split(/[\\/]/).pop()||void 0}const xn=a=>a!=null&&typeof a=="object"&&typeof a[Symbol.asyncIterator]=="function",ii=async(a,e)=>({...a,body:await ci(a.body,e)}),Is=new WeakMap;function li(a){const e=typeof a=="function"?a:a.fetch,t=Is.get(e);if(t)return t;const s=(async()=>{try{const n="Response"in e?e.Response:(await e("data:,")).constructor,r=new FormData;return r.toString()!==await new n(r).text()}catch{return!0}})();return Is.set(e,s),s}const ci=async(a,e)=>{if(!await li(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const t=new FormData;return await Promise.all(Object.entries(a||{}).map(([s,n])=>za(t,s,n))),t},ui=a=>a instanceof Blob&&"name"in a,za=async(a,e,t)=>{if(t!==void 0){if(t==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof t=="string"||typeof t=="number"||typeof t=="boolean")a.append(e,String(t));else if(t instanceof Response){let s={};const n=t.headers.get("Content-Type");n&&(s={type:n}),a.append(e,pt([await t.blob()],ra(t),s))}else if(xn(t))a.append(e,pt([await new Response(bn(t)).blob()],ra(t)));else if(ui(t))a.append(e,pt([t],ra(t),{type:t.type}));else if(Array.isArray(t))await Promise.all(t.map(s=>za(a,e+"[]",s)));else if(typeof t=="object")await Promise.all(Object.entries(t).map(([s,n])=>za(a,`${e}[${s}]`,n)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${t} instead`)}},Sn=a=>a!=null&&typeof a=="object"&&typeof a.size=="number"&&typeof a.type=="string"&&typeof a.text=="function"&&typeof a.slice=="function"&&typeof a.arrayBuffer=="function",di=a=>a!=null&&typeof a=="object"&&typeof a.name=="string"&&typeof a.lastModified=="number"&&Sn(a),pi=a=>a!=null&&typeof a=="object"&&typeof a.url=="string"&&typeof a.blob=="function";async function hi(a,e,t){if(_n(),a=await a,e||(e=ra(a)),di(a))return a instanceof File&&e==null&&t==null?a:pt([await a.arrayBuffer()],e??a.name,{type:a.type,lastModified:a.lastModified,...t});if(pi(a)){const n=await a.blob();return e||(e=new URL(a.url).pathname.split(/[\\/]/).pop()),pt(await Ha(n),e,t)}const s=await Ha(a);if(!t?.type){const n=s.find(r=>typeof r=="object"&&"type"in r&&r.type);typeof n=="string"&&(t={...t,type:n})}return pt(s,e,t)}async function Ha(a){let e=[];if(typeof a=="string"||ArrayBuffer.isView(a)||a instanceof ArrayBuffer)e.push(a);else if(Sn(a))e.push(a instanceof Blob?a:await a.arrayBuffer());else if(xn(a))for await(const t of a)e.push(...await Ha(t));else{const t=a?.constructor?.name;throw new Error(`Unexpected data type: ${typeof a}${t?`; constructor: ${t}`:""}${mi(a)}`)}return e}function mi(a){return typeof a!="object"||a===null?"":`; props: [${Object.getOwnPropertyNames(a).map(t=>`"${t}"`).join(", ")}]`}class $e{constructor(e){this._client=e}}const kn=Symbol.for("brand.privateNullableHeaders");function*fi(a){if(!a)return;if(kn in a){const{values:s,nulls:n}=a;yield*s.entries();for(const r of n)yield[r,null];return}let e=!1,t;a instanceof Headers?t=a.entries():gs(a)?t=a:(e=!0,t=Object.entries(a??{}));for(let s of t){const n=s[0];if(typeof n!="string")throw new TypeError("expected header name to be a string");const r=gs(s[1])?s[1]:[s[1]];let l=!1;for(const i of r)i!==void 0&&(e&&!l&&(l=!0,yield[n,null]),yield[n,i])}}const ne=a=>{const e=new Headers,t=new Set;for(const s of a){const n=new Set;for(const[r,l]of fi(s)){const i=r.toLowerCase();n.has(i)||(e.delete(r),n.add(i)),l===null?(e.delete(r),t.add(i)):(e.append(r,l),t.delete(i))}}return{[kn]:!0,values:e,nulls:t}};function En(a){return a.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Ps=Object.freeze(Object.create(null)),vi=(a=En)=>function(t,...s){if(t.length===1)return t[0];let n=!1;const r=[],l=t.reduce((v,x,_)=>{/[?#]/.test(x)&&(n=!0);const g=s[_];let S=(n?encodeURIComponent:a)(""+g);return _!==s.length&&(g==null||typeof g=="object"&&g.toString===Object.getPrototypeOf(Object.getPrototypeOf(g.hasOwnProperty??Ps)??Ps)?.toString)&&(S=g+"",r.push({start:v.length+x.length,length:S.length,error:`Value of type ${Object.prototype.toString.call(g).slice(8,-1)} is not a valid path parameter`})),v+x+(_===s.length?"":S)},""),i=l.split(/[?#]/,1)[0],u=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let m;for(;(m=u.exec(i))!==null;)r.push({start:m.index,length:m[0].length,error:`Value "${m[0]}" can't be safely passed as a path parameter`});if(r.sort((v,x)=>v.start-x.start),r.length>0){let v=0;const x=r.reduce((_,g)=>{const S=" ".repeat(g.start-v),M="^".repeat(g.length);return v=g.start+g.length,_+S+M},"");throw new O(`Path parameters result in path with invalid segments:
${r.map(_=>_.error).join(`
`)}
${l}
${x}`)}return l},De=vi(En);class Tn extends $e{list(e={},t){const{betas:s,...n}=e??{};return this._client.getAPIList("/v1/files",Lt,{query:n,...t,headers:ne([{"anthropic-beta":[...s??[],"files-api-2025-04-14"].toString()},t?.headers])})}delete(e,t={},s){const{betas:n}=t??{};return this._client.delete(De`/v1/files/${e}`,{...s,headers:ne([{"anthropic-beta":[...n??[],"files-api-2025-04-14"].toString()},s?.headers])})}download(e,t={},s){const{betas:n}=t??{};return this._client.get(De`/v1/files/${e}/content`,{...s,headers:ne([{"anthropic-beta":[...n??[],"files-api-2025-04-14"].toString(),Accept:"application/binary"},s?.headers]),__binaryResponse:!0})}retrieveMetadata(e,t={},s){const{betas:n}=t??{};return this._client.get(De`/v1/files/${e}`,{...s,headers:ne([{"anthropic-beta":[...n??[],"files-api-2025-04-14"].toString()},s?.headers])})}upload(e,t){const{betas:s,...n}=e;return this._client.post("/v1/files",ii({body:n,...t,headers:ne([{"anthropic-beta":[...s??[],"files-api-2025-04-14"].toString()},t?.headers])},this._client))}}let In=class extends $e{retrieve(e,t={},s){const{betas:n}=t??{};return this._client.get(De`/v1/models/${e}?beta=true`,{...s,headers:ne([{...n?.toString()!=null?{"anthropic-beta":n?.toString()}:void 0},s?.headers])})}list(e={},t){const{betas:s,...n}=e??{};return this._client.getAPIList("/v1/models?beta=true",Lt,{query:n,...t,headers:ne([{...s?.toString()!=null?{"anthropic-beta":s?.toString()}:void 0},t?.headers])})}};class va{constructor(e,t){this.iterator=e,this.controller=t}async*decoder(){const e=new Ot;for await(const t of this.iterator)for(const s of e.decode(t))yield JSON.parse(s);for(const t of e.flush())yield JSON.parse(t)}[Symbol.asyncIterator](){return this.decoder()}static fromResponse(e,t){if(!e.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new O("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new O("Attempted to iterate over a response with no body");return new va(Za(e.body),t)}}let Pn=class extends $e{create(e,t){const{betas:s,...n}=e;return this._client.post("/v1/messages/batches?beta=true",{body:n,...t,headers:ne([{"anthropic-beta":[...s??[],"message-batches-2024-09-24"].toString()},t?.headers])})}retrieve(e,t={},s){const{betas:n}=t??{};return this._client.get(De`/v1/messages/batches/${e}?beta=true`,{...s,headers:ne([{"anthropic-beta":[...n??[],"message-batches-2024-09-24"].toString()},s?.headers])})}list(e={},t){const{betas:s,...n}=e??{};return this._client.getAPIList("/v1/messages/batches?beta=true",Lt,{query:n,...t,headers:ne([{"anthropic-beta":[...s??[],"message-batches-2024-09-24"].toString()},t?.headers])})}delete(e,t={},s){const{betas:n}=t??{};return this._client.delete(De`/v1/messages/batches/${e}?beta=true`,{...s,headers:ne([{"anthropic-beta":[...n??[],"message-batches-2024-09-24"].toString()},s?.headers])})}cancel(e,t={},s){const{betas:n}=t??{};return this._client.post(De`/v1/messages/batches/${e}/cancel?beta=true`,{...s,headers:ne([{"anthropic-beta":[...n??[],"message-batches-2024-09-24"].toString()},s?.headers])})}async results(e,t={},s){const n=await this.retrieve(e);if(!n.results_url)throw new O(`No batch \`results_url\`; Has it finished processing? ${n.processing_status} - ${n.id}`);const{betas:r}=t??{};return this._client.get(n.results_url,{...s,headers:ne([{"anthropic-beta":[...r??[],"message-batches-2024-09-24"].toString(),Accept:"application/binary"},s?.headers]),stream:!0,__binaryResponse:!0})._thenUnwrap((l,i)=>va.fromResponse(i.response,i.controller))}};const gi=a=>{let e=0,t=[];for(;e<a.length;){let s=a[e];if(s==="\\"){e++;continue}if(s==="{"){t.push({type:"brace",value:"{"}),e++;continue}if(s==="}"){t.push({type:"brace",value:"}"}),e++;continue}if(s==="["){t.push({type:"paren",value:"["}),e++;continue}if(s==="]"){t.push({type:"paren",value:"]"}),e++;continue}if(s===":"){t.push({type:"separator",value:":"}),e++;continue}if(s===","){t.push({type:"delimiter",value:","}),e++;continue}if(s==='"'){let i="",u=!1;for(s=a[++e];s!=='"';){if(e===a.length){u=!0;break}if(s==="\\"){if(e++,e===a.length){u=!0;break}i+=s+a[e],s=a[++e]}else i+=s,s=a[++e]}s=a[++e],u||t.push({type:"string",value:i});continue}if(s&&/\s/.test(s)){e++;continue}let r=/[0-9]/;if(s&&r.test(s)||s==="-"||s==="."){let i="";for(s==="-"&&(i+=s,s=a[++e]);s&&r.test(s)||s===".";)i+=s,s=a[++e];t.push({type:"number",value:i});continue}let l=/[a-z]/i;if(s&&l.test(s)){let i="";for(;s&&l.test(s)&&e!==a.length;)i+=s,s=a[++e];if(i=="true"||i=="false"||i==="null")t.push({type:"name",value:i});else{e++;continue}continue}e++}return t},dt=a=>{if(a.length===0)return a;let e=a[a.length-1];switch(e.type){case"separator":return a=a.slice(0,a.length-1),dt(a);case"number":let t=e.value[e.value.length-1];if(t==="."||t==="-")return a=a.slice(0,a.length-1),dt(a);case"string":let s=a[a.length-2];if(s?.type==="delimiter")return a=a.slice(0,a.length-1),dt(a);if(s?.type==="brace"&&s.value==="{")return a=a.slice(0,a.length-1),dt(a);break;case"delimiter":return a=a.slice(0,a.length-1),dt(a)}return a},bi=a=>{let e=[];return a.map(t=>{t.type==="brace"&&(t.value==="{"?e.push("}"):e.splice(e.lastIndexOf("}"),1)),t.type==="paren"&&(t.value==="["?e.push("]"):e.splice(e.lastIndexOf("]"),1))}),e.length>0&&e.reverse().map(t=>{t==="}"?a.push({type:"brace",value:"}"}):t==="]"&&a.push({type:"paren",value:"]"})}),a},yi=a=>{let e="";return a.map(t=>{t.type==="string"?e+='"'+t.value+'"':e+=t.value}),e},jn=a=>JSON.parse(yi(bi(dt(gi(a)))));var Ie,Ge,vt,Vt,gt,bt,Bt,yt,He,wt,$t,Qt,nt,Gt,Jt,ka,js,Xt,Ea,Ta,Ia,Ns;const Cs="__json_buf";function Rs(a){return a.type==="tool_use"||a.type==="server_tool_use"||a.type==="mcp_tool_use"}class ca{constructor(){Ie.add(this),this.messages=[],this.receivedMessages=[],Ge.set(this,void 0),this.controller=new AbortController,vt.set(this,void 0),Vt.set(this,()=>{}),gt.set(this,()=>{}),bt.set(this,void 0),Bt.set(this,()=>{}),yt.set(this,()=>{}),He.set(this,{}),wt.set(this,!1),$t.set(this,!1),Qt.set(this,!1),nt.set(this,!1),Gt.set(this,void 0),Jt.set(this,void 0),Xt.set(this,e=>{if(R(this,$t,!0),Mt(e)&&(e=new Me),e instanceof Me)return R(this,Qt,!0),this._emit("abort",e);if(e instanceof O)return this._emit("error",e);if(e instanceof Error){const t=new O(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new O(String(e)))}),R(this,vt,new Promise((e,t)=>{R(this,Vt,e,"f"),R(this,gt,t,"f")})),R(this,bt,new Promise((e,t)=>{R(this,Bt,e,"f"),R(this,yt,t,"f")})),p(this,vt,"f").catch(()=>{}),p(this,bt,"f").catch(()=>{})}get response(){return p(this,Gt,"f")}get request_id(){return p(this,Jt,"f")}async withResponse(){const e=await p(this,vt,"f");if(!e)throw new Error("Could not resolve a `Response` object");return{data:this,response:e,request_id:e.headers.get("request-id")}}static fromReadableStream(e){const t=new ca;return t._run(()=>t._fromReadableStream(e)),t}static createMessage(e,t,s){const n=new ca;for(const r of t.messages)n._addMessageParam(r);return n._run(()=>n._createMessage(e,{...t,stream:!0},{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),n}_run(e){e().then(()=>{this._emitFinal(),this._emit("end")},p(this,Xt,"f"))}_addMessageParam(e){this.messages.push(e)}_addMessage(e,t=!0){this.receivedMessages.push(e),t&&this._emit("message",e)}async _createMessage(e,t,s){const n=s?.signal;let r;n&&(n.aborted&&this.controller.abort(),r=this.controller.abort.bind(this.controller),n.addEventListener("abort",r));try{p(this,Ie,"m",Ea).call(this);const{response:l,data:i}=await e.create({...t,stream:!0},{...s,signal:this.controller.signal}).withResponse();this._connected(l);for await(const u of i)p(this,Ie,"m",Ta).call(this,u);if(i.controller.signal?.aborted)throw new Me;p(this,Ie,"m",Ia).call(this)}finally{n&&r&&n.removeEventListener("abort",r)}}_connected(e){this.ended||(R(this,Gt,e),R(this,Jt,e?.headers.get("request-id")),p(this,Vt,"f").call(this,e),this._emit("connect"))}get ended(){return p(this,wt,"f")}get errored(){return p(this,$t,"f")}get aborted(){return p(this,Qt,"f")}abort(){this.controller.abort()}on(e,t){return(p(this,He,"f")[e]||(p(this,He,"f")[e]=[])).push({listener:t}),this}off(e,t){const s=p(this,He,"f")[e];if(!s)return this;const n=s.findIndex(r=>r.listener===t);return n>=0&&s.splice(n,1),this}once(e,t){return(p(this,He,"f")[e]||(p(this,He,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,s)=>{R(this,nt,!0),e!=="error"&&this.once("error",s),this.once(e,t)})}async done(){R(this,nt,!0),await p(this,bt,"f")}get currentMessage(){return p(this,Ge,"f")}async finalMessage(){return await this.done(),p(this,Ie,"m",ka).call(this)}async finalText(){return await this.done(),p(this,Ie,"m",js).call(this)}_emit(e,...t){if(p(this,wt,"f"))return;e==="end"&&(R(this,wt,!0),p(this,Bt,"f").call(this));const s=p(this,He,"f")[e];if(s&&(p(this,He,"f")[e]=s.filter(n=>!n.once),s.forEach(({listener:n})=>n(...t))),e==="abort"){const n=t[0];!p(this,nt,"f")&&!s?.length&&Promise.reject(n),p(this,gt,"f").call(this,n),p(this,yt,"f").call(this,n),this._emit("end");return}if(e==="error"){const n=t[0];!p(this,nt,"f")&&!s?.length&&Promise.reject(n),p(this,gt,"f").call(this,n),p(this,yt,"f").call(this,n),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",p(this,Ie,"m",ka).call(this))}async _fromReadableStream(e,t){const s=t?.signal;let n;s&&(s.aborted&&this.controller.abort(),n=this.controller.abort.bind(this.controller),s.addEventListener("abort",n));try{p(this,Ie,"m",Ea).call(this),this._connected(null);const r=ze.fromReadableStream(e,this.controller);for await(const l of r)p(this,Ie,"m",Ta).call(this,l);if(r.controller.signal?.aborted)throw new Me;p(this,Ie,"m",Ia).call(this)}finally{s&&n&&s.removeEventListener("abort",n)}}[(Ge=new WeakMap,vt=new WeakMap,Vt=new WeakMap,gt=new WeakMap,bt=new WeakMap,Bt=new WeakMap,yt=new WeakMap,He=new WeakMap,wt=new WeakMap,$t=new WeakMap,Qt=new WeakMap,nt=new WeakMap,Gt=new WeakMap,Jt=new WeakMap,Xt=new WeakMap,Ie=new WeakSet,ka=function(){if(this.receivedMessages.length===0)throw new O("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},js=function(){if(this.receivedMessages.length===0)throw new O("stream ended without producing a Message with role=assistant");const t=this.receivedMessages.at(-1).content.filter(s=>s.type==="text").map(s=>s.text);if(t.length===0)throw new O("stream ended without producing a content block with type=text");return t.join(" ")},Ea=function(){this.ended||R(this,Ge,void 0)},Ta=function(t){if(this.ended)return;const s=p(this,Ie,"m",Ns).call(this,t);switch(this._emit("streamEvent",t,s),t.type){case"content_block_delta":{const n=s.content.at(-1);switch(t.delta.type){case"text_delta":{n.type==="text"&&this._emit("text",t.delta.text,n.text||"");break}case"citations_delta":{n.type==="text"&&this._emit("citation",t.delta.citation,n.citations??[]);break}case"input_json_delta":{Rs(n)&&n.input&&this._emit("inputJson",t.delta.partial_json,n.input);break}case"thinking_delta":{n.type==="thinking"&&this._emit("thinking",t.delta.thinking,n.thinking);break}case"signature_delta":{n.type==="thinking"&&this._emit("signature",n.signature);break}default:t.delta}break}case"message_stop":{this._addMessageParam(s),this._addMessage(s,!0);break}case"content_block_stop":{this._emit("contentBlock",s.content.at(-1));break}case"message_start":{R(this,Ge,s);break}}},Ia=function(){if(this.ended)throw new O("stream has ended, this shouldn't happen");const t=p(this,Ge,"f");if(!t)throw new O("request ended without sending any chunks");return R(this,Ge,void 0),t},Ns=function(t){let s=p(this,Ge,"f");if(t.type==="message_start"){if(s)throw new O(`Unexpected event order, got ${t.type} before receiving "message_stop"`);return t.message}if(!s)throw new O(`Unexpected event order, got ${t.type} before "message_start"`);switch(t.type){case"message_stop":return s;case"message_delta":return s.container=t.delta.container,s.stop_reason=t.delta.stop_reason,s.stop_sequence=t.delta.stop_sequence,s.usage.output_tokens=t.usage.output_tokens,s.context_management=t.context_management,t.usage.input_tokens!=null&&(s.usage.input_tokens=t.usage.input_tokens),t.usage.cache_creation_input_tokens!=null&&(s.usage.cache_creation_input_tokens=t.usage.cache_creation_input_tokens),t.usage.cache_read_input_tokens!=null&&(s.usage.cache_read_input_tokens=t.usage.cache_read_input_tokens),t.usage.server_tool_use!=null&&(s.usage.server_tool_use=t.usage.server_tool_use),s;case"content_block_start":return s.content.push(t.content_block),s;case"content_block_delta":{const n=s.content.at(t.index);switch(t.delta.type){case"text_delta":{n?.type==="text"&&(s.content[t.index]={...n,text:(n.text||"")+t.delta.text});break}case"citations_delta":{n?.type==="text"&&(s.content[t.index]={...n,citations:[...n.citations??[],t.delta.citation]});break}case"input_json_delta":{if(n&&Rs(n)){let r=n[Cs]||"";r+=t.delta.partial_json;const l={...n};if(Object.defineProperty(l,Cs,{value:r,enumerable:!1,writable:!0}),r)try{l.input=jn(r)}catch(i){const u=new O(`Unable to parse tool parameter JSON from model. Please retry your request or adjust your prompt. Error: ${i}. JSON: ${r}`);p(this,Xt,"f").call(this,u)}s.content[t.index]=l}break}case"thinking_delta":{n?.type==="thinking"&&(s.content[t.index]={...n,thinking:n.thinking+t.delta.thinking});break}case"signature_delta":{n?.type==="thinking"&&(s.content[t.index]={...n,signature:t.delta.signature});break}default:t.delta}return s}case"content_block_stop":return s}},Symbol.asyncIterator)](){const e=[],t=[];let s=!1;return this.on("streamEvent",n=>{const r=t.shift();r?r.resolve(n):e.push(n)}),this.on("end",()=>{s=!0;for(const n of t)n.resolve(void 0);t.length=0}),this.on("abort",n=>{s=!0;for(const r of t)r.reject(n);t.length=0}),this.on("error",n=>{s=!0;for(const r of t)r.reject(n);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((r,l)=>t.push({resolve:r,reject:l})).then(r=>r?{value:r,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new ze(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}const Nn={"claude-opus-4-20250514":8192,"claude-opus-4-0":8192,"claude-4-opus-20250514":8192,"anthropic.claude-opus-4-20250514-v1:0":8192,"claude-opus-4@20250514":8192,"claude-opus-4-1-20250805":8192,"anthropic.claude-opus-4-1-20250805-v1:0":8192,"claude-opus-4-1@20250805":8192};var Yt,rt,Ze,ke,_t,Le,Ve,Je,xt,Wa;function As(){let a,e;return{promise:new Promise((s,n)=>{a=s,e=n}),resolve:a,reject:e}}class Cn{constructor(e,t,s){Yt.add(this),this.client=e,rt.set(this,!1),Ze.set(this,!1),ke.set(this,void 0),_t.set(this,void 0),Le.set(this,void 0),Ve.set(this,void 0),Je.set(this,void 0),xt.set(this,0),R(this,ke,{params:{...t,messages:structuredClone(t.messages)}}),R(this,_t,{...s,headers:ne([{"x-stainless-helper":"BetaToolRunner"},s?.headers])}),R(this,Je,As())}async*[(rt=new WeakMap,Ze=new WeakMap,ke=new WeakMap,_t=new WeakMap,Le=new WeakMap,Ve=new WeakMap,Je=new WeakMap,xt=new WeakMap,Yt=new WeakSet,Symbol.asyncIterator)](){var e;if(p(this,rt,"f"))throw new O("Cannot iterate over a consumed stream");R(this,rt,!0),R(this,Ze,!0),R(this,Ve,void 0);try{for(;;){let t;try{if(p(this,ke,"f").params.max_iterations&&p(this,xt,"f")>=p(this,ke,"f").params.max_iterations)break;R(this,Ze,!1,"f"),R(this,Le,void 0,"f"),R(this,Ve,void 0,"f"),R(this,xt,(e=p(this,xt,"f"),e++,e),"f");const{max_iterations:s,...n}=p(this,ke,"f").params;if(n.stream?(t=this.client.beta.messages.stream({...n},p(this,_t,"f")),R(this,Le,t.finalMessage(),"f"),yield t):(R(this,Le,this.client.beta.messages.create({...n,stream:!1},p(this,_t,"f")),"f"),yield p(this,Le,"f")),!p(this,Ze,"f")){const{role:l,content:i}=await p(this,Le,"f");p(this,ke,"f").params.messages.push({role:l,content:i})}const r=await p(this,Yt,"m",Wa).call(this,p(this,ke,"f").params.messages.at(-1));if(r&&p(this,ke,"f").params.messages.push(r),!r&&!p(this,Ze,"f"))break}finally{t&&t.abort()}}if(!p(this,Le,"f"))throw new O("ToolRunner concluded without a message from the server");p(this,Je,"f").resolve(await p(this,Le,"f"))}catch(t){throw R(this,rt,!1),p(this,Je,"f").promise.catch(()=>{}),p(this,Je,"f").reject(t),R(this,Je,As()),t}}setMessagesParams(e){typeof e=="function"?p(this,ke,"f").params=e(p(this,ke,"f").params):p(this,ke,"f").params=e,R(this,Ze,!0),R(this,Ve,void 0)}async generateToolResponse(){const e=await p(this,Le,"f")??this.params.messages.at(-1);return e?p(this,Yt,"m",Wa).call(this,e):null}done(){return p(this,Je,"f").promise}async runUntilDone(){if(!p(this,rt,"f"))for await(const e of this);return this.done()}get params(){return p(this,ke,"f").params}pushMessages(...e){this.setMessagesParams(t=>({...t,messages:[...t.messages,...e]}))}then(e,t){return this.runUntilDone().then(e,t)}}Wa=async function(e){return p(this,Ve,"f")!==void 0?p(this,Ve,"f"):(R(this,Ve,wi(p(this,ke,"f").params,e)),p(this,Ve,"f"))};async function wi(a,e=a.messages.at(-1)){if(!e||e.role!=="assistant"||!e.content||typeof e.content=="string")return null;const t=e.content.filter(n=>n.type==="tool_use");return t.length===0?null:{role:"user",content:await Promise.all(t.map(async n=>{const r=a.tools.find(l=>l.name===n.name);if(!r||!("run"in r))return{type:"tool_result",tool_use_id:n.id,content:`Error: Tool '${n.name}' not found`,is_error:!0};try{let l=n.input;"parse"in r&&r.parse&&(l=r.parse(l));const i=await r.run(l);return{type:"tool_result",tool_use_id:n.id,content:i}}catch(l){return{type:"tool_result",tool_use_id:n.id,content:`Error: ${l instanceof Error?l.message:String(l)}`,is_error:!0}}}))}}const Ms={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-3-opus-20240229":"January 5th, 2026","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025","claude-3-5-sonnet-20241022":"October 22, 2025","claude-3-5-sonnet-20240620":"October 22, 2025"};let ga=class extends $e{constructor(){super(...arguments),this.batches=new Pn(this._client)}create(e,t){const{betas:s,...n}=e;n.model in Ms&&console.warn(`The model '${n.model}' is deprecated and will reach end-of-life on ${Ms[n.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`);let r=this._client._options.timeout;if(!n.stream&&r==null){const l=Nn[n.model]??void 0;r=this._client.calculateNonstreamingTimeout(n.max_tokens,l)}return this._client.post("/v1/messages?beta=true",{body:n,timeout:r??6e5,...t,headers:ne([{...s?.toString()!=null?{"anthropic-beta":s?.toString()}:void 0},t?.headers]),stream:e.stream??!1})}stream(e,t){return ca.createMessage(this,e,t)}countTokens(e,t){const{betas:s,...n}=e;return this._client.post("/v1/messages/count_tokens?beta=true",{body:n,...t,headers:ne([{"anthropic-beta":[...s??[],"token-counting-2024-11-01"].toString()},t?.headers])})}toolRunner(e,t){return new Cn(this._client,e,t)}};ga.Batches=Pn;ga.BetaToolRunner=Cn;class Ut extends $e{constructor(){super(...arguments),this.models=new In(this._client),this.messages=new ga(this._client),this.files=new Tn(this._client)}}Ut.Models=In;Ut.Messages=ga;Ut.Files=Tn;class Rn extends $e{create(e,t){const{betas:s,...n}=e;return this._client.post("/v1/complete",{body:n,timeout:this._client._options.timeout??6e5,...t,headers:ne([{...s?.toString()!=null?{"anthropic-beta":s?.toString()}:void 0},t?.headers]),stream:e.stream??!1})}}var Pe,Xe,St,Kt,kt,Et,Zt,Tt,We,It,ea,ta,ot,aa,sa,Pa,qs,ja,Na,Ca,Ra,Ds;const Os="__json_buf";function Ls(a){return a.type==="tool_use"||a.type==="server_tool_use"}class ua{constructor(){Pe.add(this),this.messages=[],this.receivedMessages=[],Xe.set(this,void 0),this.controller=new AbortController,St.set(this,void 0),Kt.set(this,()=>{}),kt.set(this,()=>{}),Et.set(this,void 0),Zt.set(this,()=>{}),Tt.set(this,()=>{}),We.set(this,{}),It.set(this,!1),ea.set(this,!1),ta.set(this,!1),ot.set(this,!1),aa.set(this,void 0),sa.set(this,void 0),ja.set(this,e=>{if(R(this,ea,!0),Mt(e)&&(e=new Me),e instanceof Me)return R(this,ta,!0),this._emit("abort",e);if(e instanceof O)return this._emit("error",e);if(e instanceof Error){const t=new O(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new O(String(e)))}),R(this,St,new Promise((e,t)=>{R(this,Kt,e,"f"),R(this,kt,t,"f")})),R(this,Et,new Promise((e,t)=>{R(this,Zt,e,"f"),R(this,Tt,t,"f")})),p(this,St,"f").catch(()=>{}),p(this,Et,"f").catch(()=>{})}get response(){return p(this,aa,"f")}get request_id(){return p(this,sa,"f")}async withResponse(){const e=await p(this,St,"f");if(!e)throw new Error("Could not resolve a `Response` object");return{data:this,response:e,request_id:e.headers.get("request-id")}}static fromReadableStream(e){const t=new ua;return t._run(()=>t._fromReadableStream(e)),t}static createMessage(e,t,s){const n=new ua;for(const r of t.messages)n._addMessageParam(r);return n._run(()=>n._createMessage(e,{...t,stream:!0},{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),n}_run(e){e().then(()=>{this._emitFinal(),this._emit("end")},p(this,ja,"f"))}_addMessageParam(e){this.messages.push(e)}_addMessage(e,t=!0){this.receivedMessages.push(e),t&&this._emit("message",e)}async _createMessage(e,t,s){const n=s?.signal;let r;n&&(n.aborted&&this.controller.abort(),r=this.controller.abort.bind(this.controller),n.addEventListener("abort",r));try{p(this,Pe,"m",Na).call(this);const{response:l,data:i}=await e.create({...t,stream:!0},{...s,signal:this.controller.signal}).withResponse();this._connected(l);for await(const u of i)p(this,Pe,"m",Ca).call(this,u);if(i.controller.signal?.aborted)throw new Me;p(this,Pe,"m",Ra).call(this)}finally{n&&r&&n.removeEventListener("abort",r)}}_connected(e){this.ended||(R(this,aa,e),R(this,sa,e?.headers.get("request-id")),p(this,Kt,"f").call(this,e),this._emit("connect"))}get ended(){return p(this,It,"f")}get errored(){return p(this,ea,"f")}get aborted(){return p(this,ta,"f")}abort(){this.controller.abort()}on(e,t){return(p(this,We,"f")[e]||(p(this,We,"f")[e]=[])).push({listener:t}),this}off(e,t){const s=p(this,We,"f")[e];if(!s)return this;const n=s.findIndex(r=>r.listener===t);return n>=0&&s.splice(n,1),this}once(e,t){return(p(this,We,"f")[e]||(p(this,We,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,s)=>{R(this,ot,!0),e!=="error"&&this.once("error",s),this.once(e,t)})}async done(){R(this,ot,!0),await p(this,Et,"f")}get currentMessage(){return p(this,Xe,"f")}async finalMessage(){return await this.done(),p(this,Pe,"m",Pa).call(this)}async finalText(){return await this.done(),p(this,Pe,"m",qs).call(this)}_emit(e,...t){if(p(this,It,"f"))return;e==="end"&&(R(this,It,!0),p(this,Zt,"f").call(this));const s=p(this,We,"f")[e];if(s&&(p(this,We,"f")[e]=s.filter(n=>!n.once),s.forEach(({listener:n})=>n(...t))),e==="abort"){const n=t[0];!p(this,ot,"f")&&!s?.length&&Promise.reject(n),p(this,kt,"f").call(this,n),p(this,Tt,"f").call(this,n),this._emit("end");return}if(e==="error"){const n=t[0];!p(this,ot,"f")&&!s?.length&&Promise.reject(n),p(this,kt,"f").call(this,n),p(this,Tt,"f").call(this,n),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",p(this,Pe,"m",Pa).call(this))}async _fromReadableStream(e,t){const s=t?.signal;let n;s&&(s.aborted&&this.controller.abort(),n=this.controller.abort.bind(this.controller),s.addEventListener("abort",n));try{p(this,Pe,"m",Na).call(this),this._connected(null);const r=ze.fromReadableStream(e,this.controller);for await(const l of r)p(this,Pe,"m",Ca).call(this,l);if(r.controller.signal?.aborted)throw new Me;p(this,Pe,"m",Ra).call(this)}finally{s&&n&&s.removeEventListener("abort",n)}}[(Xe=new WeakMap,St=new WeakMap,Kt=new WeakMap,kt=new WeakMap,Et=new WeakMap,Zt=new WeakMap,Tt=new WeakMap,We=new WeakMap,It=new WeakMap,ea=new WeakMap,ta=new WeakMap,ot=new WeakMap,aa=new WeakMap,sa=new WeakMap,ja=new WeakMap,Pe=new WeakSet,Pa=function(){if(this.receivedMessages.length===0)throw new O("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},qs=function(){if(this.receivedMessages.length===0)throw new O("stream ended without producing a Message with role=assistant");const t=this.receivedMessages.at(-1).content.filter(s=>s.type==="text").map(s=>s.text);if(t.length===0)throw new O("stream ended without producing a content block with type=text");return t.join(" ")},Na=function(){this.ended||R(this,Xe,void 0)},Ca=function(t){if(this.ended)return;const s=p(this,Pe,"m",Ds).call(this,t);switch(this._emit("streamEvent",t,s),t.type){case"content_block_delta":{const n=s.content.at(-1);switch(t.delta.type){case"text_delta":{n.type==="text"&&this._emit("text",t.delta.text,n.text||"");break}case"citations_delta":{n.type==="text"&&this._emit("citation",t.delta.citation,n.citations??[]);break}case"input_json_delta":{Ls(n)&&n.input&&this._emit("inputJson",t.delta.partial_json,n.input);break}case"thinking_delta":{n.type==="thinking"&&this._emit("thinking",t.delta.thinking,n.thinking);break}case"signature_delta":{n.type==="thinking"&&this._emit("signature",n.signature);break}default:t.delta}break}case"message_stop":{this._addMessageParam(s),this._addMessage(s,!0);break}case"content_block_stop":{this._emit("contentBlock",s.content.at(-1));break}case"message_start":{R(this,Xe,s);break}}},Ra=function(){if(this.ended)throw new O("stream has ended, this shouldn't happen");const t=p(this,Xe,"f");if(!t)throw new O("request ended without sending any chunks");return R(this,Xe,void 0),t},Ds=function(t){let s=p(this,Xe,"f");if(t.type==="message_start"){if(s)throw new O(`Unexpected event order, got ${t.type} before receiving "message_stop"`);return t.message}if(!s)throw new O(`Unexpected event order, got ${t.type} before "message_start"`);switch(t.type){case"message_stop":return s;case"message_delta":return s.stop_reason=t.delta.stop_reason,s.stop_sequence=t.delta.stop_sequence,s.usage.output_tokens=t.usage.output_tokens,t.usage.input_tokens!=null&&(s.usage.input_tokens=t.usage.input_tokens),t.usage.cache_creation_input_tokens!=null&&(s.usage.cache_creation_input_tokens=t.usage.cache_creation_input_tokens),t.usage.cache_read_input_tokens!=null&&(s.usage.cache_read_input_tokens=t.usage.cache_read_input_tokens),t.usage.server_tool_use!=null&&(s.usage.server_tool_use=t.usage.server_tool_use),s;case"content_block_start":return s.content.push({...t.content_block}),s;case"content_block_delta":{const n=s.content.at(t.index);switch(t.delta.type){case"text_delta":{n?.type==="text"&&(s.content[t.index]={...n,text:(n.text||"")+t.delta.text});break}case"citations_delta":{n?.type==="text"&&(s.content[t.index]={...n,citations:[...n.citations??[],t.delta.citation]});break}case"input_json_delta":{if(n&&Ls(n)){let r=n[Os]||"";r+=t.delta.partial_json;const l={...n};Object.defineProperty(l,Os,{value:r,enumerable:!1,writable:!0}),r&&(l.input=jn(r)),s.content[t.index]=l}break}case"thinking_delta":{n?.type==="thinking"&&(s.content[t.index]={...n,thinking:n.thinking+t.delta.thinking});break}case"signature_delta":{n?.type==="thinking"&&(s.content[t.index]={...n,signature:t.delta.signature});break}default:t.delta}return s}case"content_block_stop":return s}},Symbol.asyncIterator)](){const e=[],t=[];let s=!1;return this.on("streamEvent",n=>{const r=t.shift();r?r.resolve(n):e.push(n)}),this.on("end",()=>{s=!0;for(const n of t)n.resolve(void 0);t.length=0}),this.on("abort",n=>{s=!0;for(const r of t)r.reject(n);t.length=0}),this.on("error",n=>{s=!0;for(const r of t)r.reject(n);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((r,l)=>t.push({resolve:r,reject:l})).then(r=>r?{value:r,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new ze(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}class An extends $e{create(e,t){return this._client.post("/v1/messages/batches",{body:e,...t})}retrieve(e,t){return this._client.get(De`/v1/messages/batches/${e}`,t)}list(e={},t){return this._client.getAPIList("/v1/messages/batches",Lt,{query:e,...t})}delete(e,t){return this._client.delete(De`/v1/messages/batches/${e}`,t)}cancel(e,t){return this._client.post(De`/v1/messages/batches/${e}/cancel`,t)}async results(e,t){const s=await this.retrieve(e);if(!s.results_url)throw new O(`No batch \`results_url\`; Has it finished processing? ${s.processing_status} - ${s.id}`);return this._client.get(s.results_url,{...t,headers:ne([{Accept:"application/binary"},t?.headers]),stream:!0,__binaryResponse:!0})._thenUnwrap((n,r)=>va.fromResponse(r.response,r.controller))}}class ts extends $e{constructor(){super(...arguments),this.batches=new An(this._client)}create(e,t){e.model in Us&&console.warn(`The model '${e.model}' is deprecated and will reach end-of-life on ${Us[e.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`);let s=this._client._options.timeout;if(!e.stream&&s==null){const n=Nn[e.model]??void 0;s=this._client.calculateNonstreamingTimeout(e.max_tokens,n)}return this._client.post("/v1/messages",{body:e,timeout:s??6e5,...t,stream:e.stream??!1})}stream(e,t){return ua.createMessage(this,e,t)}countTokens(e,t){return this._client.post("/v1/messages/count_tokens",{body:e,...t})}}const Us={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-3-opus-20240229":"January 5th, 2026","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025","claude-3-5-sonnet-20241022":"October 22, 2025","claude-3-5-sonnet-20240620":"October 22, 2025"};ts.Batches=An;class Mn extends $e{retrieve(e,t={},s){const{betas:n}=t??{};return this._client.get(De`/v1/models/${e}`,{...s,headers:ne([{...n?.toString()!=null?{"anthropic-beta":n?.toString()}:void 0},s?.headers])})}list(e={},t){const{betas:s,...n}=e??{};return this._client.getAPIList("/v1/models",Lt,{query:n,...t,headers:ne([{...s?.toString()!=null?{"anthropic-beta":s?.toString()}:void 0},t?.headers])})}}var _i={};const na=a=>{if(typeof globalThis.process<"u")return _i?.[a]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(a)?.trim()};var Fa,as,oa,qn;const xi="\\n\\nHuman:",Si="\\n\\nAssistant:";class pe{constructor({baseURL:e=na("ANTHROPIC_BASE_URL"),apiKey:t=na("ANTHROPIC_API_KEY")??null,authToken:s=na("ANTHROPIC_AUTH_TOKEN")??null,...n}={}){Fa.add(this),oa.set(this,void 0);const r={apiKey:t,authToken:s,...n,baseURL:e||"https://api.anthropic.com"};if(!r.dangerouslyAllowBrowser&&Fo())throw new O(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new Anthropic({ apiKey, dangerouslyAllowBrowser: true });
`);this.baseURL=r.baseURL,this.timeout=r.timeout??as.DEFAULT_TIMEOUT,this.logger=r.logger??console;const l="warn";this.logLevel=l,this.logLevel=Es(r.logLevel,"ClientOptions.logLevel",this)??Es(na("ANTHROPIC_LOG"),"process.env['ANTHROPIC_LOG']",this)??l,this.fetchOptions=r.fetchOptions,this.maxRetries=r.maxRetries??2,this.fetch=r.fetch??Go(),R(this,oa,Xo),this._options=r,this.apiKey=t,this.authToken=s}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,authToken:this.authToken,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(this.apiKey&&e.get("x-api-key"))&&!t.has("x-api-key")&&!(this.authToken&&e.get("authorization"))&&!t.has("authorization"))throw new Error('Could not resolve authentication method. Expected either apiKey or authToken to be set. Or for one of the "X-Api-Key" or "Authorization" headers to be explicitly omitted')}async authHeaders(e){return ne([await this.apiKeyAuth(e),await this.bearerAuth(e)])}async apiKeyAuth(e){if(this.apiKey!=null)return ne([{"X-Api-Key":this.apiKey}])}async bearerAuth(e){if(this.authToken!=null)return ne([{Authorization:`Bearer ${this.authToken}`}])}stringifyQuery(e){return Object.entries(e).filter(([t,s])=>typeof s<"u").map(([t,s])=>{if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(s)}`;if(s===null)return`${encodeURIComponent(t)}=`;throw new O(`Cannot stringify type ${typeof s}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${ut}`}defaultIdempotencyKey(){return`stainless-node-retry-${rn()}`}makeStatusError(e,t,s,n){return ye.generate(e,t,s,n)}buildURL(e,t,s){const n=!p(this,Fa,"m",qn).call(this)&&s||this.baseURL,r=Lo(e)?new URL(e):new URL(n+(n.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),l=this.defaultQuery();return Uo(l)||(t={...l,...t}),typeof t=="object"&&t&&!Array.isArray(t)&&(r.search=this.stringifyQuery(t)),r.toString()}_calculateNonstreamingTimeout(e){if(3600*e/128e3>600)throw new O("Streaming is required for operations that may take longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-typescript#streaming-responses for more details");return 600*1e3}async prepareOptions(e){}async prepareRequest(e,{url:t,options:s}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,s){return this.request(Promise.resolve(s).then(n=>({method:e,path:t,...n})))}request(e,t=null){return new fa(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,s){const n=await e,r=n.maxRetries??this.maxRetries;t==null&&(t=r),await this.prepareOptions(n);const{req:l,url:i,timeout:u}=await this.buildRequest(n,{retryCount:r-t});await this.prepareRequest(l,{url:i,options:n});const m="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),v=s===void 0?"":`, retryOf: ${s}`,x=Date.now();if(xe(this).debug(`[${m}] sending request`,tt({retryOfRequestLogID:s,method:n.method,url:i,options:n,headers:l.headers})),n.signal?.aborted)throw new Me;const _=new AbortController,g=await this.fetchWithTimeout(i,l,u,_).catch(La),S=Date.now();if(g instanceof globalThis.Error){const y=`retrying, ${t} attempts remaining`;if(n.signal?.aborted)throw new Me;const T=Mt(g)||/timed? ?out/i.test(String(g)+("cause"in g?String(g.cause):""));if(t)return xe(this).info(`[${m}] connection ${T?"timed out":"failed"} - ${y}`),xe(this).debug(`[${m}] connection ${T?"timed out":"failed"} (${y})`,tt({retryOfRequestLogID:s,url:i,durationMs:S-x,message:g.message})),this.retryRequest(n,t,s??m);throw xe(this).info(`[${m}] connection ${T?"timed out":"failed"} - error; no more retries left`),xe(this).debug(`[${m}] connection ${T?"timed out":"failed"} (error; no more retries left)`,tt({retryOfRequestLogID:s,url:i,durationMs:S-x,message:g.message})),T?new on:new ma({cause:g})}const M=[...g.headers.entries()].filter(([y])=>y==="request-id").map(([y,T])=>", "+y+": "+JSON.stringify(T)).join(""),f=`[${m}${v}${M}] ${l.method} ${i} ${g.ok?"succeeded":"failed"} with status ${g.status} in ${S-x}ms`;if(!g.ok){const y=await this.shouldRetry(g);if(t&&y){const w=`retrying, ${t} attempts remaining`;return await Jo(g.body),xe(this).info(`${f} - ${w}`),xe(this).debug(`[${m}] response error (${w})`,tt({retryOfRequestLogID:s,url:g.url,status:g.status,headers:g.headers,durationMs:S-x})),this.retryRequest(n,t,s??m,g.headers)}const T=y?"error; no more retries left":"error; not retryable";xe(this).info(`${f} - ${T}`);const W=await g.text().catch(w=>La(w).message),F=vn(W),A=F?void 0:W;throw xe(this).debug(`[${m}] response error (${T})`,tt({retryOfRequestLogID:s,url:g.url,status:g.status,headers:g.headers,message:A,durationMs:Date.now()-x})),this.makeStatusError(g.status,F,A,g.headers)}return xe(this).info(f),xe(this).debug(`[${m}] response start`,tt({retryOfRequestLogID:s,url:g.url,status:g.status,headers:g.headers,durationMs:S-x})),{response:g,options:n,controller:_,requestLogID:m,retryOfRequestLogID:s,startTime:x}}getAPIList(e,t,s){return this.requestAPIList(t,{method:"get",path:e,...s})}requestAPIList(e,t){const s=this.makeRequest(t,null,void 0);return new oi(this,s,e)}async fetchWithTimeout(e,t,s,n){const{signal:r,method:l,...i}=t||{};r&&r.addEventListener("abort",()=>n.abort());const u=setTimeout(()=>n.abort(),s),m=globalThis.ReadableStream&&i.body instanceof globalThis.ReadableStream||typeof i.body=="object"&&i.body!==null&&Symbol.asyncIterator in i.body,v={signal:n.signal,...m?{duplex:"half"}:{},method:"GET",...i};l&&(v.method=l.toUpperCase());try{return await this.fetch.call(void 0,e,v)}finally{clearTimeout(u)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,s,n){let r;const l=n?.get("retry-after-ms");if(l){const u=parseFloat(l);Number.isNaN(u)||(r=u)}const i=n?.get("retry-after");if(i&&!r){const u=parseFloat(i);Number.isNaN(u)?r=Date.parse(i)-Date.now():r=u*1e3}if(!(r&&0<=r&&r<60*1e3)){const u=e.maxRetries??this.maxRetries;r=this.calculateDefaultRetryTimeoutMillis(t,u)}return await Wo(r),this.makeRequest(e,t-1,s)}calculateDefaultRetryTimeoutMillis(e,t){const r=t-e,l=Math.min(.5*Math.pow(2,r),8),i=1-Math.random()*.25;return l*i*1e3}calculateNonstreamingTimeout(e,t){if(36e5*e/128e3>6e5||t!=null&&e>t)throw new O("Streaming is required for operations that may take longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-typescript#long-requests for more details");return 6e5}async buildRequest(e,{retryCount:t=0}={}){const s={...e},{method:n,path:r,query:l,defaultBaseURL:i}=s,u=this.buildURL(r,l,i);"timeout"in s&&Ho("timeout",s.timeout),s.timeout=s.timeout??this.timeout;const{bodyHeaders:m,body:v}=this.buildBody({options:s}),x=await this.buildHeaders({options:e,method:n,bodyHeaders:m,retryCount:t});return{req:{method:n,headers:x,...s.signal&&{signal:s.signal},...globalThis.ReadableStream&&v instanceof globalThis.ReadableStream&&{duplex:"half"},...v&&{body:v},...this.fetchOptions??{},...s.fetchOptions??{}},url:u,timeout:s.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:s,retryCount:n}){let r={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),r[this.idempotencyHeader]=e.idempotencyKey);const l=ne([r,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(n),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...Qo(),...this._options.dangerouslyAllowBrowser?{"anthropic-dangerous-direct-browser-access":"true"}:void 0,"anthropic-version":"2023-06-01"},await this.authHeaders(e),this._options.defaultHeaders,s,e.headers]);return this.validateHeaders(l),l.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=ne([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:bn(e)}:p(this,oa,"f").call(this,{body:e,headers:s})}}as=pe,oa=new WeakMap,Fa=new WeakSet,qn=function(){return this.baseURL!=="https://api.anthropic.com"};pe.Anthropic=as;pe.HUMAN_PROMPT=xi;pe.AI_PROMPT=Si;pe.DEFAULT_TIMEOUT=6e5;pe.AnthropicError=O;pe.APIError=ye;pe.APIConnectionError=ma;pe.APIConnectionTimeoutError=on;pe.APIUserAbortError=Me;pe.NotFoundError=dn;pe.ConflictError=pn;pe.RateLimitError=mn;pe.BadRequestError=ln;pe.AuthenticationError=cn;pe.InternalServerError=fn;pe.PermissionDeniedError=un;pe.UnprocessableEntityError=hn;pe.toFile=hi;class st extends pe{constructor(){super(...arguments),this.completions=new Rn(this),this.messages=new ts(this),this.models=new Mn(this),this.beta=new Ut(this)}}st.Completions=Rn;st.Messages=ts;st.Models=Mn;st.Beta=Ut;const ki={beginner:{tenses:"present simple, present continuous, going to (future), simple past, imperative, articles, there is/are, prepositions",wordRange:"4-7 words",distractors:"2-3 distractors"},intermediate:{tenses:"present perfect, present perfect continuous, past continuous, will future, first conditional, second conditional, zero conditional, modals (can, must, should), used to, gerund vs infinitive, relative clauses, connectors",wordRange:"5-9 words",distractors:"3-4 distractors"},advanced:{tenses:"past perfect, past perfect continuous, third conditional, mixed conditional, passive voice, reported speech, subjunctive, comparatives and superlatives, future perfect, future continuous, causative, wish/if only, inversion",wordRange:"6-12 words",distractors:"4-6 distractors"}};function it(a){return a[Math.floor(Math.random()*a.length)]}const Ei=["I","you","he","she","we","they","my friend","the students","my parents","the dog","our teacher","the children"],Ti={"daily routine":["I","my sister","my brother","we","my roommate","my mom","the neighbors"],travel:["the tourists","we","my family","the pilot","the passengers","she","the guide"],work:["the manager","my colleague","we","the intern","the boss","the employees","I"],food:["the chef","my grandmother","we","the waiter","I","the customers","she"],sports:["the coach","the players","she","the team","my brother","the athlete","we"],shopping:["the customer","I","she","the cashier","we","my friend","they"],family:["my parents","the children","my uncle","we","my grandmother","the cousins","she"],health:["the doctor","the patient","I","the nurse","my dentist","she","we"],technology:["the programmer","I","the users","we","the app","she","the company"],hobbies:["I","my friend","she","we","the artist","the musician","they"],weather:["it","the forecast","we","the storm","the temperature","they","I"],school:["the teacher","the students","I","we","the professor","she","the class"],nature:["the animals","the birds","we","the river","the trees","I","the hikers"],"dev meetings & scrum":["the team","the developer","the scrum master","the product owner","we","the QA engineer","the tech lead","the intern","the backend team","the designer"],"software engineering":["the developer","the architect","we","the API","the server","the database","the frontend","the microservice","the application","the system","the engineer","the DevOps team"],entertainment:["the actor","the director","we","the audience","she","the band","my friend","the singer","the fans","I","they"],"job interviews":["the candidate","the interviewer","I","the recruiter","she","the manager","we","the applicant","he","the HR team"]},Ii={"daily routine":["wake up","eat","commute","cook","clean","shower","exercise","sleep","brush","prepare"],travel:["fly","book","explore","pack","visit","arrive","depart","check in","tour","discover"],work:["manage","present","schedule","hire","negotiate","organize","delegate","approve","submit","collaborate"],food:["cook","taste","bake","order","serve","chop","mix","fry","grill","prepare"],sports:["score","train","compete","win","practice","run","swim","kick","throw","defend"],shopping:["buy","return","compare","choose","pay","browse","try on","sell","exchange","discount"],family:["celebrate","visit","gather","support","raise","share","remember","call","help","invite"],health:["exercise","prescribe","diagnose","recover","check","treat","rest","breathe","stretch","heal"],technology:["download","update","code","stream","install","connect","browse","debug","upload","sync"],hobbies:["paint","play","collect","read","build","photograph","draw","sing","garden","craft"],weather:["rain","snow","blow","freeze","shine","warm up","cool down","forecast","clear up","flood"],school:["study","teach","learn","write","graduate","enroll","pass","fail","research","present"],nature:["grow","bloom","migrate","hike","flow","climb","observe","protect","plant","explore"],"dev meetings & scrum":["deploy","review","estimate","refactor","prioritize","demo","block","assign","sprint","release"],"software engineering":["compile","deploy","refactor","debug","optimize","authenticate","query","cache","scale","integrate"],entertainment:["watch","perform","release","stream","direct","sing","act","record","premiere","produce"],"job interviews":["hire","apply","interview","negotiate","prepare","qualify","impress","evaluate","recommend","accept"]},Pi={"daily routine":"Use vocabulary related to everyday activities. Examples: alarm, breakfast, commute, shower, coffee, lunch, chores, dinner, homework, bedtime â€” but feel free to use any other related vocabulary.",travel:"Use vocabulary related to travel and tourism. Examples: airport, passport, luggage, hotel, reservation, boarding pass, destination, souvenir, itinerary, customs â€” but feel free to use any other related vocabulary.",work:"Use vocabulary related to the workplace. Examples: office, meeting, deadline, presentation, salary, promotion, colleague, project, report, client â€” but feel free to use any other related vocabulary.",food:"Use vocabulary related to food and cooking. Examples: recipe, ingredient, restaurant, menu, appetizer, dessert, spice, oven, portion, reservation â€” but feel free to use any other related vocabulary.",sports:"Use vocabulary related to sports and athletics. Examples: match, score, goal, referee, championship, training, stadium, opponent, league, medal â€” but feel free to use any other related vocabulary.",shopping:"Use vocabulary related to shopping. Examples: store, price, discount, receipt, size, brand, cart, sale, fitting room, checkout â€” but feel free to use any other related vocabulary.",family:"Use vocabulary related to family life. Examples: reunion, birthday, sibling, relative, tradition, wedding, generation, childhood, holiday, gathering â€” but feel free to use any other related vocabulary.",health:"Use vocabulary related to health and wellness. Examples: doctor, patient, medicine, prescription, symptom, diagnosis, appointment, recovery, therapy, vitamins â€” but feel free to use any other related vocabulary.",technology:"Use vocabulary related to technology and digital life. Examples: app, smartphone, software, internet, password, notification, device, screen, update, wireless â€” but feel free to use any other related vocabulary.",hobbies:"Use vocabulary related to hobbies and leisure. Examples: guitar, canvas, puzzle, garden, stamp, chess, pottery, photography, knitting, workshop â€” but feel free to use any other related vocabulary.",weather:"Use vocabulary related to weather and climate. Examples: temperature, forecast, umbrella, cloudy, sunshine, thunder, humidity, breeze, drought, season â€” but feel free to use any other related vocabulary.",school:"Use vocabulary related to education. Examples: classroom, exam, homework, grade, campus, lecture, textbook, semester, scholarship, assignment â€” but feel free to use any other related vocabulary.",nature:"Use vocabulary related to nature and the outdoors. Examples: forest, mountain, river, wildlife, trail, ocean, sunset, meadow, waterfall, ecosystem â€” but feel free to use any other related vocabulary.","dev meetings & scrum":"Use vocabulary related to agile/scrum and dev team workflows. Examples include standup, sprint, backlog, blocker, retrospective, code review, deploy, pull request, ticket, demo, velocity, release, branch, merge â€” but feel free to use any other related vocabulary.","software engineering":"Use vocabulary related to software development and infrastructure. Examples include API, database, server, cloud, Docker, cache, endpoint, query, schema, microservice, pipeline, authentication, deployment â€” but feel free to use any other related vocabulary.",entertainment:"Use vocabulary related to movies, music, TV shows, and entertainment. Examples include movie, concert, album, series, episode, soundtrack, trailer, award, genre, streaming, theater, performance, box office, review â€” but feel free to use any other related vocabulary.","job interviews":"Use vocabulary related to job interviews and hiring. Examples include resume, interview, salary, position, experience, qualification, reference, offer, skills, strengths, weakness, background, career, promotion â€” but feel free to use any other related vocabulary."};function ji(a,e="random",t,s=[],n){const r=ki[a],l=r.tenses.split(", "),i=t||it(l),u=e==="random"?it(kr):e,m=Ti[u]||Ei,v=it(m),x=Pi[u]||"",_=Ii[u],g=_?it(_):void 0,S=it(n?["interrogative","interrogative","negative-interrogative"]:["affirmative","negative"]),M=s.length>0?`
DO NOT generate any of these sentences (or similar ones):
${s.map(f=>`- "${f}"`).join(`
`)}
You MUST create a completely different sentence with a different subject, verb, and complement.
`:"";return`You are a grammar exercise generator for English learners. Generate ONE exercise.

DIFFICULTY: ${a}
TENSE TO USE: ${i}
TOPIC: ${u}${x?`
TOPIC VOCABULARY: ${x}`:""}
SENTENCE LENGTH: ${r.wordRange}
DISTRACTORS: ${r.distractors}
SUGGESTED SUBJECT: ${v} (use this or a similar subject)${g?`
SUGGESTED VERB: ${g} (use this or a similar verb related to the topic)`:""}
SENTENCE FORM: ${S}${S==="interrogative"?" (you MUST generate a question, not a statement)":S==="negative-interrogative"?` (you MUST generate a NEGATIVE QUESTION, e.g. "Don't you like coffee?", "Hasn't she finished?". Set isNegative: true AND isQuestion: true)`:S==="negative"?` (you MUST use GRAMMATICAL negation with not/don't/doesn't/didn't/won't/can't/hasn't/isn't etc. Do NOT use semantically negative verbs like "refuse", "avoid", "deny", "reject" as a substitute for real negation. WRONG: "She refuses to go" â€” this is grammatically affirmative. CORRECT: "She doesn't want to go" â€” this uses real grammatical negation.)`:""}
${i==="reported speech"?`REPORTED SPEECH VARIETY: You MUST pick ONE of these reported speech patterns:
- Reported statements with backshift: "She said that she was tired." (presentâ†’past)
- Reported statements with past perfect backshift: "He said he had finished." (pastâ†’past perfect)
- Reported statements with would backshift: "They said they would come." (willâ†’would)
- Reported statements with could backshift: "She said she could swim." (canâ†’could)
- Reported questions with if/whether: "He asked if I was coming."
- Reported questions with wh-word: "She asked where I lived."
- Reported commands/requests: "He told me to wait." / "She asked me not to run."
- Reported speech with varied verbs: explained, admitted, denied, promised, warned, suggested, complained, insisted, announced, mentioned
- Reported speech with past perfect continuous: "You said you had been collecting stamps for years."
Do NOT always default to "said + past perfect". Mix it up!

REPORTED SPEECH TENSE LABEL: Based on the pattern you chose, set metadata.tense to ONE of these exact values:
- "reported speech" â€” for reported statements (backshift of any kind)
- "reported speech: questions" â€” for reported questions (asked if/whether/wh-)
- "reported speech: commands" â€” for reported commands/requests (told/asked + to)
- "reported speech: reporting verbs" â€” for sentences using verbs other than said/told (explained, admitted, denied, promised, warned, suggested, etc.)`:""}
${i==="imperative"?`IMPERATIVE INSTRUCTIONS: Generate a command, instruction, or request. Imperatives use the base form of the verb with NO subject.
Examples: "Close the door", "Be quiet", "Don't touch that", "Please sit down", "Turn off the lights"
- For negative imperatives use "Don't" or "Do not": "Don't run in the hallway"
- You can optionally add "Please" for polite requests: "Please open the window"
- The Sujeto hint should say "implÃ­cito (tÃº/usted)" since imperatives have no explicit subject.
- Set metadata.isNegative to true if using "Don't/Do not".`:""}
${i==="present perfect continuous"?`PRESENT PERFECT CONTINUOUS INSTRUCTIONS: Use have/has + been + verb-ing to express actions that started in the past and continue to the present, or recently stopped.
Examples: "She has been studying for three hours", "They have been waiting since morning", "I have been working all day"
- Use time expressions like "for", "since", "all day", "lately", "recently"`:""}
${i==="second conditional"?`SECOND CONDITIONAL INSTRUCTIONS: Express unreal/hypothetical present or future situations.
Structure: If + past simple, would + base verb
Examples: "If I had more money, I would travel the world", "If she spoke French, she would move to Paris"
- Use "were" instead of "was" for formal/correct usage: "If I were you, I would study harder"
- The condition is UNREAL (not likely to happen)`:""}
${i==="used to"?`USED TO INSTRUCTIONS: Express past habits or states that are no longer true.
Structure: Subject + used to + base verb
Examples: "I used to play football every weekend", "She used to live in London", "They used to be friends"
- "Used to" indicates something was true in the past but NOT anymore
- For negatives: "didn't use to" (no -d on "use")
- For questions: "Did you use to...?"`:""}
${i==="comparatives and superlatives"?`COMPARATIVES AND SUPERLATIVES INSTRUCTIONS: Generate a sentence using either a comparative or superlative form.
Comparatives: adjective + -er + than / more + adjective + than
Superlatives: the + adjective + -est / the most + adjective
Examples: "This book is more interesting than that one", "She is taller than her brother", "This is the most beautiful park in the city", "He is the fastest runner on the team"
- Short adjectives (1 syllable): -er/-est (tallâ†’tallerâ†’tallest)
- Long adjectives (2+ syllables): more/most (interestingâ†’more interestingâ†’most interesting)
- Irregular: goodâ†’betterâ†’best, badâ†’worseâ†’worst, farâ†’fartherâ†’farthest`:""}
${i==="zero conditional"?`ZERO CONDITIONAL INSTRUCTIONS: Express general truths, scientific facts, or things that always happen.
Structure: If/When + present simple, present simple
Examples: "If you heat water to 100 degrees, it boils", "When it rains, the streets get wet", "If you mix red and blue, you get purple"
- Both clauses use present simple
- "When" can replace "if" since the result always happens
- This is NOT about future possibilities (that's first conditional) â€” it's about things that are ALWAYS true`:""}
${i==="gerund vs infinitive"?`GERUND VS INFINITIVE INSTRUCTIONS: Generate a sentence that uses either a gerund (verb-ing) or infinitive (to + verb) after another verb.
Examples with gerund: "She enjoys cooking Italian food", "They avoid driving at night", "He finished reading the book"
Examples with infinitive: "She wants to travel abroad", "He decided to study medicine", "They agreed to meet tomorrow"
Common gerund verbs: enjoy, avoid, finish, mind, suggest, keep, practice, consider, miss, deny
Common infinitive verbs: want, decide, agree, hope, plan, promise, refuse, learn, expect, afford
- Choose ONE pattern per sentence (gerund OR infinitive, not both)
- The Verbo hint should mention both verbs, e.g., "disfrutar + cocinar" or "querer + viajar"`:""}
${i==="relative clauses"?`RELATIVE CLAUSES INSTRUCTIONS: Generate a sentence with a relative clause using who, which, that, where, or whose.
Examples: "The man who lives next door is a doctor", "The book that I bought yesterday is interesting", "This is the restaurant where we had dinner", "The woman whose car broke down called for help"
- "who" for people, "which" for things, "that" for both, "where" for places, "whose" for possession
- Keep the sentence natural and not too long (within word range)`:""}
${i==="future perfect"?`FUTURE PERFECT INSTRUCTIONS: Express actions that will be completed before a specific point in the future.
Structure: Subject + will have + past participle
Examples: "By next year, I will have graduated", "She will have finished the project by Friday", "They will have lived here for ten years by December"
- Use time markers: "by + time", "by the time...", "before..."`:""}
${i==="future continuous"?`FUTURE CONTINUOUS INSTRUCTIONS: Express actions that will be in progress at a specific time in the future.
Structure: Subject + will be + verb-ing
Examples: "This time tomorrow, I will be flying to London", "At 8 PM, she will be working", "Next week, they will be traveling across Europe"
- Use time markers: "this time tomorrow", "at + specific time", "next week/month"`:""}
${i==="mixed conditional"?`MIXED CONDITIONAL INSTRUCTIONS: Mix conditional clauses from different time frames (past condition â†’ present result, or present condition â†’ past result).
Type 1 â€” Past condition â†’ Present result: "If I had studied medicine, I would be a doctor now"
Structure: If + past perfect, would + base verb
Type 2 â€” Present condition â†’ Past result: "If she spoke French, she would have gotten the job"
Structure: If + past simple, would have + past participle
- Pick ONE type per sentence. These are UNREAL situations.`:""}
${i==="past perfect continuous"?`PAST PERFECT CONTINUOUS INSTRUCTIONS: Express actions that had been in progress before another past action.
Structure: Subject + had been + verb-ing
Examples: "I had been waiting for two hours when the bus finally came", "She had been working there for five years before she quit", "They had been living in Paris before they moved to London"
- Use time expressions: "for + duration", "before...", "when..."
- Emphasizes the DURATION of an action before another past event`:""}
${i==="articles"?`ARTICLES INSTRUCTIONS: Generate a sentence where the correct use of articles (a, an, the, or zero article) is the main challenge.
Examples: "She is an engineer at the hospital", "I need a new phone", "The children are playing in the park", "He likes music" (zero article)
- Focus on the contrast between a/an (general), the (specific), and zero article (general concepts)
- Distractors should include wrong articles: if the answer uses "the", offer "a" or "an" as distractors
- Common patterns: "a" before consonant sounds, "an" before vowel sounds, "the" for specific/known items, no article for general plurals or uncountable nouns
- This is one of the hardest topics for Spanish speakers â€” choose sentences where the article choice is tricky`:""}
${i==="there is/are"?`THERE IS/ARE INSTRUCTIONS: Generate a sentence using "there is" (singular/uncountable) or "there are" (plural) to express existence or presence.
Examples: "There is a cat on the roof", "There are many students in the classroom", "There is some milk in the fridge"
- "There is" for singular or uncountable nouns, "There are" for plural
- Distractors should include the wrong form (e.g., "are" when answer needs "is")
- Can use with quantifiers: some, many, a lot of, a few, several
- Negatives: "There isn't / There aren't" or "There is no / There are no"`:""}
${i==="prepositions"?`PREPOSITIONS INSTRUCTIONS: Generate a sentence where the correct use of prepositions (in, on, at, etc.) is the main challenge.
Time prepositions: at (specific time: at 3 PM, at night), in (periods: in the morning, in July, in 2024), on (days/dates: on Monday, on July 4th)
Place prepositions: in (inside: in the box, in Paris), on (surface: on the table, on the wall), at (point: at school, at home, at the station)
Examples: "The meeting is at 3 PM on Monday", "She lives in a house on the hill", "We arrived at the airport in the morning"
- Distractors MUST include wrong prepositions (e.g., "in" vs "on" vs "at")
- Focus on cases that confuse Spanish speakers: "at night" (not "in the night"), "on the weekend" (not "in the weekend"), "at home" (not "in home")`:""}
${i==="connectors"?`CONNECTORS INSTRUCTIONS: Generate a sentence using a linking word or connector to join ideas.
Examples: "Although it was raining, we went for a walk", "She studied hard; however, she failed the exam", "Despite the traffic, we arrived on time", "He is tired because he worked all night"
Connectors to use: although/even though (aunque), however (sin embargo), despite/in spite of (a pesar de), therefore (por lo tanto), furthermore/moreover (ademÃ¡s), nevertheless (no obstante), whereas/while (mientras que), as a result (como resultado), in addition (ademÃ¡s), on the other hand (por otro lado)
- Pick ONE connector per sentence
- "Despite/in spite of" are followed by a noun or gerund (not a clause): "Despite being tired" or "Despite the rain"
- "Although/even though" are followed by a clause: "Although it was late"
- "However/nevertheless/therefore" usually start a new clause, often after a semicolon or period`:""}
${i==="causative"?`CAUSATIVE INSTRUCTIONS: Generate a sentence using the causative structure to express that someone arranges for another person to do something.
Structure: Subject + have/get + object + past participle
Examples: "I had my car repaired yesterday", "She got her hair cut at the salon", "We are having the house painted next week", "He had his phone fixed"
- "Have something done" = arrange for someone else to do it (more formal)
- "Get something done" = same meaning (more informal)
- Can be used in any tense: had...repaired (past), am having...painted (present continuous), will have...delivered (future)
- The Verbo hint should clarify it's causative, e.g., "hacer reparar (causativo)" or "mandar cortar (causativo)"
- Do NOT confuse with "have" as a main verb or "get" meaning "obtain"`:""}
${i==="wish/if only"?`WISH/IF ONLY INSTRUCTIONS: Generate a sentence expressing a wish or regret using "wish" or "if only".
Present wishes (wanting the present to be different): wish/if only + past simple
Examples: "I wish I had more free time", "If only she spoke English", "I wish I were taller"
Past regrets (wishing the past had been different): wish/if only + past perfect
Examples: "I wish I had studied harder", "If only we had left earlier", "She wishes she hadn't said that"
Future wishes (annoying habits or wanting something to change): wish + would
Examples: "I wish it would stop raining", "She wishes he would listen to her"
- Use "were" (not "was") for formal correctness: "I wish I were" (not "I wish I was")
- "If only" is more emphatic/emotional than "wish"
- Pick ONE type per sentence`:""}
${i==="inversion"?`INVERSION INSTRUCTIONS: Generate a sentence with inverted word order for emphasis, used in formal or literary English.
Examples:
- "Not only did he pass the exam, but he also got the highest score"
- "Never have I seen such a beautiful sunset"
- "Rarely does she arrive late"
- "Only after finishing the project did he take a break"
- "Had I known about the meeting, I would have attended"
Common inversion triggers: Not only...but also, Never, Rarely, Seldom, Hardly, Only after/when/if, Had (conditional without "if"), No sooner...than, Not until
Structure: Negative/restrictive adverb + auxiliary + subject + verb
- The auxiliary (do/does/did, have/has, was/were, will, can, etc.) comes BEFORE the subject
- This is a very advanced structure â€” keep sentences clear and natural
- Most common in formal writing, speeches, and emphatic statements`:""}
${M}

INSTRUCTIONS:
1. Use the specified tense and topic above. Be creative and generate a unique sentence.
   IMPORTANT: The sentence MUST be something a real person would naturally say in everyday life. Avoid absurd, unnatural, or overly contrived sentences. Ask yourself: "Would a normal person actually say this?" If not, pick a different sentence.
   Examples of BAD sentences: "Am I not forecasting rain for tomorrow?" (nobody talks like this), "The chair is being sat on by my friend" (forced passive).
   Examples of GOOD sentences: "Is she not coming to the party?" (natural), "The report was reviewed by the manager" (realistic).
2. FIRST write the correct English sentence (correctSentence). This is the source of truth for the entire exercise.
3. THEN write "spanishSentence": a FAITHFUL and COMPLETE Spanish translation of correctSentence. Every word in the English must be reflected in the Spanish, and vice versa. Do NOT add words in Spanish that aren't in the English, and do NOT omit English concepts from the Spanish. This is the user's primary clue â€” if it doesn't match, the exercise is unsolvable.
4. THEN create conceptual hints ENTIRELY IN SPANISH that describe ONLY what is in the correctSentence:
   - Sujeto: describe the subject in Spanish (e.g., "ella", "mis padres", "un perro")
   - Verbo: the verb in Spanish infinitive (e.g., "cocinar", "ir", "estudiar")
     MODAL VERBS RULE: When the sentence uses a modal verb, DO NOT just say "poder". Be specific:
     - can â†’ "poder (habilidad)"
     - could â†’ "podrÃ­a (posibilidad/pasado)"
     - should â†’ "deberÃ­a (consejo)"
     - must â†’ "deber (obligaciÃ³n)"
     - might â†’ "podrÃ­a/quizÃ¡s (posibilidad)"
     - may â†’ "poder (permiso/posibilidad)"
     Always include the main verb too, e.g., "deberÃ­a (consejo) + enviar", "poder (habilidad) + nadar"
   - Complemento: describe the complement in Spanish (e.g., "en el parque", "una carta", "con sus amigos")
   - Tiempo: time expression in Spanish (e.g., "ayer", "todos los dÃ­as", "ahora mismo")
   NEVER use English words in the hints â€” EXCEPT for technical jargon that developers use in Spanish without translating (e.g., "pull request", "sprint", "deploy", "bug", "backlog", "standup", "branch", "merge", "pipeline", "scrum master"). These terms should stay in English in the hints because that's how Spanish speakers actually use them.
5. Break the correctSentence into individual word cards (one card per word).
6. Add ${r.distractors} that are plausible wrong choices.
7. Include a "translations" object mapping every word (lowercase) to its Spanish translation. Cover ALL correct words AND all distractors. Just provide the plain translation â€” no extra notes, no "(incorrecto)", no tense labels.

CRITICAL CONSISTENCY RULES:
- The spanishSentence MUST be a LITERAL, COMPLETE, and FAITHFUL translation of the correctSentence. Every single word/concept in correctSentence MUST appear in the spanishSentence, and vice versa. The user relies on the spanishSentence to deduce the English answer â€” if something is in the English but NOT in the Spanish (or vice versa), the exercise is BROKEN.
  - WRONG: correctSentence="I collect old stamps in a workshop" but spanishSentence="Colecciono sellos antiguos en mi taller" (Spanish says "mi taller"=my workshop, but English says "a workshop" â€” these don't match!)
  - WRONG: correctSentence="Watch the movie trailer now" but spanishSentence="Mira el trÃ¡iler de la pelÃ­cula nueva" (Spanish says "nueva"=new but English has "now"=ahora â€” completely different words!)
  - CORRECT: correctSentence="I collect old stamps in a workshop" and spanishSentence="Colecciono sellos antiguos en un taller" (both say "a/un workshop/taller")
  - CORRECT: correctSentence="Watch the new movie trailer" and spanishSentence="Mira el trÃ¡iler de la pelÃ­cula nueva" (both mention "new/nueva")
- The hints MUST describe EXACTLY the correctSentence â€” nothing more, nothing less.
- Every concept mentioned in the hints MUST have corresponding words in correctSentence.
- The "Sujeto" hint MUST match the actual subject of correctSentence. Double-check: who performs the action in correctSentence? That is the Sujeto.
- The "Tiempo" hint MUST match a time expression that actually appears in correctSentence. If correctSentence has no time expression, either add one to correctSentence or omit the Tiempo hint.
- There must be exactly one card per word in correctSentence with isDistractor: false.

SELF-CHECK (do this BEFORE outputting your JSON):
1. Read your correctSentence word by word. Does every word have a corresponding concept in spanishSentence? If not, FIX the spanishSentence.
2. Read your spanishSentence word by word. Does every concept appear in correctSentence? If not, FIX one or the other so they match.
3. Check the Tiempo hint â€” does that time expression actually appear as words in correctSentence? If not, either add those words to correctSentence (and cards) or change the hint to match what's actually there.
4. Count the non-distractor cards. Does it equal the number of words in correctSentence? If not, fix the cards.

OTHER RULES:
- metadata.tense MUST be one of the allowed values for the tense (e.g. "reported speech", "reported speech: questions", etc.) â€” do NOT invent labels like "reported speech (past perfect)" or "reported speech with could backshift"
- Each card has exactly ONE word (never two words in one card)
- No punctuation in card text (no periods, commas, etc.)
- NO duplicate words across cards. If a distractor would duplicate an existing card, pick a different distractor.
- The first word of the correct sentence should be capitalized
- Distractors should be tricky but fair (e.g., "goed" instead of "went", "in" instead of "at")
- For questions, use proper English question word order (auxiliary + subject + verb, or question word + auxiliary + subject + verb). Do NOT include question marks in cards.

Respond ONLY with valid JSON in this exact format, no markdown:
{
  "hints": ["Sujeto: ...", "Verbo: ...", "Complemento: ...", "Tiempo: ..."],
  "hintDisplay": "Sujeto: ... / Verbo: ... / Complemento: ... / Tiempo: ...",
  "spanishSentence": "La oraciÃ³n completa en espaÃ±ol, natural y correcta",
  "correctSentence": "The full correct sentence",
  "cards": [
    {"id": "d1", "text": "distractor", "isDistractor": true},
    {"id": "c3", "text": "word3", "isDistractor": false},
    {"id": "c1", "text": "word1", "isDistractor": false},
    {"id": "c2", "text": "word2", "isDistractor": false}
  ],
  "translations": {
    "word1": "traducciÃ³n1",
    "word2": "traducciÃ³n2",
    "word3": "traducciÃ³n3",
    "distractor": "traducciÃ³n4"
  },
  "metadata": {
    "tense": "${i}",
    "isNegative": false,
    "isQuestion": false,
    "difficulty": "${a}",
    "topic": "daily routine"
  }
}

Use unique IDs like c1, c2... for correct words and d1, d2... for distractors. Remember: cards MUST be shuffled, not in sentence order.`}function Ni(a,e,t,s){return`You are an English grammar evaluator for Spanish-speaking learners.

CONTEXT:
- Grammar: ${e.tense}, ${e.isNegative?"negative":"affirmative"}
- Topic: ${e.topic}
- Difficulty: ${e.difficulty}
- Expected answer: "${t}"
- Student's answer: "${s}"

INSTRUCTIONS:
1. Compare the student's answer ONLY with the expected answer. The expected answer is the ONLY correct reference â€” do not use the hints to judge correctness.
2. The answer is CORRECT if it conveys the same meaning with valid grammar, even if word order differs slightly or uses valid synonyms (e.g., "do not" vs "don't").
3. If incorrect, explain WHY in Spanish in a friendly, educational way.
4. Always include a brief grammar note in Spanish explaining the rule used.
5. The "correctSentence" field in your response MUST be exactly: "${t}" â€” do not modify it.

Respond ONLY with valid JSON in this exact format, no markdown:
{
  "isCorrect": true,
  "feedback": "Brief feedback message in Spanish",
  "correctSentence": "${t}",
  "grammarNote": "Grammar explanation in Spanish about the tense/structure used"
}`}function Va(a){return a instanceof st.APIConnectionError?"Sin conexiÃ³n a internet. Verifica tu red e intenta de nuevo.":a instanceof st.APIError?a.status===529||a.status===503?"El servidor de Claude estÃ¡ sobrecargado. Intenta de nuevo en unos segundos.":a.status===401?"API key invÃ¡lida. Verifica tu clave.":a.status===429?"Demasiadas solicitudes. Espera un momento e intenta de nuevo.":a.status===400?"Error en la solicitud. Intenta de nuevo.":`Error del servidor (${a.status}). Intenta de nuevo.`:a instanceof Error?a.message.includes("fetch")||a.message.includes("network")||a.message.includes("Failed to fetch")?"Sin conexiÃ³n a internet. Verifica tu red e intenta de nuevo.":a.message:"Error desconocido"}function Dn(a){return new st({apiKey:a,dangerouslyAllowBrowser:!0})}function On(a){const e=a.match(/```(?:json)?\s*([\s\S]*?)```/);return e?e[1].trim():a.trim()}function Ci(a){return a.replace(/[.,!?;:]+$/g,"").trim().split(/\s+/).map(e=>e.replace(/[.,!?;:]+$/,"").trim()).filter(Boolean)}function Ri(a,e,t){const s=e.replace(/[.,!?;:]+/g,"").split(/\s+/).filter(Boolean),n=s.map((m,v)=>({id:`c${v+1}`,text:m,isDistractor:!1,translation:t?.[m.toLowerCase()]})),r=new Set(s.map(m=>m.toLowerCase())),l=[],i=new Set;let u=1;for(const m of a){if(!m.isDistractor)continue;const v=Ci(m.text);for(const x of v){const _=x.toLowerCase();i.has(_)||r.has(_)||(i.add(_),l.push({id:`d${u++}`,text:x,isDistractor:!0,translation:t?.[_]}))}}return[...n,...l]}function Ai(a){const e=[...a];for(let t=e.length-1;t>0;t--){const s=Math.floor(Math.random()*(t+1));[e[t],e[s]]=[e[s],e[t]]}return e}async function Ln(a,e,t="random",s,n=[],r){const l=Dn(a),i=ji(e,t,s,n,r);async function u(){const m=await l.messages.create({model:"claude-haiku-4-5-20251001",max_tokens:1024,temperature:.5,messages:[{role:"user",content:i}]}),v=m.content[0];if(v.type!=="text")throw new Error("Unexpected response type");const x=m.usage,_=x.input_tokens/1e6*.8,g=x.output_tokens/1e6*4;console.log(`[GENERATE] tokens: in=${x.input_tokens} out=${x.output_tokens} | cost: $${(_+g).toFixed(6)}`);const S=JSON.parse(On(v.text)),M=S.translations,f=S;if(f.metadata.tense.toLowerCase().includes("reported speech")){const T=f.metadata.tense.toLowerCase();T.includes("question")||T.includes("asked")||T.includes("if/whether")?f.metadata.tense="reported speech: questions":T.includes("command")||T.includes("request")||T.includes("order")||T.includes("told")&&T.includes("to")?f.metadata.tense="reported speech: commands":T.includes("reporting verb")||T.includes("explained")||T.includes("admitted")||T.includes("denied")||T.includes("promised")||T.includes("warned")||T.includes("suggested")||T.includes("complained")||T.includes("insisted")?f.metadata.tense="reported speech: reporting verbs":f.metadata.tense="reported speech"}f.cards=Ri(f.cards,f.correctSentence,M),f.correctSentence=f.correctSentence.replace(/[;:!.]+/g,"").replace(/\s{2,}/g," ").trim();const y=(f.correctSentence.match(/,/g)||[]).length;if(y>0){f.correctSentence=f.correctSentence.replace(/\s*,\s*/g," ,").replace(/\s{2,}/g," ").trim();for(let T=0;T<y;T++)f.cards.push({id:`cm${T+1}`,text:",",isDistractor:!1,translation:"coma"})}return f.metadata.isQuestion&&(f.cards.push({id:"qm",text:"?",isDistractor:!1,translation:"signo de interrogaciÃ³n"}),f.correctSentence=f.correctSentence.replace(/\?$/,"").trim()+" ?"),f.cards=Ai(f.cards),f}try{return await u()}catch(m){if(m instanceof SyntaxError)return console.warn("[GENERATE] JSON parse error, retrying once...",m),await u();throw m}}async function Mi(a,e,t,s,n){const r=Dn(a),l=Ni(e,t,s,n);async function i(){const u=await r.messages.create({model:"claude-haiku-4-5-20251001",max_tokens:512,messages:[{role:"user",content:l}]}),m=u.content[0];if(m.type!=="text")throw new Error("Unexpected response type");const v=u.usage,x=v.input_tokens/1e6*.8,_=v.output_tokens/1e6*4;return console.log(`[EVALUATE] tokens: in=${v.input_tokens} out=${v.output_tokens} | cost: $${(x+_).toFixed(6)}`),JSON.parse(On(m.text))}try{return await i()}catch(u){if(u instanceof SyntaxError)return console.warn("[EVALUATE] JSON parse error, retrying once...",u),await i();throw u}}let et=null;function zt(){return et||(et=new AudioContext),et.state==="suspended"&&et.resume(),et}function Pt(a,e,t="sine",s=.15){const n=zt(),r=n.createOscillator(),l=n.createGain();r.type=t,r.frequency.value=a,l.gain.setValueAtTime(s,n.currentTime),l.gain.exponentialRampToValueAtTime(.001,n.currentTime+e),r.connect(l),l.connect(n.destination),r.start(n.currentTime),r.stop(n.currentTime+e)}function qi(){const a=zt(),e=a.createOscillator(),t=a.createGain();e.type="sine",e.frequency.setValueAtTime(600,a.currentTime),e.frequency.exponentialRampToValueAtTime(900,a.currentTime+.06),t.gain.setValueAtTime(.12,a.currentTime),t.gain.exponentialRampToValueAtTime(.001,a.currentTime+.1),e.connect(t),t.connect(a.destination),e.start(a.currentTime),e.stop(a.currentTime+.1)}function Di(){const a=zt(),e=a.createOscillator(),t=a.createGain();e.type="sine",e.frequency.setValueAtTime(800,a.currentTime),e.frequency.exponentialRampToValueAtTime(500,a.currentTime+.08),t.gain.setValueAtTime(.1,a.currentTime),t.gain.exponentialRampToValueAtTime(.001,a.currentTime+.1),e.connect(t),t.connect(a.destination),e.start(a.currentTime),e.stop(a.currentTime+.1)}function Oi(){zt().currentTime,Pt(523,.15,"sine",.15),setTimeout(()=>Pt(659,.15,"sine",.15),100),setTimeout(()=>Pt(784,.15,"sine",.15),200),setTimeout(()=>Pt(1047,.3,"sine",.18),300),setTimeout(()=>Pt(1319,.4,"triangle",.08),400)}function Li(){const a=zt(),e=a.createOscillator(),t=a.createGain();e.type="sawtooth",e.frequency.setValueAtTime(350,a.currentTime),e.frequency.linearRampToValueAtTime(300,a.currentTime+.2),e.frequency.linearRampToValueAtTime(250,a.currentTime+.5),e.frequency.linearRampToValueAtTime(180,a.currentTime+.8),t.gain.setValueAtTime(.1,a.currentTime),t.gain.setValueAtTime(.1,a.currentTime+.15),t.gain.linearRampToValueAtTime(.03,a.currentTime+.25),t.gain.linearRampToValueAtTime(.1,a.currentTime+.35),t.gain.linearRampToValueAtTime(.03,a.currentTime+.5),t.gain.linearRampToValueAtTime(.08,a.currentTime+.6),t.gain.exponentialRampToValueAtTime(.001,a.currentTime+.9),e.connect(t),t.connect(a.destination),e.start(a.currentTime),e.stop(a.currentTime+.9)}var Ui=N('<!> <div class="actions svelte-9e286u"><button class="clear-btn svelte-9e286u">Limpiar</button> <button class="submit-btn svelte-9e286u">Verificar</button></div>',1),zi=N('<div class="loading-eval svelte-9e286u"><p>Evaluando tu respuesta...</p></div>'),Hi=N("<!> <!> <!> <!> <!>",1),Wi=N('<button class="svelte-9e286u">Cerrar</button>'),Fi=N('<button class="svelte-9e286u">Reintentar</button> <button class="change-key-btn svelte-9e286u">Volver</button>',1),Vi=N('<div class="error-msg svelte-9e286u"><p class="svelte-9e286u"> </p> <div class="error-actions svelte-9e286u"><!> <button class="change-key-btn svelte-9e286u">Cambiar API key</button></div></div>'),Bi=N('<div class="game-board svelte-9e286u"><!> <!> <!></div>');function $i(a,e){je(e,!0);const t=K(vo),s=K(wo),n=K(an),r=K(go),l=K(bo),i=K(qo),u=K(sn),m=K(Do),v=K(xo),x=K(So);let _=J(!1),g=J("");function S(E){qi(),Ro(E)}function M(E){Di(),Ao(E)}async function f(){if(!(!o(t)||!o(m).trim())){I(_,!0),I(g,o(m),!0),Ae("submitted");try{const E=await Mi(ms(),o(t).hints,o(t).metadata,o(t).correctSentence,o(m));Co(E),Ir({isCorrect:E.isCorrect,difficulty:o(t).metadata.difficulty,topic:o(t).metadata.topic,tense:o(t).metadata.tense,isQuestion:o(t).metadata.isQuestion??!1,isNegative:o(t).metadata.isNegative,wasRetry:o(v)}),!E.isCorrect&&!o(v)&&Er(o(t),o(g)),E.isCorrect&&o(v)&&o(x)&&Qs(o(x)),E.isCorrect?(Oi(),setTimeout(()=>Da(o(g)),800)):Li(),Ae("feedback")}catch(E){Nt(Va(E)),Ae("playing")}finally{I(_,!1)}}}async function y(){if(o(v)){fs(),Fe("retry");return}nn(),Ae("loading");try{const E=await Ln(ms(),po(),ho(),mo(),yo(),fo());Oa(E),Ae("playing")}catch(E){Nt(Va(E)),Ae("playing")}}function T(){o(v)?(fs(),Fe("retry")):vs()}var W=Bi(),F=d(W);uo(F,{get session(){return o(s)},onback:T});var A=h(F,2);{var b=E=>{var C=Hi(),D=at(C);Jr(D,{get hintDisplay(){return o(t).hintDisplay},get spanishSentence(){return o(t).spanishSentence},get metadata(){return o(t).metadata}});var G=h(D,2);to(G,{get cards(){return o(u)},ondeselect:M});var te=h(G,2);{var de=U=>{var ie=Ui(),q=at(ie);no(q,{get cards(){return o(i)},onselect:S});var L=h(q,2),Z=d(L);Z.__click=function(...ue){Mo?.apply(this,ue)};var we=h(Z,2);we.__click=f,c(L),V(()=>{Z.disabled=o(u).length===0,we.disabled=o(u).length===0}),P(U,ie)};Q(te,U=>{o(n)==="playing"&&U(de)})}var oe=h(te,2);{var ae=U=>{var ie=zi();P(U,ie)};Q(oe,U=>{o(n)==="submitted"&&U(ae)})}var B=h(oe,2);{var $=U=>{{let ie=K(()=>o(v)?"Volver a la lista":void 0);lo(U,{get result(){return o(r)},get correctSentence(){return o(t).correctSentence},get userSentence(){return o(g)},onnext:y,get nextLabel(){return o(ie)}})}};Q(B,U=>{o(n)==="feedback"&&o(r)&&U($)})}P(E,C)};Q(A,E=>{o(t)&&E(b)})}var w=h(A,2);{var j=E=>{var C=Vi(),D=d(C),G=d(D,!0);c(D);var te=h(D,2),de=d(te);{var oe=$=>{var U=Wi();U.__click=()=>Nt(null),P($,U)},ae=$=>{var U=Fi(),ie=at(U);ie.__click=()=>{Nt(null),y()};var q=h(ie,2);q.__click=function(...L){vs?.apply(this,L)},P($,U)};Q(de,$=>{o(t)?$(oe):$(ae,!1)})}var B=h(de,2);B.__click=()=>{localStorage.removeItem("grammar_game_api_key"),location.reload()},c(te),c(C),V(()=>k(G,o(l))),P(E,C)};Q(w,E=>{o(l)&&E(j)})}c(W),P(a,W),Ne()}Oe(["click"]);var Qi=N('<div class="tense-detail svelte-14kz89h"><span class="detail-label svelte-14kz89h">Estructura</span> <p class="detail-text svelte-14kz89h"> </p></div>'),Gi=N('<th class="svelte-14kz89h"> </th>'),Ji=N('<td class="svelte-14kz89h"> </td>'),Xi=N('<tr class="svelte-14kz89h"></tr>'),Yi=N('<details class="table-collapsible svelte-14kz89h"><summary class="table-toggle svelte-14kz89h"> </summary> <div class="table-detail svelte-14kz89h"><table class="verb-table svelte-14kz89h"><thead><tr></tr></thead><tbody class="svelte-14kz89h"></tbody></table></div></details>'),Ki=N('<details class="tense-card svelte-14kz89h"><summary class="tense-name svelte-14kz89h"> </summary> <div class="tense-content svelte-14kz89h"><p class="tense-desc svelte-14kz89h"> </p> <!> <div class="tense-detail example svelte-14kz89h"><span class="detail-label svelte-14kz89h">Ejemplo</span> <p class="detail-text svelte-14kz89h"> </p> <p class="detail-text-es svelte-14kz89h"> </p></div> <div class="tense-detail tip svelte-14kz89h"><span class="detail-label svelte-14kz89h">Tip</span> <p class="detail-text svelte-14kz89h"> </p></div> <!></div></details>'),Zi=N('<div class="section svelte-14kz89h"><h3 class="section-title svelte-14kz89h"> </h3> <!></div>'),el=N('<div class="glossary svelte-14kz89h"><header class="glossary-header svelte-14kz89h"><button class="back-btn svelte-14kz89h" aria-label="Volver"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 12H5M12 19l-7-7 7-7"></path></svg></button> <h2 class="glossary-title svelte-14kz89h">Glosario gramatical</h2></header> <!></div>');function tl(a,e){const t={Fundamentos:"#6b7280",Principiante:"#e85d04",Intermedio:"#e85d04",Avanzado:"#d00000",Preguntas:"#1a56db"};var s=el(),n=d(s),r=d(n);r.__click=function(...i){e.onclose?.apply(this,i)},Se(2),c(n);var l=h(n,2);me(l,17,()=>ht,be,(i,u)=>{var m=Zi(),v=d(m),x=d(v,!0);c(v);var _=h(v,2);me(_,17,()=>o(u).tenses,be,(g,S)=>{var M=Ki(),f=d(M),y=d(f,!0);c(f);var T=h(f,2),W=d(T),F=d(W,!0);c(W);var A=h(W,2);{var b=B=>{var $=Qi(),U=h(d($),2),ie=d(U,!0);c(U),c($),V(()=>k(ie,o(S).structure)),P(B,$)};Q(A,B=>{o(S).structure&&B(b)})}var w=h(A,2),j=h(d(w),2),E=d(j,!0);c(j);var C=h(j,2),D=d(C,!0);c(C),c(w);var G=h(w,2),te=h(d(G),2),de=d(te,!0);c(te),c(G);var oe=h(G,2);{var ae=B=>{var $=Yi(),U=d($),ie=d(U);c(U);var q=h(U,2),L=d(q),Z=d(L),we=d(Z);me(we,21,()=>o(S).table.headers,be,(le,X)=>{var ee=Gi(),ve=d(ee,!0);c(ee),V(()=>k(ve,o(X))),P(le,ee)}),c(we),c(Z);var ue=h(Z);me(ue,21,()=>o(S).table.rows,be,(le,X)=>{var ee=Xi();me(ee,21,()=>o(X),be,(ve,Y)=>{var se=Ji(),ce=d(se,!0);c(se),V(()=>k(ce,o(Y))),P(ve,se)}),c(ee),P(le,ee)}),c(ue),c(L),c(q),c($),V(()=>k(ie,`Ver lista completa (${o(S).table.rows.length??""} verbos)`)),P(B,$)};Q(oe,B=>{o(S).table&&B(ae)})}c(T),c(M),V(()=>{k(y,o(S).name),k(F,o(S).description),k(E,o(S).example),k(D,o(S).exampleEs),k(de,o(S).tip)}),P(g,M)}),c(m),V(()=>{qa(v,`color: ${t[o(u).level]??""}`),k(x,o(u).level)}),P(i,m)}),c(s),P(a,s)}Oe(["click"]);var al=N(`<div class="dedication svelte-kt5d72"><button class="back-btn svelte-kt5d72"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-kt5d72"><path d="M19 12H5" class="svelte-kt5d72"></path><path d="M12 19l-7-7 7-7" class="svelte-kt5d72"></path></svg></button> <div class="heart-big svelte-kt5d72">ğŸ§¡</div> <h2 class="title svelte-kt5d72">Dedicatoria</h2> <div class="message svelte-kt5d72"><p class="svelte-kt5d72">Dedicado a mis hijos <strong class="svelte-kt5d72">Anaelle</strong> y <strong class="svelte-kt5d72">David</strong>,
			a mis padres <strong class="svelte-kt5d72">Reinaldo</strong> y <strong class="svelte-kt5d72">Nelcy</strong>,
			a mi hermanita <strong class="svelte-kt5d72">Jeje</strong>,
			a toda mi familia <strong class="svelte-kt5d72">Dominguez</strong> y <strong class="svelte-kt5d72">Castiblanco</strong>,
			y por ultimo pero no menos importante,
			a mi bella esposa <strong class="svelte-kt5d72">Olga Lucia</strong>.</p> <p class="svelte-kt5d72">Que este jueguito sea una entretencion sana,
			les ayude a dominar el idioma
			y les mantenga la mente saludable y en forma.</p></div> <div class="decoration svelte-kt5d72"><span class="svelte-kt5d72">~</span> <span class="svelte-kt5d72">ğŸ§¡</span> <span class="svelte-kt5d72">~</span></div> <p class="signature svelte-kt5d72">Con todo mi amor, Diego</p></div>`);function sl(a,e){var t=al(),s=d(t);s.__click=function(...n){e.onclose?.apply(this,n)},Se(10),c(t),P(a,t)}Oe(["click"]);var nl=N('<div class="empty svelte-k8i216"><p class="empty-icon svelte-k8i216">&#127942;</p> <p class="empty-text svelte-k8i216">No tienes ejercicios pendientes</p> <p class="empty-sub svelte-k8i216">Sigue practicando y los ejercicios que falles aparecerÃ¡n aquÃ­ para que los conquistes.</p></div>'),rl=N("<button> </button>"),ol=N('<div class="filter-row svelte-k8i216"><button>Todos</button> <!></div>'),il=N("<button> </button>"),ll=N('<div class="filter-row svelte-k8i216"><button>Todos</button> <!></div>'),cl=N('<div class="card svelte-k8i216"><p class="spanish svelte-k8i216"> </p> <div class="badges svelte-k8i216"><span class="badge tense svelte-k8i216"> </span> <span class="badge topic svelte-k8i216"> </span> <span class="badge diff svelte-k8i216"> </span></div> <p class="user-answer svelte-k8i216">Tu respuesta: <span class="svelte-k8i216"> </span></p> <p class="date svelte-k8i216"> </p> <div class="card-actions svelte-k8i216"><button class="delete-btn svelte-k8i216">Descartar</button> <button class="retry-btn svelte-k8i216">Reintentar</button></div></div>'),ul=N('<!> <!> <p class="count svelte-k8i216"> </p> <div class="cards svelte-k8i216"></div>',1),dl=N('<div class="retry-list svelte-k8i216"><header class="svelte-k8i216"><button class="back-btn svelte-k8i216" aria-label="Volver"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 12H5M12 19l-7-7 7-7"></path></svg></button> <h2 class="svelte-k8i216">Ejercicios por conquistar</h2></header> <!></div>');function pl(a,e){je(e,!0);let t=J(da(At())),s=J(null),n=J(null);const r=K(()=>[...new Set(o(t).map(y=>y.challenge.metadata.tense))].sort()),l=K(()=>[...new Set(o(t).map(y=>y.challenge.metadata.topic))].sort()),i=K(()=>o(t).filter(y=>!(o(s)&&y.challenge.metadata.tense!==o(s)||o(n)&&y.challenge.metadata.topic!==o(n))));function u(y){return new Date(y).toLocaleDateString("es",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})}function m(y){Qs(y),I(t,At(),!0)}const v={beginner:"Principiante",intermediate:"Intermedio",advanced:"Avanzado"};var x=dl(),_=d(x),g=d(_);g.__click=function(...y){e.onclose?.apply(this,y)},Se(2),c(_);var S=h(_,2);{var M=y=>{var T=nl();P(y,T)},f=y=>{var T=ul(),W=at(T);{var F=C=>{var D=ol(),G=d(D);let te;G.__click=()=>I(s,null);var de=h(G,2);me(de,17,()=>o(r),be,(oe,ae)=>{var B=rl();let $;B.__click=()=>I(s,o(s)===o(ae)?null:o(ae),!0);var U=d(B,!0);c(B),V(()=>{$=Ue(B,1,"filter-chip svelte-k8i216",null,$,{active:o(s)===o(ae)}),k(U,o(ae))}),P(oe,B)}),c(D),V(()=>te=Ue(G,1,"filter-chip svelte-k8i216",null,te,{active:!o(s)})),P(C,D)};Q(W,C=>{o(r).length>1&&C(F)})}var A=h(W,2);{var b=C=>{var D=ll(),G=d(D);let te;G.__click=()=>I(n,null);var de=h(G,2);me(de,17,()=>o(l),be,(oe,ae)=>{var B=il();let $;B.__click=()=>I(n,o(n)===o(ae)?null:o(ae),!0);var U=d(B,!0);c(B),V(()=>{$=Ue(B,1,"filter-chip topic svelte-k8i216",null,$,{active:o(n)===o(ae)}),k(U,o(ae))}),P(oe,B)}),c(D),V(()=>te=Ue(G,1,"filter-chip topic svelte-k8i216",null,te,{active:!o(n)})),P(C,D)};Q(A,C=>{o(l).length>1&&C(b)})}var w=h(A,2),j=d(w);c(w);var E=h(w,2);me(E,21,()=>o(i),C=>C.id,(C,D)=>{var G=cl(),te=d(G),de=d(te,!0);c(te);var oe=h(te,2),ae=d(oe),B=d(ae,!0);c(ae);var $=h(ae,2),U=d($,!0);c($);var ie=h($,2),q=d(ie,!0);c(ie),c(oe);var L=h(oe,2),Z=h(d(L)),we=d(Z,!0);c(Z),c(L);var ue=h(L,2),le=d(ue,!0);c(ue);var X=h(ue,2),ee=d(X);ee.__click=()=>m(o(D).id);var ve=h(ee,2);ve.__click=()=>e.onretry(o(D)),c(X),c(G),V(Y=>{k(de,o(D).challenge.spanishSentence),k(B,o(D).challenge.metadata.tense),k(U,o(D).challenge.metadata.topic),k(q,v[o(D).challenge.metadata.difficulty]??o(D).challenge.metadata.difficulty),k(we,o(D).userAnswer),k(le,Y)},[()=>u(o(D).failedAt)]),P(C,G)}),c(E),V(()=>k(j,`${o(i).length??""} ejercicio${o(i).length!==1?"s":""}`)),P(y,T)};Q(S,y=>{o(t).length===0?y(M):y(f,!1)})}c(x),P(a,x),Ne()}Oe(["click"]);var hl=N("<button> </button>"),ml=N('<div class="empty svelte-qwlc6v"><p class="empty-icon svelte-qwlc6v">&#128202;</p> <p class="empty-text svelte-qwlc6v">AÃºn no hay datos</p> <p class="empty-sub svelte-qwlc6v">Completa ejercicios para ver tus estadÃ­sticas aquÃ­.</p></div>'),fl=N('<div class="breakdown-row svelte-qwlc6v"><div class="breakdown-header svelte-qwlc6v"><span class="breakdown-key svelte-qwlc6v"> </span> <span class="breakdown-nums svelte-qwlc6v"> </span></div> <div class="bar-bg svelte-qwlc6v"><div class="bar-fill svelte-qwlc6v"></div></div></div>'),vl=N('<section class="svelte-qwlc6v"><h3 class="svelte-qwlc6v">Por tiempo verbal</h3> <!></section>'),gl=N('<div class="breakdown-row svelte-qwlc6v"><div class="breakdown-header svelte-qwlc6v"><span class="breakdown-key svelte-qwlc6v"> </span> <span class="breakdown-nums svelte-qwlc6v"> </span></div> <div class="bar-bg svelte-qwlc6v"><div class="bar-fill topic svelte-qwlc6v"></div></div></div>'),bl=N('<section class="svelte-qwlc6v"><h3 class="svelte-qwlc6v">Por tema</h3> <!></section>'),yl=N('<span class="insight-chip mastered svelte-qwlc6v"> </span>'),wl=N('<div class="insight-block mastered svelte-qwlc6v"><h4 class="svelte-qwlc6v">Dominados</h4> <div class="insight-chips svelte-qwlc6v"></div></div>'),_l=N('<span class="insight-chip practice svelte-qwlc6v"> </span>'),xl=N('<div class="insight-block practice svelte-qwlc6v"><h4 class="svelte-qwlc6v">Necesitan prÃ¡ctica</h4> <div class="insight-chips svelte-qwlc6v"></div></div>'),Sl=N('<section class="insights svelte-qwlc6v"><!> <!></section>'),kl=N('<div class="summary svelte-qwlc6v"><div class="stat-card svelte-qwlc6v"><span class="stat-value svelte-qwlc6v"> </span> <span class="stat-label svelte-qwlc6v">Ejercicios</span></div> <div class="stat-card correct svelte-qwlc6v"><span class="stat-value svelte-qwlc6v"> </span> <span class="stat-label svelte-qwlc6v">Correctos</span></div> <div class="stat-card pct svelte-qwlc6v"><span class="stat-value svelte-qwlc6v"> </span> <span class="stat-label svelte-qwlc6v">Aciertos</span></div> <div class="stat-card streak svelte-qwlc6v"><span class="stat-value svelte-qwlc6v"> </span> <span class="stat-label svelte-qwlc6v">Mejor racha</span></div></div> <!> <!> <!>',1),El=N('<div class="stats svelte-qwlc6v"><header class="svelte-qwlc6v"><button class="back-btn svelte-qwlc6v" aria-label="Volver"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 12H5M12 19l-7-7 7-7"></path></svg></button> <h2 class="svelte-qwlc6v">Mis estadÃ­sticas</h2></header> <div class="period-selector svelte-qwlc6v"></div> <!></div>');function Tl(a,e){je(e,!0);let t=J("all");const s=[{key:"day",label:"Hoy"},{key:"week",label:"Semana"},{key:"month",label:"Mes"},{key:"year",label:"AÃ±o"},{key:"all",label:"Todo"}],n=K(()=>Pr(o(t))),r=K(()=>o(n).length),l=K(()=>o(n).filter(A=>A.isCorrect).length),i=K(()=>o(r)>0?Math.round(o(l)/o(r)*100):0),u=K(()=>{let A=0,b=0;for(const w of o(n))w.isCorrect?(b++,b>A&&(A=b)):b=0;return A});function m(A,b){const w=new Map;for(const j of A){const E=j[b],C=w.get(E)??{total:0,correct:0};C.total++,j.isCorrect&&C.correct++,w.set(E,C)}return[...w.entries()].map(([j,E])=>({key:j,...E,pct:Math.round(E.correct/E.total*100)})).sort((j,E)=>E.total-j.total)}const v=K(()=>m(o(n),"tense")),x=K(()=>m(o(n),"topic")),_=K(()=>[...o(v),...o(x)].filter(A=>A.pct>=80&&A.total>=5).reduce((A,b)=>(A.add(b.key),A),new Set)),g=K(()=>[...o(v),...o(x)].filter(A=>A.pct<60&&A.total>=3).reduce((A,b)=>(A.add(b.key),A),new Set));var S=El(),M=d(S),f=d(M);f.__click=function(...A){e.onclose?.apply(this,A)},Se(2),c(M);var y=h(M,2);me(y,21,()=>s,be,(A,b)=>{var w=hl();let j;w.__click=()=>I(t,o(b).key,!0);var E=d(w,!0);c(w),V(()=>{j=Ue(w,1,"period-chip svelte-qwlc6v",null,j,{active:o(t)===o(b).key}),k(E,o(b).label)}),P(A,w)}),c(y);var T=h(y,2);{var W=A=>{var b=ml();P(A,b)},F=A=>{var b=kl(),w=at(b),j=d(w),E=d(j),C=d(E,!0);c(E),Se(2),c(j);var D=h(j,2),G=d(D),te=d(G,!0);c(G),Se(2),c(D);var de=h(D,2),oe=d(de),ae=d(oe);c(oe),Se(2),c(de);var B=h(de,2),$=d(B),U=d($,!0);c($),Se(2),c(B),c(w);var ie=h(w,2);{var q=le=>{var X=vl(),ee=h(d(X),2);me(ee,17,()=>o(v),be,(ve,Y)=>{var se=fl(),ce=d(se),re=d(ce),_e=d(re,!0);c(re);var fe=h(re,2),ge=d(fe);c(fe),c(ce);var he=h(ce,2),Ke=d(he);c(he),c(se),V(()=>{k(_e,o(Y).key),k(ge,`${o(Y).correct??""}/${o(Y).total??""} (${o(Y).pct??""}%)`),qa(Ke,`width: ${o(Y).pct??""}%`)}),P(ve,se)}),c(X),P(le,X)};Q(ie,le=>{o(v).length>0&&le(q)})}var L=h(ie,2);{var Z=le=>{var X=bl(),ee=h(d(X),2);me(ee,17,()=>o(x),be,(ve,Y)=>{var se=gl(),ce=d(se),re=d(ce),_e=d(re,!0);c(re);var fe=h(re,2),ge=d(fe);c(fe),c(ce);var he=h(ce,2),Ke=d(he);c(he),c(se),V(()=>{k(_e,o(Y).key),k(ge,`${o(Y).correct??""}/${o(Y).total??""} (${o(Y).pct??""}%)`),qa(Ke,`width: ${o(Y).pct??""}%`)}),P(ve,se)}),c(X),P(le,X)};Q(L,le=>{o(x).length>0&&le(Z)})}var we=h(L,2);{var ue=le=>{var X=Sl(),ee=d(X);{var ve=ce=>{var re=wl(),_e=h(d(re),2);me(_e,21,()=>[...o(_)],be,(fe,ge)=>{var he=yl(),Ke=d(he,!0);c(he),V(()=>k(Ke,o(ge))),P(fe,he)}),c(_e),c(re),P(ce,re)};Q(ee,ce=>{o(_).size>0&&ce(ve)})}var Y=h(ee,2);{var se=ce=>{var re=xl(),_e=h(d(re),2);me(_e,21,()=>[...o(g)],be,(fe,ge)=>{var he=_l(),Ke=d(he,!0);c(he),V(()=>k(Ke,o(ge))),P(fe,he)}),c(_e),c(re),P(ce,re)};Q(Y,ce=>{o(g).size>0&&ce(se)})}c(X),P(le,X)};Q(we,le=>{(o(_).size>0||o(g).size>0)&&le(ue)})}V(()=>{k(C,o(r)),k(te,o(l)),k(ae,`${o(i)??""}%`),k(U,o(u))}),P(A,b)};Q(T,A=>{o(r)===0?A(W):A(F,!1)})}c(S),P(a,S),Ne()}Oe(["click"]);var Il=N('<div class="loading-screen svelte-1uha8ag"><div class="spinner svelte-1uha8ag"></div> <p>Generando ejercicio...</p></div>');function Ol(a,e){je(e,!0);const t=K(an),s=K(_o);let n=J(!1),r=J(!1),l=J(!1);zn(()=>{Eo()&&I(n,!0)});function i(b){ko(b),I(n,!0)}async function u(b,w,j,E){To(b),Io(w),Po(j),jo(E??!1),nn(),Ae("loading"),Fe("game");try{const C=await Ln(_(),b,w,j,[],E);Oa(C),Ae("playing")}catch(C){Nt(Va(C)),Ae("playing")}}function m(){localStorage.removeItem("grammar_game_api_key"),I(n,!1),Ae("setup"),Fe("home")}function v(b){const w=[...b];for(let j=w.length-1;j>0;j--){const E=Math.floor(Math.random()*(j+1));[w[j],w[E]]=[w[E],w[j]]}return w}function x(b){No(b.id);const w={...b.challenge,cards:v(b.challenge.cards)};Oa(w),Ae("playing"),Fe("game")}function _(){return localStorage.getItem("grammar_game_api_key")??""}var g=ss(),S=at(g);{var M=b=>{pl(b,{onclose:()=>Fe("home"),onretry:x})},f=b=>{Tl(b,{onclose:()=>Fe("home")})},y=b=>{var w=ss(),j=at(w);{var E=D=>{var G=Il();P(D,G)},C=D=>{$i(D,{})};Q(j,D=>{o(t)==="loading"?D(E):D(C,!1)})}P(b,w)},T=b=>{xr(b,{onsave:i})},W=b=>{tl(b,{onclose:()=>I(r,!1)})},F=b=>{sl(b,{onclose:()=>I(l,!1)})},A=b=>{qr(b,{onselect:u,onglossary:()=>I(r,!0),ondedication:()=>I(l,!0),onchangekey:m,onretry:()=>Fe("retry"),onstats:()=>Fe("stats")})};Q(S,b=>{o(s)==="retry"?b(M):o(s)==="stats"?b(f,1):o(s)==="game"?b(y,2):o(n)?o(r)?b(W,4):o(l)?b(F,5):b(A,!1):b(T,3)})}P(a,g),Ne()}export{Ol as component};
